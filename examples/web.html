<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='47.2' r='34'%0Afill='transparent' stroke='%23fff' stroke-width='7.5' /%3E%3C/svg%3E"
      type="image/svg+xml"
    />
    <title>web</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }

      body {
        --light: #eee;
        --dark: #222;
        --color: var(--dark);
        --background: var(--light);
        color: var(--color);
        background: var(--background)
      }

      @media (prefers-color-scheme: dark) {
        body:not(.light) {
          --color: var(--light);
          --background: var(--dark);
        }
      }

      
    </style>
  </head>
  <body>
    <main></main>
    <script type="module">/**
 * Filter object with filter function `fn`.
 *
 * @param obj Object to filter.
 * @param fn Filter function receiving [key, value].
 * @returns A new object filtered.
 */ const filter = (obj, fn)=>Object.fromEntries(Object.entries(obj).filter(fn));
/**
 * Create a new object with certain properties omitted.
 *
 * @param obj Object to omit from.
 * @param props Properties to omit.
 * @returns A new object with the properties omitted.
 */ const omit = (obj, props)=>filter(obj, includesKey(props, true));
/**
 * @private
 */ const includesKey = (props, invert = false)=>([key])=>invert ^ props.includes(key);

const bool = Symbol.for('to-fluent-bool');
/**
 * Convert a function with a settings object to fluent API.
 *
 * ```ts
 * import { toFluent, bool } from 'to-fluent'
 *
 * const cb = toFluent(
 *   class {
 *     foo = bool // indicate boolean but initially omitted
 *     bar?: string // optional
 *     zoo = 123 // a default
 *   },
 *   settings => () => settings
 * )
 *
 * expect(cb()).toEqual({ zoo: 123 })
 * expect(cb.foo()).toEqual({ foo: true, zoo: 123 })
 * expect(cb.not.foo()).toEqual({ foo: false, zoo: 123 })
 * expect(cb.bar('hello')()).toEqual({ bar: 'hello', zoo: 132 })
 * expect(cb.foo.bar('hello').zoo(456)())
 *   .toEqual({ foo: true, bar: 'hello', zoo: 456 })
 * ```
 */ const toFluent = (Schema, cb)=>{
    const bools = Object.entries(new Schema()).filter(([, x])=>x === bool || typeof x === 'boolean');
    const flags = bools.map(([key])=>key);
    const omitted = bools.filter(([, x])=>x === bool).map(([key])=>key);
    const settings = omit(new Schema(), omitted);
    let not = false;
    const bind = (settings)=>new Proxy(cb, {
            get (_, key, receiver) {
                if (key === 'not') {
                    not = true;
                    return receiver;
                } else if (flags.includes(key)) {
                    const value = not ? false : true;
                    not = false;
                    return bind({
                        ...settings,
                        [key]: value
                    });
                } else {
                    return (value)=>{
                        return bind({
                            ...settings,
                            [key]: value
                        });
                    };
                }
            },
            construct (_, args) {
                const ctor = cb.call(self, {
                    ...settings
                });
                return new ctor(...args);
            },
            apply: (_, self1, args)=>cb.call(self1, {
                    ...settings
                }).apply(self1, args)
        });
    return bind(settings);
};

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

var lib = {};

var __assign = (commonjsGlobal && commonjsGlobal.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (commonjsGlobal && commonjsGlobal.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spreadArray = (commonjsGlobal && commonjsGlobal.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(lib, "__esModule", { value: true });
lib.EventEmitter = void 0;
/**
 * A EventEmitter work like node/event
 */
var EventEmitter =  (function () {
    function EventEmitter() {
        this.listeners = {};
    }
    /**
     * Send Event to all listener
     * @param eventName Event Name
     * @param args arguments
     */
    EventEmitter.prototype.emit = function (eventName) {
        var _this = this;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        if (this.listeners[eventName]) {
            try {
                this.listeners[eventName].forEach(function (item) {
                    if (typeof item.callback === 'function') {
                        item.callback.apply(item, __spreadArray([], __read(args), false));
                    }
                    if (item.once === true) {
                        _this.off(eventName, item.callback);
                    }
                });
            }
            catch (e) { }
        }
        return this;
    };
    /**
     * Add event listener
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.on = function (eventName, callback, options) {
        if (!this.listeners[eventName]) {
            this.listeners[eventName] = [];
        }
        this.listeners[eventName].push(__assign(__assign({}, options), { callback: callback }));
        return this;
    };
    /**
     * Remove event listener
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.off = function (eventName, callback) {
        if (!this.listeners[eventName]) {
            return;
        }
        var index = this.listeners[eventName].findIndex(function (item) { return item.callback === callback; });
        if (index >= 0) {
            this.listeners[eventName].splice(index, 1);
        }
        if (this.listeners[eventName].length === 0) {
            delete this.listeners[eventName];
        }
        return this;
    };
    /**
     * Like on but just run once
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.once = function (eventName, callback) {
        this.on(eventName, callback, { once: true });
        return this;
    };
    EventEmitter.onceSymbol = Symbol('once');
    return EventEmitter;
}());
lib.EventEmitter = EventEmitter;

/**
 * Pick properties from an object into a new object.
 *
 * @param obj Object to pick from.
 * @param props Properties to pick.
 * @returns A new object with the picked properties.
 */ const pick = (obj, props)=>props.reduce((p, n)=>{
        if (n in obj) p[n] = obj[n];
        return p;
    }, {});

toFluent(class {
    configurable = false;
    enumerable = false;
    writable = bool;
}, (descriptor)=>(object, name, value)=>Object.defineProperty(object, name, value == null ? descriptor : {
            ...descriptor,
            value
        }));
class MapMap {
    #map = new Map();
    set(keyA, keyB, value) {
        if (this.#map.has(keyA)) {
            const map = this.#map.get(keyA);
            map.set(keyB, value);
            return map.size;
        } else {
            this.#map.set(keyA, new Map([
                [
                    keyB,
                    value
                ]
            ]));
            return 1;
        }
    }
    get(keyA, keyB) {
        return this.#map.get(keyA)?.get(keyB);
    }
    delete(keyA, keyB) {
        return this.#map.get(keyA)?.delete(keyB) ?? false;
    }
    has(keyA, keyB) {
        return this.#map.has(keyA) && this.#map.get(keyA).has(keyB);
    }
    clear() {
        return this.#map.clear();
    }
}
const mutable = (array)=>array;

const MIN_IDLE_TIME = parseInt(localStorage.recorderMinIdleTime) || 50;
const FRAME_TIME = 1000 / 60;
const allEvents = [
    ['misc', [
            'blur',
            'focus',
            'click',
            'dblclick',
            'wheel',
            'input',
            'change',
            'contextmenu',
        ]],
    ['pointer', [
            'pointerdown',
            'pointerup',
            'pointermove',
            'pointerover',
            'pointerenter',
            'pointerleave',
            'pointercancel',
        ]],
    ['mouse', [
            'mousedown',
            'mouseup',
            'mousemove',
            'mouseover',
            'mouseenter',
            'mouseleave',
            'mousecancel',
        ]],
    ['keyboard', [
            'keydown',
            'keyup',
            'keypress',
        ]],
];
const copyEventProps = [
    'pointerId',
    'buttons',
    'altKey',
    'ctrlKey',
    'shiftKey',
    'metaKey',
    'pageX',
    'pageY',
    'deltaX',
    'deltaY',
    'key',
    'which',
];
const saveEventProps = [
    'type',
    'timeStamp',
];
const dispatchProps = [
    'bubbles',
    'composed',
    'cancelable',
];
const EventConstructorsMap = {
    InputEvent,
    KeyboardEvent,
    MouseEvent,
    PointerEvent,
    WheelEvent,
};
function copyEvent(event) {
    return Object.fromEntries(copyEventProps.map((key) => [key, { value: event[key] }]));
}
function saveEvent(event, capture) {
    return {
        is: event.constructor.name,
        capture,
        ...Object.fromEntries([...copyEventProps, ...saveEventProps, ...dispatchProps].map((key) => [key, event[key]])),
    };
}
function getElementSelector(el) {
    const parts = [];
    while (el) {
        parts.unshift(el.tagName.toLowerCase());
        const parent = el.parentNode;
        if (parent) {
            // nth-child indexes are 1-based
            const children = [...parent.children];
            if (children.length > 1) {
                const index = children.indexOf(el) + 1;
                if (index) {
                    parts[0] += `:nth-child(${index})`;
                }
            }
        }
        if (el.hasAttribute('part')) {
            const sel = `[part=${el.getAttribute('part')}]`;
            parts[0] += sel;
        }
        if (parent instanceof Element) {
            el = parent;
        }
        else {
            break;
        }
    }
    return parts.join(' > ');
}
function nodeToSelectors(el) {
    if (el instanceof Window)
        return ['window'];
    const selectors = [];
    let rootNode;
    while (rootNode = el.getRootNode()) {
        selectors.unshift(getElementSelector(el));
        if (rootNode === document || rootNode === el)
            break;
        el = rootNode.host;
    }
    return selectors;
}
function selectorsToNode(selectors) {
    let rootNode = document;
    let current, el;
    for (const sel of selectors) {
        if (sel === 'window') {
            return window;
        }
        el = rootNode?.querySelector(sel);
        if (!el)
            return current;
        current = el;
        rootNode = el?.shadowRoot;
        if (!rootNode)
            break;
    }
    return current;
}
const patchEventTarget = () => {
    const original = {
        addEventListener: EventTarget.prototype.addEventListener,
        removeEventListener: EventTarget.prototype.removeEventListener,
    };
    const handler = {
        lastEventTime: 0,
        recording: false,
        onaction: (_action) => { }
    };
    const callbacks = new MapMap();
    function callbackFor(callback, options) {
        if (callbacks.has(callback, options)) {
            return callbacks.get(callback, options);
        }
        function listener(event) {
            const isRecording = handler.recording && (event.constructor.name in EventConstructorsMap);
            let selectors;
            if (isRecording) {
                selectors = nodeToSelectors(this);
            }
            const result = callback.call(this, event);
            // used to detect idle for autoplay
            handler.lastEventTime = event.timeStamp;
            if (isRecording) {
                if (selectors.filter(Boolean).length) {
                    handler.onaction({
                        selectors,
                        event: saveEvent(event, typeof options === 'boolean' ? options : options?.capture)
                    });
                }
                else {
                    console.warn('no selectors', this);
                }
            }
            return result;
        }
        if (typeof options === 'boolean' || !options?.once) {
            callbacks.set(callback, options, listener);
        }
        return listener;
    }
    EventTarget.prototype.addEventListener = function (type, callback, options) {
        const listener = callbackFor(callback, options);
        return original.addEventListener.call(this, type, listener, options);
    };
    EventTarget.prototype.removeEventListener = function (type, callback, options) {
        const listener = callbacks.get(callback, options);
        if (listener) {
            callbacks.delete(callback, options);
            return original.removeEventListener.call(this, type, listener, options);
        }
        else
            return original.removeEventListener.call(this, type, callback, options);
    };
    return handler;
};
const handler = patchEventTarget();
class DOMRecorder {
    actions = [];
    eventTypes = (localStorage.recorderEventTypes
        ?? 'click,pointermove,keydown').split(',');
    enabledGroups = (localStorage.recorderEnabledGroups
        ?? 'misc,pointer,keyboard').split(',');
    el;
    controlsEl;
    statusEl;
    status = '';
    actionsEl;
    events = '';
    formEl;
    pointerEl;
    autoplay = false;
    skipped = 0;
    replayed = 0;
    replaying = false;
    dirtyActions = false;
    unsavedActions = false;
    onBeforeUnload = (event) => {
        if (this.unsavedActions) {
            event.preventDefault();
            return (event.returnValue = 'There are unsaved actions, are you sure you want to exit?');
        }
    };
    constructor() {
        this.render();
        this.getActions().then(() => {
            this.maybeAutoplay();
        });
        window.addEventListener('beforeunload', this.onBeforeUnload, { capture: true });
    }
    render() {
        this.el ??= document.createElement('div');
        this.el.id = 'recorder-ui';
        this.paintEl();
        this.pointerEl = this.el.querySelector('.recorder-ui-pointer');
        this.controlsEl = this.el.querySelector('.recorder-ui-controls');
        this.paintControls();
        this.formEl = this.el.querySelector('form');
        this.paintForm();
        this.actionsEl = this.el.querySelector('details');
        this.paintActions();
        this.paintStatus(0);
        allEvents
            .flatMap(([, events]) => events)
            .map((eventType) => {
            this.el.addEventListener(eventType, (e) => {
                this.autoplay = false;
                e.stopPropagation();
            }, { passive: false });
        });
    }
    paintEl() {
        this.el.innerHTML = /*html*/ `
      <style>
        #recorder-ui {
          --background: #222e;
          position: fixed;
          z-index: 99999999;
          top: 0;
          right: 0;
          user-select: none;
          max-width: 100%;
          display: flex;
          flex-flow: column;
        }
        #recorder-ui * {
          font-family: system-ui;
          font-size: 14px;
        }
        .recorder-ui-controls {
          background: var(--background);
        }
        .recorder-ui-controls,
        .recorder-ui-controls > * {
          display: flex;
          flex-flow: row wrap;
          place-items: center;
        }
        #recorder-ui input[type=checkbox] {
          vertical-align: middle;
        }
        #recorder-ui form {
          background: var(--background);
          overflow: scroll;
          display: flex;
          flex-flow: column;
        }
        #recorder-ui form.hidden {
          display: none;
        }
        #recorder-ui form > div {
          display: flex;
          flex-flow: row;
        }
        #recorder-ui label {
          white-space: nowrap;
        }
        #recorder-ui form fieldset {
          padding: 0;
          display: flex;
          flex-flow: column wrap;
          flex: 1;
        }
        #recorder-ui form fieldset legend {
          text-align: center;
        }
        #recorder-ui form fieldset.recorder-ui-groups {
          flex: 0;
          min-width: 100px;
          justify-content: center;
        }
        #recorder-ui details {
          position: relative;
          max-width: 100%;
          white-space: pre;
        }
        #recorder-ui details[open] {
          height: 200px;
          overflow: scroll;
          resize: vertical;
        }
        #recorder-ui details summary {
          background: #333;
          position: sticky;
          z-index: 1;
          top: 0;
        }
        #recorder-ui details div {
          opacity: 0.15;
        }
        #recorder-ui:hover details {
          background: var(--background);
        }
        #recorder-ui:hover details div {
          opacity: 0.5;
        }
        #recorder-ui details summary:hover,
        #recorder-ui details div:hover {
          color: #000;
          background: #888;
          opacity: 1;
        }
        .recorder-ui-event-skipped {
          color: #777;
        }
        .recorder-ui-pointer {
          position: fixed;
          z-index: 99999999;
          mix-blend-mode: difference;
        }
        .recorder-ui-pointer svg {
          position: relative;
          left: -6px;
          top: -3px;
        }
        .recorder-ui-pointer.hidden {
          display: none;
        }
      </style>
      <div class="recorder-ui-pointer hidden">
        <!-- https://github.com/grommet/grommet-icons/blob/master/public/img/cursor.svg -->
        <svg width="30" height="30" viewBox="0 0 24 24">
        <polygon
          fill="#666a"
          stroke="#fff"
          stroke-width="1.15"
          points="6 3 18 14 13 15 16 20.5 13 22 10 16 6 19"
        />
      </div>
      <div class="recorder-ui-controls"></div>
      <form onchange="recorder.getFormData(this)"></form>
      <details open></details>
    `;
    }
    paintControls() {
        this.controlsEl.innerHTML = /*html*/ `
      <div>
        <button ${this.replaying ? 'disabled' : 'onclick="recorder.startRecording()"'}>record</button>
        <button ${!handler.recording ? 'disabled' : 'onclick="recorder.stopRecording()"'}>stop</button>
      </div>
      &nbsp;
      <div>
        <button ${this.replaying || (!this.actions.length && !handler.recording) ? 'disabled' : 'onclick="recorder.startReplaying()"'}>replay</button>
        <button ${!this.replaying ? 'disabled' : 'onclick="recorder.stopReplaying()"'}>stop</button>
      </div>
      &nbsp;
      <div>
        server:
        <button ${!this.unsavedActions || this.replaying || !this.actions.length || handler.recording ? 'disabled' : 'onclick="recorder.postActions()"'}>post</button>
        <button  ${this.replaying || !this.actions.length || handler.recording ? 'disabled' : 'onclick="recorder.replayServer()"'}>replay</button>
      </div>
      &nbsp;
      <label
        oncontextmenu="event.preventDefault();localStorage.recorderMinIdleTime=parseInt(prompt('Enter idle time(ms) needed for autoplay to begin:', parseInt(localStorage.recorderMinIdleTime) || 50))"
      >
        auto:<input
          type="checkbox"
          onchange="localStorage.recorderAutoplay=this.checked"
          ${localStorage.recorderAutoplay === 'true' ? 'checked' : ''}
        />
      </label>
      <label>
        loop:<input
          type="checkbox"
          onchange="localStorage.recorderLoop=!!this.checked"
          ${localStorage.recorderLoop === 'true' ? 'checked' : ''}
        />
      </label>
    `;
    }
    paintForm() {
        const disabledEvents = allEvents
            .filter(([group]) => !this.enabledGroups.includes(group));
        const enabledEvents = allEvents
            .filter(([group]) => this.enabledGroups.includes(group));
        this.formEl.innerHTML = /*html*/ `
      ${!disabledEvents.length ? '' : /*html*/ `
      <div class="recorder-ui-groups">
        ${disabledEvents.map(([group, events]) => /*html*/ `
        <label>
          <input
            type="checkbox"
            name="enabledGroups[]"
            value="${group}"
          />
          ${group}
        </label>
        ${mutable(events)
            .filter((type) => this.eventTypes.includes(type))
            .map((type) => /*html*/ `
          <input
            type="hidden"
            name="recorderEventTypes[]"
            value="${type}"
          />
        `).join('')}
      `).join('')}
      </div>`}
      <div>
        ${enabledEvents.map(([group, events]) => /*html*/ `
        <fieldset>
          <legend>
            <label>
              <input
                type="checkbox"
                name="enabledGroups[]"
                value="${group}"
                checked
              />
              ${group}
            </label>
          </legend>
          <label>
            <input
              type="checkbox"
              ${mutable(events).every((type) => this.eventTypes.length && this.eventTypes.includes(type)) ? `
                checked
                onclick="recorder.deselectAll('${group}')"
              ` : `
                onclick="recorder.selectAll('${group}')"
              `}
            />
            all ${group}
          </label>
          ${events.map((type) => /*html*/ `
          <label>
            <input
              type="checkbox"
              name="recorderEventTypes[]"
              value="${type}"
              ${this.eventTypes.includes(type) ? 'checked' : ''}
            />
            ${type}
          </label>
          `).join('')}
        </fieldset>`).join('')}
      </div>
    `;
    }
    paintActions() {
        if (this.actions.length) {
            const firstTimeStamp = this.actions[0].event.timeStamp | 0;
            this.actionsEl.innerHTML = this.actions.map((action, index) => `<div id="action${index}" onclick="recorder.showDetails(this)">${(action.event.timeStamp | 0) - firstTimeStamp} ${action.event.type} ${action.selectors.at(-1).split(' > ').pop()}</div>`).join('');
        }
        this.actionsEl.prepend(this.statusEl ??= document.createElement('summary'));
        this.actionsEl.open = true;
    }
    paintStatus(kind) {
        let status;
        if (kind === 1) {
            status = `${this.actions.length - this.replayed - this.skipped} remaining (${this.skipped} skipped, ${this.actions.length} total)`;
        }
        else {
            status = `${this.actions.length} actions, ${this.skipped} skipped`;
        }
        requestAnimationFrame(() => {
            this.statusEl.textContent = this.status = status;
        });
    }
    async waitUntilIdle() {
        while (performance.now() - handler.lastEventTime < MIN_IDLE_TIME) {
            await new Promise((resolve) => setTimeout(resolve, 50));
        }
    }
    async maybeAutoplay() {
        if (!this.actions.length)
            return;
        if (localStorage.recorderAutoplay === 'true') {
            this.autoplay = true;
            await this.waitUntilIdle();
            if (this.autoplay) {
                this.startReplaying();
            }
        }
    }
    getFormData(form) {
        const formData = new FormData(form);
        this.eventTypes = localStorage.recorderEventTypes = formData.getAll('recorderEventTypes[]');
        this.enabledGroups = localStorage.recorderEnabledGroups = formData.getAll('enabledGroups[]');
        this.paintForm();
    }
    selectAll(group) {
        this.eventTypes = localStorage.recorderEventTypes = [...new Set([
                ...this.eventTypes,
                ...allEvents
                    .find(([g]) => group === g)[1]
            ])];
        this.paintForm();
    }
    deselectAll(group) {
        const toDeselect = allEvents
            .find(([g]) => group === g)[1];
        this.eventTypes = localStorage.recorderEventTypes = this.eventTypes.filter((type) => !toDeselect.includes(type));
        this.paintForm();
    }
    showDetails(el) {
        if (el.dataset.expanded === 'true')
            return;
        el.dataset.expanded = 'true';
        const action = this.actions[+el.id.split('action').pop()];
        const eventDetails = `\n${action.selectors.join('\n > ')}\n${JSON.stringify(action.event, null, 2)}`;
        this.actionsEl.querySelector(`#${el.id}`).append(eventDetails);
    }
    async postActions() {
        this.stopRecording();
        const res = await fetch(new URL('/store?key=recorder-actions', location.origin), {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(this.actions)
        });
        if (!res.ok) {
            console.warn(res);
        }
        else {
            this.unsavedActions = false;
            this.paintControls();
            console.log('posted');
        }
    }
    async getActions() {
        const res = await fetch(new URL('/store?key=recorder-actions', location.origin), {
            method: 'GET',
            headers: {
                'Accept': 'application/json'
            }
        });
        if (!res.ok) {
            console.warn(res);
        }
        else {
            const json = await res.json();
            this.actions = json;
            this.paintActions();
            this.paintControls();
            this.paintStatus(0);
        }
    }
    async replayServer() {
        await this.getActions();
        this.startReplaying();
    }
    startRecording() {
        if (this.replaying)
            return;
        const ownUISelector = getElementSelector(this.el);
        this.actionsEl.open = false;
        this.formEl.classList.add('hidden');
        this.actions.splice(0);
        this.skipped = 0;
        this.dirtyActions = true;
        this.unsavedActions = true;
        handler.recording = true;
        this.paintControls();
        this.paintStatus(0);
        let prev;
        handler.onaction = (action) => {
            if (action.selectors.includes(ownUISelector))
                return false;
            if (!this.eventTypes.includes(action.event.type)
                || !this.enabledGroups.includes(allEvents.find(([, events]) => events.includes(action.event.type))[0])) {
                this.skipped++;
            }
            else {
                if (!prev
                    || action.event.timeStamp !== prev.event.timeStamp
                    || action.event.type !== prev.event.type
                    || action.selectors.join(':::') !== prev.selectors.join(':::')
                    || JSON.stringify(action.event) !== JSON.stringify(prev.event)) {
                    this.actions.push(prev = action);
                }
            }
            this.paintStatus(0);
        };
    }
    stopRecording() {
        if (this.replaying)
            return;
        handler.recording = false;
        if (this.dirtyActions) {
            this.formEl.classList.remove('hidden');
            this.trimActions();
            this.paintActions();
            this.paintControls();
            this.dirtyActions = false;
        }
    }
    trimActions() {
        let last = this.actions.at(-1);
        if (last?.selectors[0] === 'window'
            && last.event.type === 'pointerdown') {
            this.actions.pop();
            while (last = this.actions.at(-1)) {
                if (last.selectors[0] !== 'window'
                    || last.event.type !== 'pointermove') {
                    break;
                }
                this.actions.pop();
            }
        }
        this.paintStatus(0);
    }
    stopReplaying() {
        this.replaying = false;
        this.stopRecording();
    }
    async startReplaying(n, actions) {
        if (this.replaying)
            return;
        this.stopRecording();
        this.replaying = true;
        this.actionsEl.open = false;
        this.formEl.classList.add('hidden');
        this.pointerEl.classList.remove('hidden');
        this.paintControls();
        actions ??= this.actions;
        const play = async () => {
            console.log('start of replay');
            console.time('replay time');
            this.statusEl.textContent = `${actions.length} remaining`;
            let prevAction;
            const replayOne = (action) => {
                const ctor = EventConstructorsMap[action.event.is];
                if (!ctor) {
                    console.warn('Missing Event constructor for: ' + action.event.is);
                    return;
                }
                const dispatchOptions = pick(action.event, mutable(dispatchProps));
                const event = Object.defineProperties(new ctor(action.event.type, { view: window, ...dispatchOptions }), copyEvent(action.event));
                requestAnimationFrame(() => {
                    this.pointerEl.style.left = event.pageX + 'px';
                    this.pointerEl.style.top = event.pageY + 'px';
                });
                if (action.selectors) {
                    const el = selectorsToNode(action.selectors);
                    if (el) {
                        el.dispatchEvent(event);
                    }
                    else {
                        console.warn('Missing node for selectors:', action.selectors);
                    }
                }
            };
            if (n == null) {
                this.skipped = 0;
                this.replayed = 0;
                actions: for (const [i, action] of actions.entries()) {
                    if (!this.replaying)
                        break;
                    if (prevAction) {
                        const dt = action.event.timeStamp - prevAction.event.timeStamp;
                        // if next event is bigger than 2/3 of a frame then wait
                        if (dt > FRAME_TIME * (2 / 3)) {
                            // if less than 2+(1/2) frames, wait one frame
                            if (dt < FRAME_TIME * (2 + (1 / 2))) {
                                await new Promise((resolve) => requestAnimationFrame(resolve));
                            }
                            else {
                                // wait until its time minus 1.5ms for our init time
                                await new Promise((resolve) => setTimeout(resolve, dt - 1.5));
                            }
                        }
                    }
                    // this selector is window and tangent event is the same event,
                    // then it's a .capture so we skip and let it propagate normally.
                    const nextAction = actions.at(i + 1);
                    for (const tangentAction of action.event.capture ? [nextAction] : [prevAction]) {
                        if (tangentAction?.event.type === action.event.type
                            && tangentAction.event.timeStamp === action.event.timeStamp) {
                            this.skipped++;
                            requestAnimationFrame(() => {
                                this.actionsEl.querySelector(`#action${i}`)?.classList.add('recorder-ui-event-skipped');
                                this.paintStatus(1);
                            });
                            continue actions;
                        }
                    }
                    replayOne(action);
                    prevAction = action;
                    this.replayed++;
                    this.paintStatus(1);
                }
            }
            else {
                replayOne(actions[n]);
            }
            console.log('end of replay');
            console.timeEnd('replay time');
        };
        do {
            await play();
        } while (this.replaying && localStorage.recorderLoop === 'true');
        this.replaying = false;
        this.formEl.classList.remove('hidden');
        this.pointerEl.classList.add('hidden');
        this.paintControls();
    }
}

window.recorder = new DOMRecorder();
document.body.appendChild(window.recorder.el);
const button = Object.assign(document.createElement('button'), { textContent: 'click me' });
const circle = document.createElement('div');
const textarea = Object.assign(document.createElement('textarea'), { rows: 10, spellcheck: false, value: 'click record & type in here\n' });
let val = 0;
function onclick() {
    button.textContent = `clicks: ${val++}`;
}
function onkeydown(ev) {
    ev.preventDefault();
    textarea.value += ev.key;
}
function onpointermove(ev) {
    requestAnimationFrame(() => {
        circle.style.cssText = /*css*/ `
      position: absolute;
      left: ${ev.pageX + 5}px;
      top: ${ev.pageY + 15}px;
      width: 30px;
      height: 30px;
      background: pink;
      border-radius: 100%;
    `;
    });
}
button.addEventListener('click', onclick);
textarea.addEventListener('keydown', onkeydown);
window.addEventListener('pointermove', onpointermove);
document.body.appendChild(textarea);
document.body.appendChild(button);
document.body.appendChild(circle);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLmpzIiwic291cmNlcyI6WyIuLi9waWNrLW9taXQvc3JjL3BpY2stb21pdC50cyIsIi4uL3RvLWZsdWVudC9zcmMvdG8tZmx1ZW50LnRzIiwiLi4vLi4vLi4vLmZhc3RwbS8tL2V2ZW50ZW1pdHRlci1zdHJpY3RAMS4wLjEvbGliL2luZGV4LmpzIiwiLi4vLi4vLi4vLmZhc3RwbS8tL3BpY2stb21pdEAyLjAuMS9zcmMvcGljay1vbWl0LnRzIiwiLi4vZXZlcnlkYXktdXRpbHMvc3JjL2V2ZXJ5ZGF5LXV0aWxzLnRzIiwic3JjL2RvbS1yZWNvcmRlci50cyIsImV4YW1wbGUvd2ViLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vbk51bGwsIE9iamVjdEZyb21MaXN0IH0gZnJvbSAnZXZlcnlkYXktdHlwZXMnXG5cbmV4cG9ydCB0eXBlIE9iamVjdEZpbHRlckZuID0gKGVudHJ5OiBbc3RyaW5nLCB1bmtub3duXSkgPT4gYm9vbGVhblxuXG4vKipcbiAqIEZpbHRlciBvYmplY3Qgd2l0aCBmaWx0ZXIgZnVuY3Rpb24gYGZuYC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBmaWx0ZXIuXG4gKiBAcGFyYW0gZm4gRmlsdGVyIGZ1bmN0aW9uIHJlY2VpdmluZyBba2V5LCB2YWx1ZV0uXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3QgZmlsdGVyZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBmaWx0ZXIgPSA8VD4ob2JqOiBULCBmbjogT2JqZWN0RmlsdGVyRm4pOiBQYXJ0aWFsPFQ+ID0+XG4gIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcihmbilcbiAgKSBhcyBQYXJ0aWFsPFQ+XG5cbi8qKlxuICogRmlsdGVyIG91dCBudWxsaXNoIHZhbHVlcyBmcm9tIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBmaWx0ZXIuXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aG91dCB0aGUgbnVsbCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBub25OdWxsID0gPFQ+KG9iajogVCk6IFBpY2s8VCwga2V5b2YgTm9uTnVsbDxUPj4gPT5cbiAgZmlsdGVyKG9iaiwgKFssIHZhbHVlXSkgPT4gdmFsdWUgIT0gbnVsbCkgYXMgUGljazxULCBrZXlvZiBOb25OdWxsPFQ+PlxuXG4vKipcbiAqIFBpY2sgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdCBpbnRvIGEgbmV3IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBwaWNrIGZyb20uXG4gKiBAcGFyYW0gcHJvcHMgUHJvcGVydGllcyB0byBwaWNrLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggdGhlIHBpY2tlZCBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgY29uc3QgcGljayA9IDxULCBLIGV4dGVuZHMgKGtleW9mIFQpW10+KG9iajogVCwgcHJvcHM6IEspOiBQaWNrPFQsIGtleW9mIE9iamVjdEZyb21MaXN0PEs+PiA9PlxuICBwcm9wcy5yZWR1Y2UoKHAsIG4pID0+IHtcbiAgICBpZiAobiBpbiBvYmopIHBbbl0gPSBvYmpbbl1cbiAgICByZXR1cm4gcFxuICB9LCB7fSBhcyBhbnkpIGFzIFBpY2s8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG9iamVjdCB3aXRoIGNlcnRhaW4gcHJvcGVydGllcyBvbWl0dGVkLlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIG9taXQgZnJvbS5cbiAqIEBwYXJhbSBwcm9wcyBQcm9wZXJ0aWVzIHRvIG9taXQuXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydGllcyBvbWl0dGVkLlxuICovXG5leHBvcnQgY29uc3Qgb21pdCA9IDxULCBLIGV4dGVuZHMgKGtleW9mIFQpW10+KG9iajogVCwgcHJvcHM6IEspOiBPbWl0PFQsIGtleW9mIE9iamVjdEZyb21MaXN0PEs+PiA9PlxuICBmaWx0ZXIob2JqLCBpbmNsdWRlc0tleShwcm9wcywgdHJ1ZSkpIGFzIE9taXQ8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IGluY2x1ZGVzS2V5ID0gPEsgZXh0ZW5kcyB1bmtub3duW10+KHByb3BzOiBLLCBpbnZlcnQgPSBmYWxzZSk6IE9iamVjdEZpbHRlckZuID0+XG4gIChba2V5XSkgPT4gKChpbnZlcnQgYXMgYW55KSBeIChwcm9wcy5pbmNsdWRlcyhrZXkpIGFzIGFueSkpIGFzIHVua25vd24gYXMgYm9vbGVhblxuIiwiaW1wb3J0IHsgb21pdCB9IGZyb20gJ3BpY2stb21pdCdcblxuaW1wb3J0IHR5cGUgeyBDbGFzcywgRm4gfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgRmx1ZW50PEMsIFQ+ID1cbiAgJiBDXG4gICYge1xuICAgIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBib29sZWFuID8gRmx1ZW50PEMsIFQ+XG4gICAgOiBGbjxbVFtLXV0sIEZsdWVudDxDLCBUPj5cbiAgfVxuICAmIHtcbiAgICBub3Q6IHtcbiAgICAgIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBib29sZWFuID8gRmx1ZW50PEMsIFQ+XG4gICAgICA6IG5ldmVyXG4gICAgfVxuICB9XG5cbmV4cG9ydCBjb25zdCBib29sID0gU3ltYm9sLmZvcigndG8tZmx1ZW50LWJvb2wnKSBhcyB1bmtub3duIGFzIGJvb2xlYW5cblxuLyoqXG4gKiBDb252ZXJ0IGEgZnVuY3Rpb24gd2l0aCBhIHNldHRpbmdzIG9iamVjdCB0byBmbHVlbnQgQVBJLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyB0b0ZsdWVudCwgYm9vbCB9IGZyb20gJ3RvLWZsdWVudCdcbiAqXG4gKiBjb25zdCBjYiA9IHRvRmx1ZW50KFxuICogICBjbGFzcyB7XG4gKiAgICAgZm9vID0gYm9vbCAvLyBpbmRpY2F0ZSBib29sZWFuIGJ1dCBpbml0aWFsbHkgb21pdHRlZFxuICogICAgIGJhcj86IHN0cmluZyAvLyBvcHRpb25hbFxuICogICAgIHpvbyA9IDEyMyAvLyBhIGRlZmF1bHRcbiAqICAgfSxcbiAqICAgc2V0dGluZ3MgPT4gKCkgPT4gc2V0dGluZ3NcbiAqIClcbiAqXG4gKiBleHBlY3QoY2IoKSkudG9FcXVhbCh7IHpvbzogMTIzIH0pXG4gKiBleHBlY3QoY2IuZm9vKCkpLnRvRXF1YWwoeyBmb286IHRydWUsIHpvbzogMTIzIH0pXG4gKiBleHBlY3QoY2Iubm90LmZvbygpKS50b0VxdWFsKHsgZm9vOiBmYWxzZSwgem9vOiAxMjMgfSlcbiAqIGV4cGVjdChjYi5iYXIoJ2hlbGxvJykoKSkudG9FcXVhbCh7IGJhcjogJ2hlbGxvJywgem9vOiAxMzIgfSlcbiAqIGV4cGVjdChjYi5mb28uYmFyKCdoZWxsbycpLnpvbyg0NTYpKCkpXG4gKiAgIC50b0VxdWFsKHsgZm9vOiB0cnVlLCBiYXI6ICdoZWxsbycsIHpvbzogNDU2IH0pXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHRvRmx1ZW50ID0gPFxuICBUIGV4dGVuZHMgQ2xhc3M8YW55PixcbiAgQyBleHRlbmRzIEZuPGFueSwgYW55PixcbiAgUyBleHRlbmRzIEluc3RhbmNlVHlwZTxUPixcbj4oXG4gIFNjaGVtYTogVCxcbiAgY2I6IChzZXR0aW5nczogUykgPT4gQyxcbikgPT4ge1xuICBjb25zdCBib29scyA9IE9iamVjdC5lbnRyaWVzKG5ldyBTY2hlbWEoKSkuZmlsdGVyKChbLCB4XSkgPT4geCA9PT0gYm9vbCB8fCB0eXBlb2YgeCA9PT0gJ2Jvb2xlYW4nKVxuICBjb25zdCBmbGFncyA9IGJvb2xzLm1hcCgoW2tleV0pID0+IGtleSlcbiAgY29uc3Qgb21pdHRlZCA9IGJvb2xzLmZpbHRlcigoWywgeF0pID0+IHggPT09IGJvb2wpLm1hcCgoW2tleV0pID0+IGtleSlcblxuICBjb25zdCBzZXR0aW5ncyA9IG9taXQobmV3IFNjaGVtYSgpLCBvbWl0dGVkKSBhcyBTXG5cbiAgbGV0IG5vdCA9IGZhbHNlXG5cbiAgY29uc3QgYmluZCA9IChzZXR0aW5nczogUyk6IEZsdWVudDxDLCBSZXF1aXJlZDxTPj4gPT5cbiAgICBuZXcgUHJveHkoY2IsIHtcbiAgICAgIGdldChfLCBrZXk6IHN0cmluZywgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ25vdCcpIHtcbiAgICAgICAgICBub3QgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIHJlY2VpdmVyXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZ3MuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gbm90ID8gZmFsc2UgOiB0cnVlXG4gICAgICAgICAgbm90ID0gZmFsc2VcbiAgICAgICAgICByZXR1cm4gYmluZCh7IC4uLnNldHRpbmdzLCBba2V5XTogdmFsdWUgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kKHsgLi4uc2V0dGluZ3MsIFtrZXldOiB2YWx1ZSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnN0cnVjdChfLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjYi5jYWxsKHNlbGYsIHsgLi4uc2V0dGluZ3MgfSkgYXMgYW55XG4gICAgICAgIHJldHVybiBuZXcgY3RvciguLi5hcmdzKVxuICAgICAgfSxcbiAgICAgIGFwcGx5OiAoXywgc2VsZiwgYXJncykgPT4gY2IuY2FsbChzZWxmLCB7IC4uLnNldHRpbmdzIH0pLmFwcGx5KHNlbGYsIGFyZ3MpLFxuICAgIH0pIGFzIEZsdWVudDxDLCBSZXF1aXJlZDxTPj5cblxuICByZXR1cm4gYmluZChzZXR0aW5ncylcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEEgRXZlbnRFbWl0dGVyIHdvcmsgbGlrZSBub2RlL2V2ZW50XHJcbiAqL1xyXG52YXIgRXZlbnRFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgRXZlbnQgdG8gYWxsIGxpc3RlbmVyXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBhcmdzIGFyZ3VtZW50c1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jYWxsYmFjay5hcHBseShpdGVtLCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm9uY2UgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgaXRlbS5jYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSBFdmVudCBOYW1lXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgRXZlbnQgQ2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBjYWxsYmFjazogY2FsbGJhY2sgfSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBFdmVudCBDYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uY2FsbGJhY2sgPT09IGNhbGxiYWNrOyB9KTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaWtlIG9uIGJ1dCBqdXN0IHJ1biBvbmNlXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBFdmVudCBDYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub24oZXZlbnROYW1lLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEV2ZW50RW1pdHRlci5vbmNlU3ltYm9sID0gU3ltYm9sKCdvbmNlJyk7XHJcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcclxuIiwiaW1wb3J0IHsgTm9uTnVsbCwgT2JqZWN0RnJvbUxpc3QgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgT2JqZWN0RmlsdGVyRm4gPSAoZW50cnk6IFtzdHJpbmcsIHVua25vd25dKSA9PiBib29sZWFuXG5cbi8qKlxuICogRmlsdGVyIG9iamVjdCB3aXRoIGZpbHRlciBmdW5jdGlvbiBgZm5gLlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIGZpbHRlci5cbiAqIEBwYXJhbSBmbiBGaWx0ZXIgZnVuY3Rpb24gcmVjZWl2aW5nIFtrZXksIHZhbHVlXS5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCBmaWx0ZXJlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGZpbHRlciA9IDxUPihvYmo6IFQsIGZuOiBPYmplY3RGaWx0ZXJGbik6IFBhcnRpYWw8VD4gPT5cbiAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKGZuKVxuICApIGFzIFBhcnRpYWw8VD5cblxuLyoqXG4gKiBGaWx0ZXIgb3V0IG51bGxpc2ggdmFsdWVzIGZyb20gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIGZpbHRlci5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRob3V0IHRoZSBudWxsIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vbk51bGwgPSA8VD4ob2JqOiBUKTogUGljazxULCBrZXlvZiBOb25OdWxsPFQ+PiA9PlxuICBmaWx0ZXIob2JqLCAoWywgdmFsdWVdKSA9PiB2YWx1ZSAhPSBudWxsKSBhcyBQaWNrPFQsIGtleW9mIE5vbk51bGw8VD4+XG5cbi8qKlxuICogUGljayBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0IGludG8gYSBuZXcgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIHBpY2sgZnJvbS5cbiAqIEBwYXJhbSBwcm9wcyBQcm9wZXJ0aWVzIHRvIHBpY2suXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aCB0aGUgcGlja2VkIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBwaWNrID0gPFQsIEsgZXh0ZW5kcyAoa2V5b2YgVClbXT4ob2JqOiBULCBwcm9wczogSyk6IFBpY2s8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+ID0+XG4gIHByb3BzLnJlZHVjZSgocCwgbikgPT4ge1xuICAgIGlmIChuIGluIG9iaikgcFtuXSA9IG9ialtuXVxuICAgIHJldHVybiBwXG4gIH0sIHt9IGFzIGFueSkgYXMgUGljazxULCBrZXlvZiBPYmplY3RGcm9tTGlzdDxLPj5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgb2JqZWN0IHdpdGggY2VydGFpbiBwcm9wZXJ0aWVzIG9taXR0ZWQuXG4gKlxuICogQHBhcmFtIG9iaiBPYmplY3QgdG8gb21pdCBmcm9tLlxuICogQHBhcmFtIHByb3BzIFByb3BlcnRpZXMgdG8gb21pdC5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIG9taXR0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBvbWl0ID0gPFQsIEsgZXh0ZW5kcyAoa2V5b2YgVClbXT4ob2JqOiBULCBwcm9wczogSyk6IE9taXQ8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+ID0+XG4gIGZpbHRlcihvYmosIGluY2x1ZGVzS2V5KHByb3BzLCB0cnVlKSkgYXMgT21pdDxULCBrZXlvZiBPYmplY3RGcm9tTGlzdDxLPj5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgaW5jbHVkZXNLZXkgPSA8SyBleHRlbmRzIHVua25vd25bXT4ocHJvcHM6IEssIGludmVydCA9IGZhbHNlKTogT2JqZWN0RmlsdGVyRm4gPT5cbiAgKFtrZXldKSA9PiAoKGludmVydCBhcyBhbnkpIF4gKHByb3BzLmluY2x1ZGVzKGtleSkgYXMgYW55KSkgYXMgdW5rbm93biBhcyBib29sZWFuXG4iLCJpbXBvcnQgeyBib29sLCB0b0ZsdWVudCB9IGZyb20gJ3RvLWZsdWVudCdcblxuZXhwb3J0ICogZnJvbSAndG8tZmx1ZW50J1xuZXhwb3J0ICogZnJvbSAnZXZlbnRlbWl0dGVyLXN0cmljdCdcbmV4cG9ydCAqIGZyb20gJ2RlZXAtbXV0YXRlLW9iamVjdCdcbmV4cG9ydCAqIGZyb20gJ3BpY2stb21pdCdcbmV4cG9ydCB7IGRlZmF1bHQgYXMgaXNFcXVhbCB9IGZyb20gJy4vaXMtZXF1YWwnXG5cbmltcG9ydCB0eXBlIHsgQ2h1bmssIENsYXNzLCBGbiwgU3RyaW5nT2YgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IGNvbnN0IGNodW5rID0gPFQsIEwgZXh0ZW5kcyBudW1iZXI+KGFycjogVFtdLCBzaXplOiBMKTogQ2h1bms8VCwgTD5bXSA9PiB7XG4gIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLmNlaWwoYXJyLmxlbmd0aCAvIHNpemUpIHwgMCB9LCAoXywgaSkgPT4ge1xuICAgIGNvbnN0IHBvczogbnVtYmVyID0gaSAqIHNpemVcbiAgICByZXR1cm4gYXJyLnNsaWNlKHBvcywgcG9zICsgc2l6ZSlcbiAgfSkgYXMgQ2h1bms8VCwgTD5bXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW50cmllczxLIGV4dGVuZHMga2V5b2YgVCxcbiAgViBleHRlbmRzIFRbS10sXG4gIFQgZXh0ZW5kcyB7IFtzOiBzdHJpbmddOiBhbnkgfT4ob2JqOiBUKTogcmVhZG9ubHkgW0ssIFZdW11cbmV4cG9ydCBmdW5jdGlvbiBlbnRyaWVzPEsgZXh0ZW5kcyBrZXlvZiBULFxuICBWIGV4dGVuZHMgVFtLXSxcbiAgVCBleHRlbmRzIEFycmF5TGlrZTxhbnk+PihvYmo6IFQpOiByZWFkb25seSBbSywgVl1bXVxuZXhwb3J0IGZ1bmN0aW9uIGVudHJpZXM8SyBleHRlbmRzIGtleW9mIFQsXG4gIFYgZXh0ZW5kcyBUW0tdLFxuICBUIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0gfCBBcnJheUxpa2U8YW55Pj4ob2JqOiBUKTogcmVhZG9ubHkgW0ssIFZdW10ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKSBhcyB1bmtub3duIGFzIHJlYWRvbmx5IFtLLCBWXVtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBrZXlzPEsgZXh0ZW5kcyBrZXlvZiBULFxuICBUIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0+KG9iajogVCk6IHJlYWRvbmx5IEtbXVxuZXhwb3J0IGZ1bmN0aW9uIGtleXM8SyBleHRlbmRzIGtleW9mIFQsXG4gIFQgZXh0ZW5kcyBBcnJheUxpa2U8YW55Pj4ob2JqOiBUKTogcmVhZG9ubHkgS1tdXG5leHBvcnQgZnVuY3Rpb24ga2V5czxLIGV4dGVuZHMga2V5b2YgVCxcbiAgVCBleHRlbmRzIHsgW3M6IHN0cmluZ106IGFueSB9IHwgQXJyYXlMaWtlPGFueT4+KG9iajogVCk6IHJlYWRvbmx5IEtbXSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopIGFzIHVua25vd24gYXMgcmVhZG9ubHkgS1tdXG59XG5cbmV4cG9ydCBjb25zdCBmcm9tRW50cmllcyA9IDxLIGV4dGVuZHMgc3RyaW5nLCBWPihlbnRyaWVzOiByZWFkb25seSBbSywgVl1bXSkgPT5cbiAgT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMpIGFzIFJlY29yZDxLLCBWPlxuXG5leHBvcnQgY29uc3QgY2hlYXBSYW5kb21JZCA9ICgpID0+IGAke1N0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBNYXRoLnJhbmRvbSgpICogMjUpfSR7KE1hdGgucmFuZG9tKCkgKiAxMGU3IHwgMCkudG9TdHJpbmcoMzYpfWBcblxuZXhwb3J0IGNvbnN0IGFjY2Vzc29ycyA9IDxTIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0sIFQ+KFxuICB0YXJnZXQ6IFQsXG4gIHNvdXJjZTogUyxcbiAgZm46IChrZXk6IFN0cmluZ09mPGtleW9mIFM+LCB2YWx1ZTogU1tTdHJpbmdPZjxrZXlvZiBTPl0pID0+IFByb3BlcnR5RGVzY3JpcHRvcixcbiAgZmlsdGVyOiAoa2V5OiBTdHJpbmdPZjxrZXlvZiBTPiwgdmFsdWU6IFNbU3RyaW5nT2Y8a2V5b2YgUz5dKSA9PiBib29sZWFuID0gKCkgPT4gdHJ1ZSxcbikgPT4ge1xuICBjb25zdCBwcmV2RGVzYyA9IG5ldyBNYXAoKVxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhcbiAgICB0YXJnZXQsXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgKGVudHJpZXMoc291cmNlKVxuICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIGFzIFtcbiAgICAgICAgICBTdHJpbmdPZjxrZXlvZiBTPixcbiAgICAgICAgICBTW1N0cmluZ09mPGtleW9mIFM+XSxcbiAgICAgICAgXVtdKVxuICAgICAgICAuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+IGZpbHRlcihrZXksIHZhbHVlKSlcbiAgICAgICAgLm1hcChcbiAgICAgICAgICAoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gZm4oa2V5LCB2YWx1ZSkgYXMgYW55XG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSlcbiAgICAgICAgICAgIHByZXZEZXNjLnNldChrZXksIHByZXYpXG4gICAgICAgICAgICBpZiAocHJldiAmJiBwcmV2LmdldCAmJiBwcmV2LnNldCkge1xuICAgICAgICAgICAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBuZXh0XG4gICAgICAgICAgICAgIG5leHQuZ2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJ1biBib3RoIGdldHRlcnMgaWYgYW55LCBmb3Igc2lkZS1lZmZlY3RzIHRvIHJ1blxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIHJldmlzaXRlZCwgd2hhdCBzaG91bGQgYmVcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29ycmVjdCBiZWhhdmlvciBoZXJlPyBtYXliZSBwYXNzIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgIC8vIGdldHRlciBhcyBhIHBhcmFtIHRvIHRoZSBuZXh0IG9uZSBhbmQgbGV0IHRoZW0gZGVjaWRlP1xuICAgICAgICAgICAgICAgIC8vIHdoYXQgc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGJlaGF2aW9yPyB0aGlzIHNlZW1zIHdyb25nXG4gICAgICAgICAgICAgICAgLy8gYnV0IGl0IHdvcmtzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IGdldD8uKClcbiAgICAgICAgICAgICAgICBjb25zdCBiZWxvdyA9IHByZXYuZ2V0ISgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJlbG93ID8/IHRvcFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5leHQuc2V0ID0gKHY6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHByZXYuc2V0Py4odilcbiAgICAgICAgICAgICAgICBzZXQocHJldi5nZXQ/LigpID8/IHYpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIT8gJ2NyZWF0ZSBhY2Nlc3NvcicsIGtleSwgcHJldiwgbmV4dFxuICAgICAgICAgICAgcmV0dXJuIFtrZXksIHtcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAuLi5uZXh0LFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICApXG4gIClcbiAgcmV0dXJuICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGRlc2NdIG9mIHByZXZEZXNjKSB7XG4gICAgICAvLyE/ICdyZW1vdmluZyBhY2Nlc3NvcicsIGtleSwgZGVzY1xuICAgICAgaWYgKGRlc2MgPT0gbnVsbCkge1xuICAgICAgICBkZWxldGUgKHRhcmdldCBhcyBhbnkpW2tleV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnN0IG5ld1ZhbHVlID0gKHRhcmdldCBhcyBhbnkpW2tleV1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjKVxuICAgICAgICAvLyA7KHRhcmdldCBhcyBhbnkpW2tleV0gPSBuZXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qga2ViYWIgPSAoczogc3RyaW5nKSA9PiBzLnJlcGxhY2UoL1thLXpdKD89W0EtWl0pfFtBLVpdKyg/PVtBLVpdW2Etel0pL2csICckJi0nKS50b0xvd2VyQ2FzZSgpXG5cbmV4cG9ydCBjb25zdCBzdHlsZVRvQ3NzID0gKHN0eWxlOiBDU1NTdHlsZURlY2xhcmF0aW9uKSA9PiB7XG4gIGxldCBjc3MgPSAnJ1xuICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZSlcbiAgICBjc3MgKz0gc3R5bGVba2V5XVxuICAgICAgPyBrZWJhYihrZXkpICsgJzonICsgc3R5bGVba2V5XSArICc7J1xuICAgICAgOiAnJ1xuICByZXR1cm4gY3NzXG59XG5cbmV4cG9ydCBjb25zdCBzaHVmZmxlID0gPFQ+KGFycjogVFtdKTogVFtdID0+IGFyci5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpXG5cbmV4cG9ydCBjb25zdCBhc3luY1NlcmlhbE1hcCA9IGFzeW5jIDxULCBVPihcbiAgYXJyOiBUW10sXG4gIGZuOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiBUW10pID0+IFByb21pc2U8VT4sXG4pOiBQcm9taXNlPFVbXT4gPT4ge1xuICBjb25zdCByZXN1bHRzOiBVW10gPSBbXVxuICBmb3IgKGNvbnN0IFtpLCBpdGVtXSBvZiBhcnIuZW50cmllcygpKSB7XG4gICAgcmVzdWx0cy5wdXNoKGF3YWl0IGZuKGl0ZW0sIGksIGFycikpXG4gIH1cbiAgcmV0dXJuIHJlc3VsdHNcbn1cblxuZXhwb3J0IGNvbnN0IGFzeW5jU2VyaWFsUmVkdWNlID0gYXN5bmMgPFQsIFU+KFxuICBhcnI6IFRbXSxcbiAgZm46IChwcmV2OiBVLCBuZXh0OiBULCBpbmRleDogbnVtYmVyLCBhcnI6IFRbXSkgPT4gUHJvbWlzZTxVPixcbiAgcHJldjogVSxcbik6IFByb21pc2U8VT4gPT4ge1xuICBmb3IgKGNvbnN0IFtpLCBpdGVtXSBvZiBhcnIuZW50cmllcygpKSB7XG4gICAgcHJldiA9IGF3YWl0IGZuKHByZXYsIGl0ZW0sIGksIGFycilcbiAgfVxuICByZXR1cm4gcHJldlxufVxuXG5leHBvcnQgY29uc3Qgd2FpdCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxuXG5leHBvcnQgY29uc3QgdGljayA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5cbmV4cG9ydCBjb25zdCBjb2xvckhhc2ggPSAoc3RyaW5nOiBzdHJpbmcsIG1pbkNvbG9ySGV4ID0gJzg4OCcpID0+IHtcbiAgY29uc3QgbWluQ29sb3IgPSBwYXJzZUludChtaW5Db2xvckhleCwgMTYpXG5cbiAgY29uc3QgY29sb3IgPSAoXG4gICAgKFxuICAgICAgKHN0cmluZy5zcGxpdCgnJykucmVkdWNlKFxuICAgICAgICAocCwgbikgPT4gcCArIChuLmNoYXJDb2RlQXQoMCkgPDwgNSksXG4gICAgICAgIDBcbiAgICAgICkgfCAwKSAlICg0MDk2IC0gbWluQ29sb3IpXG4gICAgKSArIG1pbkNvbG9yXG4gICkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDMsICcwJylcblxuICByZXR1cm4gY29sb3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbG9yT2YoaWQ6IHN0cmluZywgc2F0ID0gMTAwLCBsdW0gPSA2NSkge1xuICByZXR1cm4gYGhzbCgkeyhNYXRoLnJvdW5kKHBhcnNlSW50KGlkLCAzNikgLyAyNSkgKiAyNSkgJSAzNjB9LCAke3NhdH0lLCAke2x1bX0lKWBcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZUZyb21BcnJheSA9IDxUPihhcnI6IFRbXSwgZWw6IFQsIHF1aWV0ID0gZmFsc2UpOiBUW10gfCB2b2lkID0+IHtcbiAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihlbClcbiAgaWYgKCF+aW5kZXgpIHtcbiAgICBpZiAocXVpZXQpIHJldHVyblxuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignSXRlbSB0byBiZSByZW1vdmVkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBhcnJheS4nKVxuICB9XG4gIHJldHVybiBhcnIuc3BsaWNlKGluZGV4LCAxKVxufVxuXG5leHBvcnQgY29uc3QgY2hhaW5TeW5jID0gKC4uLmFyZ3M6ICgoKSA9PiBhbnkpW10pID0+ICgoKSA9PiB7XG4gIGZvciAoY29uc3QgZm4gb2YgYXJncykgZm4oKVxufSlcblxuZXhwb3J0IGNvbnN0IHNoYWxsb3dFcXVhbCA9IChhOiBvYmplY3QsIGI6IG9iamVjdCkgPT5cbiAgW1thLCBiXSwgW2IsIGFdXS5ldmVyeSgoW2EsIGJdKSA9PiBlbnRyaWVzKGEpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IGtleSBpbiBiICYmIGJba2V5XSA9PSB2YWx1ZSkpXG5cbmV4cG9ydCBjb25zdCBnZXRPd25Qcm9wZXJ0eSA9IChvYmplY3Q6IG9iamVjdCwgbmFtZTogc3RyaW5nKSA9PiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgbmFtZSk/LnZhbHVlXG5cbmV4cG9ydCBjb25zdCBwYWRDZW50ZXIgPSAoc3RyOiBzdHJpbmcgfCBudW1iZXIsIGxlbmd0aDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHN0ckxlbmd0aCA9IGdldFN0cmluZ0xlbmd0aChzdHIpXG4gIGNvbnN0IHBhZExlbmd0aCA9IE1hdGguZmxvb3IoKGxlbmd0aCAtIHN0ckxlbmd0aCkgLyAyKVxuICByZXR1cm4gcmVwZWF0U3RyaW5nKCcgJywgbGVuZ3RoIC0gc3RyTGVuZ3RoIC0gcGFkTGVuZ3RoKSArIHN0clxuICAgICsgcmVwZWF0U3RyaW5nKCcgJywgcGFkTGVuZ3RoKVxufVxuXG5leHBvcnQgY29uc3QgZ2V0U3RyaW5nTGVuZ3RoID0gKHN0cjogc3RyaW5nIHwgbnVtYmVyKSA9PiBzdHJpcEFuc2koc3RyKS5sZW5ndGhcblxuZXhwb3J0IGNvbnN0IHBhZFN0YXJ0ID0gKHN0cjogc3RyaW5nIHwgbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgY2hhciA9ICcgJykgPT4ge1xuICBjb25zdCBzdHJMZW5ndGggPSBnZXRTdHJpbmdMZW5ndGgoc3RyKVxuICByZXR1cm4gcmVwZWF0U3RyaW5nKGNoYXIsIGxlbmd0aCAtIHN0ckxlbmd0aCkgKyBzdHJcbn1cblxuZXhwb3J0IGNvbnN0IHJlcGVhdFN0cmluZyA9IChzOiBzdHJpbmcsIHg6IG51bWJlcikgPT4gcy5yZXBlYXQoTWF0aC5tYXgoMCwgeCkpXG5cbi8vIGNvbnN0IHBhZEVuZCA9IChzdHI6IHN0cmluZywgbGVuZ3RoOiBudW1iZXIpID0+IHtcbi8vICAgY29uc3QgYW5zaUxlbmd0aCA9IHN0cmlwQW5zaShzdHIpLmxlbmd0aFxuLy8gICByZXR1cm4gc3RyICsgJyAnLnJlcGVhdChNYXRoLm1heCgwLCBsZW5ndGggLSBhbnNpTGVuZ3RoKSlcbi8vIH1cblxuZXhwb3J0IGNvbnN0IHN0cmlwQW5zaSA9IChzdHI6IHN0cmluZyB8IG51bWJlcikgPT5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgc3RyLnRvU3RyaW5nKCkucmVwbGFjZSgvXFx1MDAxYlxcW1xcZCttL2csICcnKVxuXG5leHBvcnQgY29uc3QgaW5jbHVkZXNBbnkgPSAoc3RyOiBzdHJpbmcsIHByZWRpY2F0ZXM6IHN0cmluZ1tdKSA9PiBwcmVkaWNhdGVzLnNvbWUocCA9PiBzdHIuaW5jbHVkZXMocCkpXG5cbmV4cG9ydCBjb25zdCBhc3luY0ZpbHRlciA9IGFzeW5jIDxUPihcbiAgYXJyYXk6IFRbXSxcbiAgZm46IChpdGVtOiBUKSA9PiBQcm9taXNlPGJvb2xlYW4+LFxuKSA9PlxuICAoYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgYXJyYXkubWFwKGFzeW5jIHggPT4gW3gsIGF3YWl0IGZuKHgpXSBhcyBjb25zdClcbiAgKSkuZmlsdGVyKChbLCB0cnV0aF0pID0+IHRydXRoKS5tYXAoKFt4XSkgPT4geClcblxuZXhwb3J0IGNvbnN0IGRlZmluZVByb3BlcnR5ID0gdG9GbHVlbnQoXG4gIGNsYXNzIHtcbiAgICBjb25maWd1cmFibGUgPSBmYWxzZVxuICAgIGVudW1lcmFibGUgPSBmYWxzZVxuICAgIHdyaXRhYmxlID0gYm9vbFxuICAgIGdldD8oKTogYW55XG4gICAgc2V0Pyh2OiBhbnkpOiB2b2lkXG4gIH0sXG4gIGRlc2NyaXB0b3IgPT5cbiAgICA8VD4ob2JqZWN0OiBvYmplY3QsIG5hbWU6IFByb3BlcnR5S2V5LCB2YWx1ZT86IFQpID0+XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgIG9iamVjdCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdmFsdWUgPT0gbnVsbCA/IGRlc2NyaXB0b3IgOiB7XG4gICAgICAgICAgLi4uZGVzY3JpcHRvcixcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfVxuICAgICAgKVxuKVxuXG5leHBvcnQgY29uc3QgZmlsdGVyTWFwID0gPFQsIFU+KFxuICBhcnJheTogVFtdIHwgcmVhZG9ubHkgVFtdLFxuICBmbjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycmF5OiBUW10gfCByZWFkb25seSBUW10pID0+IFUgfCBmYWxzZSB8IG51bGwgfCB1bmRlZmluZWQsXG4pID0+IGFycmF5Lm1hcChmbikuZmlsdGVyKHggPT4geCAhPSBudWxsICYmIHggIT09IGZhbHNlKSBhcyBVW11cblxuZXhwb3J0IGNvbnN0IHNvcnRDb21wYXJlID0gKGE6IG51bWJlciB8IHN0cmluZywgYjogbnVtYmVyIHwgc3RyaW5nKSA9PiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMFxuXG5leHBvcnQgY29uc3Qgc29ydENvbXBhcmVLZXlzID0gKFthXTogW3N0cmluZywgYW55XSwgW2JdOiBbc3RyaW5nLCBhbnldKSA9PiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMFxuXG5leHBvcnQgY29uc3Qgc29ydE9iamVjdEluUGxhY2UgPSA8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KGRhdGE6IFQpID0+IHtcbiAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKGRhdGEpLnNvcnQoc29ydENvbXBhcmVLZXlzKVxuICApXG4gIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIGRlbGV0ZSBkYXRhW2tleV1cbiAgT2JqZWN0LmFzc2lnbihkYXRhLCBzb3J0ZWQpXG4gIHJldHVybiBkYXRhXG59XG5cbmV4cG9ydCBjb25zdCBzcGxpdEF0ID0gKHN0cmluZzogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiBbc3RyaW5nLnNsaWNlKDAsIGluZGV4KSwgc3RyaW5nLnNsaWNlKGluZGV4ICsgMSldIGFzIGNvbnN0XG5cbmV4cG9ydCBjb25zdCBtZW1vaXplID0gPFAgZXh0ZW5kcyB1bmtub3duW10sIFI+KFxuICBmbjogRm48UCwgUj4sXG4gIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4pID0+XG4gIGZ1bmN0aW9uICh0aGlzOiB1bmtub3duLCAuLi5hcmdzOiBQKTogUiB7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IGFyZ3Muam9pbigpXG4gICAgcmV0dXJuIG1hcFtzZXJpYWxpemVkXSA/PyAobWFwW3NlcmlhbGl6ZWRdID0gZm4uYXBwbHkodGhpcywgYXJncykpXG4gIH0gYXMgRm48UCwgUj5cblxuZXhwb3J0IGludGVyZmFjZSBEZWZlcnJlZDxUPiB7XG4gIGhhc1NldHRsZWQ6IGJvb2xlYW5cbiAgcHJvbWlzZTogUHJvbWlzZTxUPlxuICB3aGVuOiAoZm46ICgpID0+IHZvaWQpID0+IHZvaWRcbiAgcmVzb2x2ZTogKHZhbHVlOiBUKSA9PiB2b2lkXG4gIHJlamVjdDogKGVycm9yPzogRXJyb3IpID0+IHZvaWRcbiAgdmFsdWU/OiBUXG4gIGVycm9yPzogRXJyb3Jcbn1cblxuZXhwb3J0IGNvbnN0IERlZmVycmVkID0gPFQ+KCkgPT4ge1xuICBjb25zdCBfb253aGVuID0gKCkgPT4ge1xuICAgIGRlZmVycmVkLmhhc1NldHRsZWQgPSB0cnVlXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IGRlZmVycmVkLnJlamVjdCA9IG5vb3BcbiAgfVxuXG4gIGNvbnN0IG5vb3AgPSAoKSA9PiB7IH1cblxuICBsZXQgb253aGVuID0gbm9vcFxuXG4gIGNvbnN0IGRlZmVycmVkID0ge1xuICAgIGhhc1NldHRsZWQ6IGZhbHNlLFxuICAgIHdoZW46IGZuID0+IHtcbiAgICAgIG9ud2hlbiA9ICgpID0+IHtcbiAgICAgICAgX29ud2hlbigpXG4gICAgICAgIGZuKClcbiAgICAgIH1cbiAgICB9LFxuICB9IGFzIERlZmVycmVkPFQ+XG5cbiAgZGVmZXJyZWQucHJvbWlzZSA9IG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gYXJnID0+IHtcbiAgICAgIG9ud2hlbigpXG4gICAgICBkZWZlcnJlZC52YWx1ZSA9IGFyZ1xuICAgICAgcmVzb2x2ZShhcmcpXG4gICAgfVxuICAgIGRlZmVycmVkLnJlamVjdCA9IGVycm9yID0+IHtcbiAgICAgIG9ud2hlbigpXG4gICAgICBkZWZlcnJlZC5lcnJvciA9IGVycm9yXG4gICAgICByZWplY3QoZXJyb3IpXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBkZWZlcnJlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gS2V5ZWRDYWNoZTxULCBVIGV4dGVuZHMgdW5rbm93bltdPihnZXR0ZXI6IChrZXk6IHN0cmluZywgLi4uYXJnczogVSkgPT4gUHJvbWlzZTxUPikge1xuICBjb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBEZWZlcnJlZDxUPj4oKVxuICBhc3luYyBmdW5jdGlvbiBnZXQoa2V5OiBzdHJpbmcsIC4uLmFyZ3M6IFUpOiBQcm9taXNlPFQ+IHtcbiAgICBsZXQgZGVmZXJyZWQgPSBjYWNoZS5nZXQoa2V5KVxuICAgIGlmIChkZWZlcnJlZCA9PSBudWxsKSB7XG4gICAgICBjYWNoZS5zZXQoa2V5LCBkZWZlcnJlZCA9IERlZmVycmVkKCkpXG4gICAgICBnZXR0ZXIoa2V5LCAuLi5hcmdzKS50aGVuKGRlZmVycmVkLnJlc29sdmUpLmNhdGNoKGRlZmVycmVkLnJlc29sdmUpXG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlXG4gIH1cbiAgZ2V0LmNhY2hlID0gY2FjaGVcbiAgcmV0dXJuIGdldFxufVxuXG5leHBvcnQgdHlwZSBQcm9taXNlZDxULCBVIGV4dGVuZHMgdW5rbm93bltdID0gdW5rbm93bltdPiA9ICguLi5hcmdzOiBVKSA9PiBQcm9taXNlPFQ+XG5cbmV4cG9ydCBjb25zdCBwcm9taXNpZnkgPSAoZm46IGFueSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MsIChlcnI6IGFueSwgLi4uZGF0YTogYW55W10pID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycilcbiAgICAgICAgZWxzZSByZXNvbHZlKGRhdGEpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1hcFNldDxLLCBWPiB7XG4gICNtYXAgPSBuZXcgTWFwPEssIFNldDxWPj4oKVxuXG4gIGFkZChrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXkpKSB7XG4gICAgICBjb25zdCBzZXQgPSB0aGlzLiNtYXAuZ2V0KGtleSkhXG4gICAgICBzZXQuYWRkKHZhbHVlKVxuICAgICAgcmV0dXJuIHNldC5zaXplXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI21hcC5zZXQoa2V5LCBuZXcgU2V0KFt2YWx1ZV0pKVxuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gIH1cblxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLiNtYXAudmFsdWVzKCldLmZsYXRNYXAoKHNldCkgPT4gWy4uLnNldF0pXG4gIH1cblxuICBnZXQoa2V5OiBLKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5KVxuICB9XG5cbiAgZGVsZXRlKGtleTogSywgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleSk/LmRlbGV0ZSh2YWx1ZSkgPz8gZmFsc2VcbiAgfVxuXG4gIGhhcyhrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXkpPy5oYXModmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXNLZXkoa2V5OiBLKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5KVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5jbGVhcigpXG4gIH1cblxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLnNpemVcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2Vha01hcFNldDxLIGV4dGVuZHMgb2JqZWN0LCBWPiB7XG4gICNtYXAgPSBuZXcgV2Vha01hcDxLLCBTZXQ8Vj4+KClcblxuICBzZXQoa2V5OiBLLCB2YWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuI21hcC5oYXMoa2V5KSkge1xuICAgICAgY29uc3Qgc2V0ID0gdGhpcy4jbWFwLmdldChrZXkpIVxuICAgICAgc2V0LmFkZCh2YWx1ZSlcbiAgICAgIHJldHVybiBzZXQuc2l6ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNtYXAuc2V0KGtleSwgbmV3IFNldChbdmFsdWVdKSlcbiAgICAgIHJldHVybiAxXG4gICAgfVxuICB9XG5cbiAgZ2V0KGtleTogSykge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleSlcbiAgfVxuXG4gIGRlbGV0ZShrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXkpPy5kZWxldGUodmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5OiBLLCB2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5KT8uaGFzKHZhbHVlKSA/PyBmYWxzZVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNYXBNYXA8S0EsIEtCLCBWPiB7XG4gICNtYXAgPSBuZXcgTWFwPEtBLCBNYXA8S0IsIFY+PigpXG5cbiAgc2V0KGtleUE6IEtBLCBrZXlCOiBLQiwgdmFsdWU6IGFueSkge1xuICAgIGlmICh0aGlzLiNtYXAuaGFzKGtleUEpKSB7XG4gICAgICBjb25zdCBtYXAgPSB0aGlzLiNtYXAuZ2V0KGtleUEpIVxuICAgICAgbWFwLnNldChrZXlCLCB2YWx1ZSlcbiAgICAgIHJldHVybiBtYXAuc2l6ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNtYXAuc2V0KGtleUEsIG5ldyBNYXAoW1trZXlCLCB2YWx1ZV1dKSlcbiAgICAgIHJldHVybiAxXG4gICAgfVxuICB9XG5cbiAgZ2V0KGtleUE6IEtBLCBrZXlCOiBLQikge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleUEpPy5nZXQoa2V5QilcbiAgfVxuXG4gIGRlbGV0ZShrZXlBOiBLQSwga2V5QjogS0IpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXlBKT8uZGVsZXRlKGtleUIpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5QTogS0EsIGtleUI6IEtCKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5QSkgJiYgdGhpcy4jbWFwLmdldChrZXlBKSEuaGFzKGtleUIpXG4gIH1cblxuICBjbGVhcigpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmNsZWFyKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWFwTWFwU2V0PEtBLCBLQiwgVj4ge1xuICAjbWFwID0gbmV3IE1hcDxLQSwgTWFwU2V0PEtCLCBWPj4oKVxuXG4gIGFkZChrZXlBOiBLQSwga2V5QjogS0IsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXlBKSkge1xuICAgICAgY29uc3QgbWFwID0gdGhpcy4jbWFwLmdldChrZXlBKSFcbiAgICAgIG1hcC5hZGQoa2V5QiwgdmFsdWUpXG4gICAgICByZXR1cm4gbWFwLnNpemVcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFwID0gbmV3IE1hcFNldDxLQiwgVj4oKVxuICAgICAgbWFwLmFkZChrZXlCLCB2YWx1ZSlcbiAgICAgIHRoaXMuI21hcC5zZXQoa2V5QSwgbWFwKVxuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gIH1cblxuICBnZXQoa2V5QTogS0EsIGtleUI6IEtCKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5QSk/LmdldChrZXlCKVxuICB9XG5cbiAgZGVsZXRlKGtleUE6IEtBLCBrZXlCOiBLQiwgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleUEpPy5kZWxldGUoa2V5QiwgdmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5QTogS0EsIGtleUI6IEtCLCB2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5QSkgJiYgdGhpcy4jbWFwLmdldChrZXlBKSEuaGFzKGtleUIsIHZhbHVlKVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5jbGVhcigpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG11dGFibGUgPSA8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSkgPT4gYXJyYXkgYXMgVFtdXG5cblxuZXhwb3J0IGNsYXNzIE1hcEZhY3Rvcnk8SywgViBleHRlbmRzIG9iamVjdD4gZXh0ZW5kcyBNYXA8SywgVj4ge1xuICBnZXQoa2V5OiBLLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSkhXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHRoaXMuY3RvcihrZXksIC4uLihhcmdzLmxlbmd0aCA/IGFyZ3MgOiB0aGlzLmRlZmF1bHRBcmdzKSlcbiAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWUpXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICBjdG9yOiBDbGFzczxWPlxuXG4gIGNvbnN0cnVjdG9yKGpzb246IHsgZW50cmllczogcmVhZG9ubHkgW0ssIFZdW10sIGN0b3I6IENsYXNzPFY+IH0pXG4gIGNvbnN0cnVjdG9yKGN0b3I6IENsYXNzPFY+LCBkZWZhdWx0RGF0YT86IFBhcnRpYWw8Vj4pXG4gIGNvbnN0cnVjdG9yKFxuICAgIGN0b3JPckpzb246IENsYXNzPFY+IHwgeyBlbnRyaWVzOiByZWFkb25seSBbSywgVl1bXSwgY3RvcjogQ2xhc3M8Vj4gfSxcbiAgICBwdWJsaWMgZGVmYXVsdEFyZ3MgPSBbXVxuICApIHtcbiAgICBpZiAodHlwZW9mIGN0b3JPckpzb24gPT09ICdvYmplY3QnKSB7XG4gICAgICBzdXBlcihjdG9yT3JKc29uLmVudHJpZXMpXG4gICAgICB0aGlzLmN0b3IgPSBjdG9yT3JKc29uLmN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIoKVxuICAgICAgdGhpcy5jdG9yID0gY3Rvck9ySnNvblxuICAgIH1cbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW50cmllczogWy4uLnRoaXNdLFxuICAgICAgY3RvcjogdGhpcy5jdG9yXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBXZWFrTWFwRmFjdG9yeTxLIGV4dGVuZHMgb2JqZWN0LCBWIGV4dGVuZHMgb2JqZWN0PiBleHRlbmRzIFdlYWtNYXA8SywgVj4ge1xuICBnZXQoa2V5OiBLLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSkhXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHRoaXMuY3RvcihrZXksIC4uLihhcmdzLmxlbmd0aCA/IGFyZ3MgOiB0aGlzLmRlZmF1bHRBcmdzKSlcbiAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWUpXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgY3RvcjogQ2xhc3M8Vj4sXG4gICAgcHVibGljIGRlZmF1bHRBcmdzID0gW11cbiAgKSB7XG4gICAgc3VwZXIoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kQWxsPFQgZXh0ZW5kcyBvYmplY3QsIFUgZXh0ZW5kcyBvYmplY3Q+KG9iajogVCwgdGFyZ2V0OiBUIHwgVSA9IG9iaik6IFQgJiBVIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGFyZ2V0LFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIGZpbHRlck1hcChcbiAgICAgICAgZW50cmllcyhcbiAgICAgICAgICBPYmplY3RcbiAgICAgICAgICAgIC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKFxuICAgICAgICAgICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKVxuICAgICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICAoW2tleSwgZGVzY10pID0+XG4gICAgICAgICAgdHlwZW9mIGRlc2MudmFsdWUgPT09ICdmdW5jdGlvbicgJiYgW2tleSwgZGVzYy52YWx1ZS5iaW5kKG9iaildXG4gICAgICApXG4gICAgKVxuICApIGFzIFQgJiBVXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbmNlPFQgZXh0ZW5kcyAoKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pID0+IGFueSkgfCB2b2lkPihmbjogVCk6IFQge1xuICBpZiAoIWZuKSByZXR1cm4gZm5cblxuICBsZXQgcmVzOiBhbnlcbiAgZnVuY3Rpb24gd3JhcCh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgY29uc3Qgc2F2ZWZuID0gZm5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm4gPSB2b2lkIDBcbiAgICByZXMgPz89IHNhdmVmbj8uYXBwbHkodGhpcywgYXJncylcbiAgICByZXR1cm4gcmVzXG4gIH1cbiAgcmV0dXJuIHdyYXAgYXMgVFxufVxuIiwiaW1wb3J0IHsgTWFwTWFwLCBtdXRhYmxlLCBwaWNrIH0gZnJvbSAnZXZlcnlkYXktdXRpbHMnXG5pbXBvcnQgdHlwZSB7IFN0cmluZ0tleXMgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgU2F2ZWRFdmVudCA9IEV2ZW50cyAmIHtcbiAgaXM6IFN0cmluZ0tleXM8dHlwZW9mIEV2ZW50Q29uc3RydWN0b3JzTWFwPlxuICBjYXB0dXJlOiBib29sZWFuIHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIHtcbiAgc2VsZWN0b3JzOiBzdHJpbmdbXVxuICBldmVudDogU2F2ZWRFdmVudFxufVxuXG5leHBvcnQgdHlwZSBFdmVudHMgPVxuICAmIElucHV0RXZlbnRcbiAgJiBLZXlib2FyZEV2ZW50XG4gICYgTW91c2VFdmVudFxuICAmIFBvaW50ZXJFdmVudFxuICAmIFdoZWVsRXZlbnRcblxuY29uc3QgTUlOX0lETEVfVElNRSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5yZWNvcmRlck1pbklkbGVUaW1lKSB8fCA1MFxuY29uc3QgRlJBTUVfVElNRSA9IDEwMDAgLyA2MFxuXG5jb25zdCBhbGxFdmVudHMgPSBbXG4gIFsnbWlzYycsIFtcbiAgICAnYmx1cicsXG4gICAgJ2ZvY3VzJyxcbiAgICAnY2xpY2snLFxuICAgICdkYmxjbGljaycsXG4gICAgJ3doZWVsJyxcbiAgICAnaW5wdXQnLFxuICAgICdjaGFuZ2UnLFxuICAgICdjb250ZXh0bWVudScsXG4gIF1dLFxuXG4gIFsncG9pbnRlcicsIFtcbiAgICAncG9pbnRlcmRvd24nLFxuICAgICdwb2ludGVydXAnLFxuICAgICdwb2ludGVybW92ZScsXG4gICAgJ3BvaW50ZXJvdmVyJyxcbiAgICAncG9pbnRlcmVudGVyJyxcbiAgICAncG9pbnRlcmxlYXZlJyxcbiAgICAncG9pbnRlcmNhbmNlbCcsXG4gIF1dLFxuXG4gIFsnbW91c2UnLCBbXG4gICAgJ21vdXNlZG93bicsXG4gICAgJ21vdXNldXAnLFxuICAgICdtb3VzZW1vdmUnLFxuICAgICdtb3VzZW92ZXInLFxuICAgICdtb3VzZWVudGVyJyxcbiAgICAnbW91c2VsZWF2ZScsXG4gICAgJ21vdXNlY2FuY2VsJyxcbiAgXV0sXG5cbiAgWydrZXlib2FyZCcsIFtcbiAgICAna2V5ZG93bicsXG4gICAgJ2tleXVwJyxcbiAgICAna2V5cHJlc3MnLFxuICBdXSxcbl0gYXMgY29uc3RcblxuY29uc3QgY29weUV2ZW50UHJvcHMgPSBbXG4gICdwb2ludGVySWQnLFxuICAnYnV0dG9ucycsXG4gICdhbHRLZXknLFxuICAnY3RybEtleScsXG4gICdzaGlmdEtleScsXG4gICdtZXRhS2V5JyxcbiAgJ3BhZ2VYJyxcbiAgJ3BhZ2VZJyxcbiAgJ2RlbHRhWCcsXG4gICdkZWx0YVknLFxuICAna2V5JyxcbiAgJ3doaWNoJyxcbl0gYXMgY29uc3RcblxuY29uc3Qgc2F2ZUV2ZW50UHJvcHMgPSBbXG4gICd0eXBlJyxcbiAgJ3RpbWVTdGFtcCcsXG5dIGFzIGNvbnN0XG5cbmNvbnN0IGRpc3BhdGNoUHJvcHMgPSBbXG4gICdidWJibGVzJyxcbiAgJ2NvbXBvc2VkJyxcbiAgJ2NhbmNlbGFibGUnLFxuXSBhcyBjb25zdFxuXG5jb25zdCBFdmVudENvbnN0cnVjdG9yc01hcCA9IHtcbiAgSW5wdXRFdmVudCxcbiAgS2V5Ym9hcmRFdmVudCxcbiAgTW91c2VFdmVudCxcbiAgUG9pbnRlckV2ZW50LFxuICBXaGVlbEV2ZW50LFxufSBhcyBjb25zdFxuXG5mdW5jdGlvbiBjb3B5RXZlbnQoZXZlbnQ6IEV2ZW50cyk6IFByb3BlcnR5RGVzY3JpcHRvck1hcCB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgY29weUV2ZW50UHJvcHMubWFwKFxuICAgICAgKGtleSk6IFtzdHJpbmcsIFByb3BlcnR5RGVzY3JpcHRvcl0gPT5cbiAgICAgICAgW2tleSwgeyB2YWx1ZTogZXZlbnRba2V5XSB9XVxuICAgIClcbiAgKVxufVxuXG5mdW5jdGlvbiBzYXZlRXZlbnQoZXZlbnQ6IEV2ZW50cywgY2FwdHVyZTogYm9vbGVhbiB8IHVuZGVmaW5lZCk6IFNhdmVkRXZlbnQge1xuICByZXR1cm4ge1xuICAgIGlzOiBldmVudC5jb25zdHJ1Y3Rvci5uYW1lIGFzIGtleW9mIHR5cGVvZiBFdmVudENvbnN0cnVjdG9yc01hcCxcbiAgICBjYXB0dXJlLFxuICAgIC4uLihPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBbLi4uY29weUV2ZW50UHJvcHMsIC4uLnNhdmVFdmVudFByb3BzLCAuLi5kaXNwYXRjaFByb3BzXS5tYXAoXG4gICAgICAgIChrZXkpOiBbc3RyaW5nLCBFdmVudHNba2V5b2YgRXZlbnRzXV0gPT5cbiAgICAgICAgICBba2V5LCBldmVudFtrZXldXVxuICAgICAgKVxuICAgICkgYXMgdW5rbm93biBhcyBFdmVudHMpLFxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRTZWxlY3RvcihlbDogRWxlbWVudCB8IG51bGwpIHtcbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cblxuICB3aGlsZSAoZWwpIHtcbiAgICBwYXJ0cy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlcblxuICAgIGNvbnN0IHBhcmVudCA9IGVsLnBhcmVudE5vZGVcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIC8vIG50aC1jaGlsZCBpbmRleGVzIGFyZSAxLWJhc2VkXG4gICAgICBjb25zdCBjaGlsZHJlbiA9IFsuLi5wYXJlbnQuY2hpbGRyZW5dXG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpICsgMVxuICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICBwYXJ0c1swXSArPSBgOm50aC1jaGlsZCgke2luZGV4fSlgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdwYXJ0JykpIHtcbiAgICAgIGNvbnN0IHNlbCA9IGBbcGFydD0ke2VsLmdldEF0dHJpYnV0ZSgncGFydCcpfV1gXG4gICAgICBwYXJ0c1swXSArPSBzZWxcbiAgICB9XG5cbiAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgZWwgPSBwYXJlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbignID4gJylcbn1cblxuZnVuY3Rpb24gbm9kZVRvU2VsZWN0b3JzKGVsOiBFbGVtZW50IHwgV2luZG93KSB7XG4gIGlmIChlbCBpbnN0YW5jZW9mIFdpbmRvdykgcmV0dXJuIFsnd2luZG93J11cblxuICBjb25zdCBzZWxlY3RvcnM6IHN0cmluZ1tdID0gW11cblxuICBsZXQgcm9vdE5vZGVcblxuICB3aGlsZSAocm9vdE5vZGUgPSBlbC5nZXRSb290Tm9kZSgpKSB7XG4gICAgc2VsZWN0b3JzLnVuc2hpZnQoZ2V0RWxlbWVudFNlbGVjdG9yKGVsKSlcblxuICAgIGlmIChyb290Tm9kZSA9PT0gZG9jdW1lbnQgfHwgcm9vdE5vZGUgPT09IGVsKSBicmVha1xuXG4gICAgZWwgPSAocm9vdE5vZGUgYXMgU2hhZG93Um9vdCkuaG9zdFxuICB9XG5cbiAgcmV0dXJuIHNlbGVjdG9yc1xufVxuXG5mdW5jdGlvbiBzZWxlY3RvcnNUb05vZGUoc2VsZWN0b3JzOiBzdHJpbmdbXSkge1xuICBsZXQgcm9vdE5vZGUgPSBkb2N1bWVudCBhcyBEb2N1bWVudCB8IFNoYWRvd1Jvb3QgfCBFbGVtZW50IHwgbnVsbFxuXG4gIGxldCBjdXJyZW50LCBlbFxuXG4gIGZvciAoY29uc3Qgc2VsIG9mIHNlbGVjdG9ycykge1xuICAgIGlmIChzZWwgPT09ICd3aW5kb3cnKSB7XG4gICAgICByZXR1cm4gd2luZG93XG4gICAgfVxuXG4gICAgZWwgPSByb290Tm9kZT8ucXVlcnlTZWxlY3RvcihzZWwpXG4gICAgaWYgKCFlbCkgcmV0dXJuIGN1cnJlbnRcblxuICAgIGN1cnJlbnQgPSBlbFxuXG4gICAgcm9vdE5vZGUgPSAoZWwgYXMgRWxlbWVudCk/LnNoYWRvd1Jvb3RcbiAgICBpZiAoIXJvb3ROb2RlKSBicmVha1xuICB9XG4gIHJldHVybiBjdXJyZW50XG59XG5cbmNvbnN0IHBhdGNoRXZlbnRUYXJnZXQgPSAoKSA9PiB7XG4gIGNvbnN0IG9yaWdpbmFsID0ge1xuICAgIGFkZEV2ZW50TGlzdGVuZXI6IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyLFxuICB9IGFzIGNvbnN0XG5cbiAgY29uc3QgaGFuZGxlciA9IHtcbiAgICBsYXN0RXZlbnRUaW1lOiAwLFxuICAgIHJlY29yZGluZzogZmFsc2UsXG4gICAgb25hY3Rpb246IChfYWN0aW9uOiBBY3Rpb24pID0+IHsgfVxuICB9XG5cbiAgY29uc3QgY2FsbGJhY2tzID0gbmV3IE1hcE1hcDxFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMgfCB1bmRlZmluZWQsIEV2ZW50TGlzdGVuZXI+KClcblxuICBmdW5jdGlvbiBjYWxsYmFja0ZvcihcbiAgICBjYWxsYmFjazogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zOiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgaWYgKGNhbGxiYWNrcy5oYXMoY2FsbGJhY2ssIG9wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2tzLmdldChjYWxsYmFjaywgb3B0aW9ucykhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdGVuZXIodGhpczogRWxlbWVudCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICBjb25zdCBpc1JlY29yZGluZyA9IGhhbmRsZXIucmVjb3JkaW5nICYmIChldmVudC5jb25zdHJ1Y3Rvci5uYW1lIGluIEV2ZW50Q29uc3RydWN0b3JzTWFwKVxuXG4gICAgICBsZXQgc2VsZWN0b3JzITogc3RyaW5nW11cblxuICAgICAgaWYgKGlzUmVjb3JkaW5nKSB7XG4gICAgICAgIHNlbGVjdG9ycyA9IG5vZGVUb1NlbGVjdG9ycyh0aGlzKVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjay5jYWxsKHRoaXMsIGV2ZW50KVxuXG4gICAgICAvLyB1c2VkIHRvIGRldGVjdCBpZGxlIGZvciBhdXRvcGxheVxuICAgICAgaGFuZGxlci5sYXN0RXZlbnRUaW1lID0gZXZlbnQudGltZVN0YW1wXG5cbiAgICAgIGlmIChpc1JlY29yZGluZykge1xuICAgICAgICBpZiAoc2VsZWN0b3JzLmZpbHRlcihCb29sZWFuKS5sZW5ndGgpIHtcbiAgICAgICAgICBoYW5kbGVyLm9uYWN0aW9uKHtcbiAgICAgICAgICAgIHNlbGVjdG9ycyxcbiAgICAgICAgICAgIGV2ZW50OiBzYXZlRXZlbnQoXG4gICAgICAgICAgICAgIGV2ZW50IGFzIEV2ZW50cyxcbiAgICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMgPT09ICdib29sZWFuJyA/IG9wdGlvbnMgOiBvcHRpb25zPy5jYXB0dXJlXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ25vIHNlbGVjdG9ycycsIHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nIHx8ICFvcHRpb25zPy5vbmNlKSB7XG4gICAgICBjYWxsYmFja3Muc2V0KGNhbGxiYWNrLCBvcHRpb25zLCBsaXN0ZW5lcilcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdGVuZXJcbiAgfVxuXG4gIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKFxuICAgIHR5cGUsXG4gICAgY2FsbGJhY2s6IEV2ZW50TGlzdGVuZXIsXG4gICAgb3B0aW9uc1xuICApIHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IGNhbGxiYWNrRm9yKGNhbGxiYWNrLCBvcHRpb25zKVxuICAgIHJldHVybiBvcmlnaW5hbC5hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpXG4gIH1cblxuICBFdmVudFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChcbiAgICB0eXBlLFxuICAgIGNhbGxiYWNrOiBFdmVudExpc3RlbmVyLFxuICAgIG9wdGlvbnNcbiAgKSB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBjYWxsYmFja3MuZ2V0KGNhbGxiYWNrLCBvcHRpb25zKVxuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgY2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjaywgb3B0aW9ucylcbiAgICAgIHJldHVybiBvcmlnaW5hbC5yZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpXG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIG9yaWdpbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCB0eXBlLCBjYWxsYmFjaywgb3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBoYW5kbGVyXG59XG5cbmNvbnN0IGhhbmRsZXIgPSBwYXRjaEV2ZW50VGFyZ2V0KClcblxuZXhwb3J0IGNsYXNzIERPTVJlY29yZGVyIHtcbiAgYWN0aW9ucyA9IFtdIGFzIEFjdGlvbltdXG5cbiAgZXZlbnRUeXBlczogc3RyaW5nW10gPSAoXG4gICAgbG9jYWxTdG9yYWdlLnJlY29yZGVyRXZlbnRUeXBlc1xuICAgID8/ICdjbGljayxwb2ludGVybW92ZSxrZXlkb3duJ1xuICApLnNwbGl0KCcsJylcblxuICBlbmFibGVkR3JvdXBzOiBzdHJpbmdbXSA9IChcbiAgICBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFbmFibGVkR3JvdXBzXG4gICAgPz8gJ21pc2MscG9pbnRlcixrZXlib2FyZCdcbiAgKS5zcGxpdCgnLCcpXG5cbiAgZWwhOiBIVE1MRGl2RWxlbWVudFxuICBjb250cm9sc0VsITogSFRNTERpdkVsZW1lbnRcbiAgc3RhdHVzRWwhOiBIVE1MRWxlbWVudFxuICBzdGF0dXMgPSAnJ1xuICBhY3Rpb25zRWwhOiBIVE1MRGV0YWlsc0VsZW1lbnRcbiAgZXZlbnRzID0gJydcbiAgZm9ybUVsITogSFRNTEZvcm1FbGVtZW50XG4gIHBvaW50ZXJFbCE6IEhUTUxEaXZFbGVtZW50XG5cbiAgYXV0b3BsYXkgPSBmYWxzZVxuICBza2lwcGVkID0gMFxuICByZXBsYXllZCA9IDBcbiAgcmVwbGF5aW5nID0gZmFsc2VcbiAgZGlydHlBY3Rpb25zID0gZmFsc2VcbiAgdW5zYXZlZEFjdGlvbnMgPSBmYWxzZVxuXG4gIG9uQmVmb3JlVW5sb2FkID0gKGV2ZW50OiBCZWZvcmVVbmxvYWRFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLnVuc2F2ZWRBY3Rpb25zKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICByZXR1cm4gKGV2ZW50LnJldHVyblZhbHVlID0gJ1RoZXJlIGFyZSB1bnNhdmVkIGFjdGlvbnMsIGFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBleGl0PycpXG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZW5kZXIoKVxuXG4gICAgdGhpcy5nZXRBY3Rpb25zKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLm1heWJlQXV0b3BsYXkoKVxuICAgIH0pXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdiZWZvcmV1bmxvYWQnLFxuICAgICAgdGhpcy5vbkJlZm9yZVVubG9hZCxcbiAgICAgIHsgY2FwdHVyZTogdHJ1ZSB9XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuZWwgPz89IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5lbC5pZCA9ICdyZWNvcmRlci11aSdcbiAgICB0aGlzLnBhaW50RWwoKVxuXG4gICAgdGhpcy5wb2ludGVyRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5yZWNvcmRlci11aS1wb2ludGVyJykhXG5cbiAgICB0aGlzLmNvbnRyb2xzRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5yZWNvcmRlci11aS1jb250cm9scycpIVxuICAgIHRoaXMucGFpbnRDb250cm9scygpXG5cbiAgICB0aGlzLmZvcm1FbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignZm9ybScpIVxuICAgIHRoaXMucGFpbnRGb3JtKClcblxuICAgIHRoaXMuYWN0aW9uc0VsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdkZXRhaWxzJykhXG4gICAgdGhpcy5wYWludEFjdGlvbnMoKVxuXG4gICAgdGhpcy5wYWludFN0YXR1cygwKVxuXG4gICAgYWxsRXZlbnRzXG4gICAgICAuZmxhdE1hcCgoWywgZXZlbnRzXSkgPT4gZXZlbnRzKVxuICAgICAgLm1hcCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIChlKSA9PiB7XG4gICAgICAgICAgdGhpcy5hdXRvcGxheSA9IGZhbHNlXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pXG4gICAgICB9KVxuICB9XG5cbiAgcGFpbnRFbCgpIHtcbiAgICB0aGlzLmVsLmlubmVySFRNTCA9IC8qaHRtbCovYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAjcmVjb3JkZXItdWkge1xuICAgICAgICAgIC0tYmFja2dyb3VuZDogIzIyMmU7XG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgIHotaW5kZXg6IDk5OTk5OTk5O1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgKiB7XG4gICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aTtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLWNvbnRyb2xzIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kKTtcbiAgICAgICAgfVxuICAgICAgICAucmVjb3JkZXItdWktY29udHJvbHMsXG4gICAgICAgIC5yZWNvcmRlci11aS1jb250cm9scyA+ICoge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgICAgICAgICBwbGFjZS1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBpbnB1dFt0eXBlPWNoZWNrYm94XSB7XG4gICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZm9ybSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICAgICAgb3ZlcmZsb3c6IHNjcm9sbDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBmb3JtLmhpZGRlbiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZm9ybSA+IGRpdiB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IHJvdztcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgbGFiZWwge1xuICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQge1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbiB3cmFwO1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQgbGVnZW5kIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQucmVjb3JkZXItdWktZ3JvdXBzIHtcbiAgICAgICAgICBmbGV4OiAwO1xuICAgICAgICAgIG1pbi13aWR0aDogMTAwcHg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgd2hpdGUtc3BhY2U6IHByZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZGV0YWlsc1tvcGVuXSB7XG4gICAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgICBvdmVyZmxvdzogc2Nyb2xsO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgc3VtbWFyeSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzMzMztcbiAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBkZXRhaWxzIGRpdiB7XG4gICAgICAgICAgb3BhY2l0eTogMC4xNTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWk6aG92ZXIgZGV0YWlscyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpOmhvdmVyIGRldGFpbHMgZGl2IHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgc3VtbWFyeTpob3ZlcixcbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgZGl2OmhvdmVyIHtcbiAgICAgICAgICBjb2xvcjogIzAwMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjODg4O1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLWV2ZW50LXNraXBwZWQge1xuICAgICAgICAgIGNvbG9yOiAjNzc3O1xuICAgICAgICB9XG4gICAgICAgIC5yZWNvcmRlci11aS1wb2ludGVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgei1pbmRleDogOTk5OTk5OTk7XG4gICAgICAgICAgbWl4LWJsZW5kLW1vZGU6IGRpZmZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLXBvaW50ZXIgc3ZnIHtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgbGVmdDogLTZweDtcbiAgICAgICAgICB0b3A6IC0zcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLXBvaW50ZXIuaGlkZGVuIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgICAgPGRpdiBjbGFzcz1cInJlY29yZGVyLXVpLXBvaW50ZXIgaGlkZGVuXCI+XG4gICAgICAgIDwhLS0gaHR0cHM6Ly9naXRodWIuY29tL2dyb21tZXQvZ3JvbW1ldC1pY29ucy9ibG9iL21hc3Rlci9wdWJsaWMvaW1nL2N1cnNvci5zdmcgLS0+XG4gICAgICAgIDxzdmcgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjMwXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cG9seWdvblxuICAgICAgICAgIGZpbGw9XCIjNjY2YVwiXG4gICAgICAgICAgc3Ryb2tlPVwiI2ZmZlwiXG4gICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMS4xNVwiXG4gICAgICAgICAgcG9pbnRzPVwiNiAzIDE4IDE0IDEzIDE1IDE2IDIwLjUgMTMgMjIgMTAgMTYgNiAxOVwiXG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyZWNvcmRlci11aS1jb250cm9sc1wiPjwvZGl2PlxuICAgICAgPGZvcm0gb25jaGFuZ2U9XCJyZWNvcmRlci5nZXRGb3JtRGF0YSh0aGlzKVwiPjwvZm9ybT5cbiAgICAgIDxkZXRhaWxzIG9wZW4+PC9kZXRhaWxzPlxuICAgIGBcbiAgfVxuXG4gIHBhaW50Q29udHJvbHMoKSB7XG4gICAgdGhpcy5jb250cm9sc0VsLmlubmVySFRNTCA9IC8qaHRtbCovYFxuICAgICAgPGRpdj5cbiAgICAgICAgPGJ1dHRvbiAke3RoaXMucmVwbGF5aW5nID8gJ2Rpc2FibGVkJyA6ICdvbmNsaWNrPVwicmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKVwiJ30+cmVjb3JkPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gJHshaGFuZGxlci5yZWNvcmRpbmcgPyAnZGlzYWJsZWQnIDogJ29uY2xpY2s9XCJyZWNvcmRlci5zdG9wUmVjb3JkaW5nKClcIid9PnN0b3A8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgJm5ic3A7XG4gICAgICA8ZGl2PlxuICAgICAgICA8YnV0dG9uICR7dGhpcy5yZXBsYXlpbmcgfHwgKCF0aGlzLmFjdGlvbnMubGVuZ3RoICYmICFoYW5kbGVyLnJlY29yZGluZykgPyAnZGlzYWJsZWQnIDogJ29uY2xpY2s9XCJyZWNvcmRlci5zdGFydFJlcGxheWluZygpXCInfT5yZXBsYXk8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiAkeyF0aGlzLnJlcGxheWluZyA/ICdkaXNhYmxlZCcgOiAnb25jbGljaz1cInJlY29yZGVyLnN0b3BSZXBsYXlpbmcoKVwiJ30+c3RvcDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICAmbmJzcDtcbiAgICAgIDxkaXY+XG4gICAgICAgIHNlcnZlcjpcbiAgICAgICAgPGJ1dHRvbiAkeyF0aGlzLnVuc2F2ZWRBY3Rpb25zIHx8IHRoaXMucmVwbGF5aW5nIHx8ICF0aGlzLmFjdGlvbnMubGVuZ3RoIHx8IGhhbmRsZXIucmVjb3JkaW5nID8gJ2Rpc2FibGVkJyA6ICdvbmNsaWNrPVwicmVjb3JkZXIucG9zdEFjdGlvbnMoKVwiJ30+cG9zdDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uICAke3RoaXMucmVwbGF5aW5nIHx8ICF0aGlzLmFjdGlvbnMubGVuZ3RoIHx8IGhhbmRsZXIucmVjb3JkaW5nID8gJ2Rpc2FibGVkJyA6ICdvbmNsaWNrPVwicmVjb3JkZXIucmVwbGF5U2VydmVyKClcIid9PnJlcGxheTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICAmbmJzcDtcbiAgICAgIDxsYWJlbFxuICAgICAgICBvbmNvbnRleHRtZW51PVwiZXZlbnQucHJldmVudERlZmF1bHQoKTtsb2NhbFN0b3JhZ2UucmVjb3JkZXJNaW5JZGxlVGltZT1wYXJzZUludChwcm9tcHQoJ0VudGVyIGlkbGUgdGltZShtcykgbmVlZGVkIGZvciBhdXRvcGxheSB0byBiZWdpbjonLCBwYXJzZUludChsb2NhbFN0b3JhZ2UucmVjb3JkZXJNaW5JZGxlVGltZSkgfHwgNTApKVwiXG4gICAgICA+XG4gICAgICAgIGF1dG86PGlucHV0XG4gICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICBvbmNoYW5nZT1cImxvY2FsU3RvcmFnZS5yZWNvcmRlckF1dG9wbGF5PXRoaXMuY2hlY2tlZFwiXG4gICAgICAgICAgJHtsb2NhbFN0b3JhZ2UucmVjb3JkZXJBdXRvcGxheSA9PT0gJ3RydWUnID8gJ2NoZWNrZWQnIDogJyd9XG4gICAgICAgIC8+XG4gICAgICA8L2xhYmVsPlxuICAgICAgPGxhYmVsPlxuICAgICAgICBsb29wOjxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgb25jaGFuZ2U9XCJsb2NhbFN0b3JhZ2UucmVjb3JkZXJMb29wPSEhdGhpcy5jaGVja2VkXCJcbiAgICAgICAgICAke2xvY2FsU3RvcmFnZS5yZWNvcmRlckxvb3AgPT09ICd0cnVlJyA/ICdjaGVja2VkJyA6ICcnfVxuICAgICAgICAvPlxuICAgICAgPC9sYWJlbD5cbiAgICBgXG4gIH1cblxuICBwYWludEZvcm0oKSB7XG4gICAgY29uc3QgZGlzYWJsZWRFdmVudHMgPSBhbGxFdmVudHNcbiAgICAgIC5maWx0ZXIoKFtncm91cF0pID0+ICF0aGlzLmVuYWJsZWRHcm91cHMuaW5jbHVkZXMoZ3JvdXApKVxuXG4gICAgY29uc3QgZW5hYmxlZEV2ZW50cyA9IGFsbEV2ZW50c1xuICAgICAgLmZpbHRlcigoW2dyb3VwXSkgPT4gdGhpcy5lbmFibGVkR3JvdXBzLmluY2x1ZGVzKGdyb3VwKSlcblxuICAgIHRoaXMuZm9ybUVsLmlubmVySFRNTCA9IC8qaHRtbCovYFxuICAgICAgJHshZGlzYWJsZWRFdmVudHMubGVuZ3RoID8gJycgOiAvKmh0bWwqL2BcbiAgICAgIDxkaXYgY2xhc3M9XCJyZWNvcmRlci11aS1ncm91cHNcIj5cbiAgICAgICAgJHtkaXNhYmxlZEV2ZW50cy5tYXAoKFtncm91cCwgZXZlbnRzXSkgPT4gLypodG1sKi9gXG4gICAgICAgIDxsYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICBuYW1lPVwiZW5hYmxlZEdyb3Vwc1tdXCJcbiAgICAgICAgICAgIHZhbHVlPVwiJHtncm91cH1cIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgJHtncm91cH1cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgJHttdXRhYmxlKGV2ZW50cylcbiAgICAgICAgLmZpbHRlcigodHlwZSkgPT5cbiAgICAgICAgICB0aGlzLmV2ZW50VHlwZXMuaW5jbHVkZXModHlwZSlcbiAgICAgICAgKVxuICAgICAgICAubWFwKCh0eXBlKSA9PiAvKmh0bWwqL2BcbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJoaWRkZW5cIlxuICAgICAgICAgICAgbmFtZT1cInJlY29yZGVyRXZlbnRUeXBlc1tdXCJcbiAgICAgICAgICAgIHZhbHVlPVwiJHt0eXBlfVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgYCkuam9pbignJyl9XG4gICAgICBgKS5qb2luKCcnKX1cbiAgICAgIDwvZGl2PmB9XG4gICAgICA8ZGl2PlxuICAgICAgICAke2VuYWJsZWRFdmVudHMubWFwKChbZ3JvdXAsIGV2ZW50c10pID0+IC8qaHRtbCovYFxuICAgICAgICA8ZmllbGRzZXQ+XG4gICAgICAgICAgPGxlZ2VuZD5cbiAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZW5hYmxlZEdyb3Vwc1tdXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT1cIiR7Z3JvdXB9XCJcbiAgICAgICAgICAgICAgICBjaGVja2VkXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICR7Z3JvdXB9XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDwvbGVnZW5kPlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAke211dGFibGUoZXZlbnRzKS5ldmVyeSgodHlwZSkgPT4gdGhpcy5ldmVudFR5cGVzLmxlbmd0aCAmJiB0aGlzLmV2ZW50VHlwZXMuaW5jbHVkZXModHlwZSkpID8gYFxuICAgICAgICAgICAgICAgIGNoZWNrZWRcbiAgICAgICAgICAgICAgICBvbmNsaWNrPVwicmVjb3JkZXIuZGVzZWxlY3RBbGwoJyR7Z3JvdXB9JylcIlxuICAgICAgICAgICAgICBgIDogYFxuICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJyZWNvcmRlci5zZWxlY3RBbGwoJyR7Z3JvdXB9JylcIlxuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGFsbCAke2dyb3VwfVxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgJHtldmVudHMubWFwKCh0eXBlKSA9PiAvKmh0bWwqL2BcbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgbmFtZT1cInJlY29yZGVyRXZlbnRUeXBlc1tdXCJcbiAgICAgICAgICAgICAgdmFsdWU9XCIke3R5cGV9XCJcbiAgICAgICAgICAgICAgJHt0aGlzLmV2ZW50VHlwZXMuaW5jbHVkZXModHlwZSkgPyAnY2hlY2tlZCcgOiAnJ31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAke3R5cGV9XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgPC9maWVsZHNldD5gKS5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgfVxuXG4gIHBhaW50QWN0aW9ucygpIHtcbiAgICBpZiAodGhpcy5hY3Rpb25zLmxlbmd0aCkge1xuICAgICAgY29uc3QgZmlyc3RUaW1lU3RhbXAgPSB0aGlzLmFjdGlvbnNbMF0uZXZlbnQudGltZVN0YW1wIHwgMFxuXG4gICAgICB0aGlzLmFjdGlvbnNFbC5pbm5lckhUTUwgPSB0aGlzLmFjdGlvbnMubWFwKFxuICAgICAgICAoYWN0aW9uLCBpbmRleCkgPT5cbiAgICAgICAgICBgPGRpdiBpZD1cImFjdGlvbiR7aW5kZXh9XCIgb25jbGljaz1cInJlY29yZGVyLnNob3dEZXRhaWxzKHRoaXMpXCI+JHsoYWN0aW9uLmV2ZW50LnRpbWVTdGFtcCB8IDApIC0gZmlyc3RUaW1lU3RhbXB9ICR7YWN0aW9uLmV2ZW50LnR5cGV9ICR7YWN0aW9uLnNlbGVjdG9ycy5hdCgtMSkhLnNwbGl0KCcgPiAnKS5wb3AoKX08L2Rpdj5gXG4gICAgICApLmpvaW4oJycpXG4gICAgfVxuXG4gICAgdGhpcy5hY3Rpb25zRWwucHJlcGVuZChcbiAgICAgIHRoaXMuc3RhdHVzRWwgPz89IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKVxuICAgIClcblxuICAgIHRoaXMuYWN0aW9uc0VsLm9wZW4gPSB0cnVlXG4gIH1cblxuICBwYWludFN0YXR1cyhraW5kOiBudW1iZXIpIHtcbiAgICBsZXQgc3RhdHVzOiBzdHJpbmdcbiAgICBpZiAoa2luZCA9PT0gMSkge1xuICAgICAgc3RhdHVzID0gYCR7dGhpcy5hY3Rpb25zLmxlbmd0aCAtIHRoaXMucmVwbGF5ZWQgLSB0aGlzLnNraXBwZWR9IHJlbWFpbmluZyAoJHt0aGlzLnNraXBwZWR9IHNraXBwZWQsICR7dGhpcy5hY3Rpb25zLmxlbmd0aH0gdG90YWwpYFxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0dXMgPSBgJHt0aGlzLmFjdGlvbnMubGVuZ3RofSBhY3Rpb25zLCAke3RoaXMuc2tpcHBlZH0gc2tpcHBlZGBcbiAgICB9XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSB0aGlzLnN0YXR1cyA9IHN0YXR1c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyB3YWl0VW50aWxJZGxlKCkge1xuICAgIHdoaWxlIChwZXJmb3JtYW5jZS5ub3coKSAtIGhhbmRsZXIubGFzdEV2ZW50VGltZSA8IE1JTl9JRExFX1RJTUUpIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1heWJlQXV0b3BsYXkoKSB7XG4gICAgaWYgKCF0aGlzLmFjdGlvbnMubGVuZ3RoKSByZXR1cm5cblxuICAgIGlmIChsb2NhbFN0b3JhZ2UucmVjb3JkZXJBdXRvcGxheSA9PT0gJ3RydWUnKSB7XG4gICAgICB0aGlzLmF1dG9wbGF5ID0gdHJ1ZVxuICAgICAgYXdhaXQgdGhpcy53YWl0VW50aWxJZGxlKClcbiAgICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XG4gICAgICAgIHRoaXMuc3RhcnRSZXBsYXlpbmcoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEZvcm1EYXRhKGZvcm06IEhUTUxGb3JtRWxlbWVudCkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG5cbiAgICB0aGlzLmV2ZW50VHlwZXMgPSBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFdmVudFR5cGVzID0gZm9ybURhdGEuZ2V0QWxsKCdyZWNvcmRlckV2ZW50VHlwZXNbXScpIGFzIHN0cmluZ1tdXG5cbiAgICB0aGlzLmVuYWJsZWRHcm91cHMgPSBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFbmFibGVkR3JvdXBzID0gZm9ybURhdGEuZ2V0QWxsKCdlbmFibGVkR3JvdXBzW10nKSBhcyBzdHJpbmdbXVxuXG4gICAgdGhpcy5wYWludEZvcm0oKVxuICB9XG5cbiAgc2VsZWN0QWxsKGdyb3VwOiBzdHJpbmcpIHtcbiAgICB0aGlzLmV2ZW50VHlwZXMgPSBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFdmVudFR5cGVzID0gWy4uLm5ldyBTZXQoW1xuICAgICAgLi4udGhpcy5ldmVudFR5cGVzLFxuICAgICAgLi4uYWxsRXZlbnRzXG4gICAgICAgIC5maW5kKChbZ10pID0+IGdyb3VwID09PSBnKSFbMV1cbiAgICBdKV1cblxuICAgIHRoaXMucGFpbnRGb3JtKClcbiAgfVxuXG4gIGRlc2VsZWN0QWxsKGdyb3VwOiBzdHJpbmcpIHtcbiAgICBjb25zdCB0b0Rlc2VsZWN0ID0gYWxsRXZlbnRzXG4gICAgICAuZmluZCgoW2ddKSA9PiBncm91cCA9PT0gZykhWzFdXG5cbiAgICB0aGlzLmV2ZW50VHlwZXMgPSBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFdmVudFR5cGVzID0gdGhpcy5ldmVudFR5cGVzLmZpbHRlcigodHlwZSkgPT4gIXRvRGVzZWxlY3QuaW5jbHVkZXModHlwZSBhcyBuZXZlcikpXG5cbiAgICB0aGlzLnBhaW50Rm9ybSgpXG4gIH1cblxuICBzaG93RGV0YWlscyhlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICBpZiAoZWwuZGF0YXNldC5leHBhbmRlZCA9PT0gJ3RydWUnKSByZXR1cm5cbiAgICBlbC5kYXRhc2V0LmV4cGFuZGVkID0gJ3RydWUnXG4gICAgY29uc3QgYWN0aW9uID0gdGhpcy5hY3Rpb25zWytlbC5pZC5zcGxpdCgnYWN0aW9uJykhLnBvcCgpIV1cbiAgICBjb25zdCBldmVudERldGFpbHMgPSBgXFxuJHthY3Rpb24uc2VsZWN0b3JzLmpvaW4oJ1xcbiA+ICcpfVxcbiR7SlNPTi5zdHJpbmdpZnkoYWN0aW9uLmV2ZW50LCBudWxsLCAyKX1gXG4gICAgdGhpcy5hY3Rpb25zRWwucXVlcnlTZWxlY3RvcihgIyR7ZWwuaWR9YCkhLmFwcGVuZChldmVudERldGFpbHMpXG4gIH1cblxuICBhc3luYyBwb3N0QWN0aW9ucygpIHtcbiAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKVxuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBuZXcgVVJMKCcvc3RvcmU/a2V5PXJlY29yZGVyLWFjdGlvbnMnLCBsb2NhdGlvbi5vcmlnaW4pLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9ucylcbiAgICB9KVxuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnNvbGUud2FybihyZXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudW5zYXZlZEFjdGlvbnMgPSBmYWxzZVxuICAgICAgdGhpcy5wYWludENvbnRyb2xzKClcbiAgICAgIGNvbnNvbGUubG9nKCdwb3N0ZWQnKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEFjdGlvbnMoKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBuZXcgVVJMKCcvc3RvcmU/a2V5PXJlY29yZGVyLWFjdGlvbnMnLCBsb2NhdGlvbi5vcmlnaW4pLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICBjb25zb2xlLndhcm4ocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKVxuICAgICAgdGhpcy5hY3Rpb25zID0ganNvblxuICAgICAgdGhpcy5wYWludEFjdGlvbnMoKVxuICAgICAgdGhpcy5wYWludENvbnRyb2xzKClcbiAgICAgIHRoaXMucGFpbnRTdGF0dXMoMClcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXBsYXlTZXJ2ZXIoKSB7XG4gICAgYXdhaXQgdGhpcy5nZXRBY3Rpb25zKClcbiAgICB0aGlzLnN0YXJ0UmVwbGF5aW5nKClcbiAgfVxuXG4gIHN0YXJ0UmVjb3JkaW5nKCkge1xuICAgIGlmICh0aGlzLnJlcGxheWluZykgcmV0dXJuXG5cbiAgICBjb25zdCBvd25VSVNlbGVjdG9yID0gZ2V0RWxlbWVudFNlbGVjdG9yKHRoaXMuZWwpXG5cbiAgICB0aGlzLmFjdGlvbnNFbC5vcGVuID0gZmFsc2VcbiAgICB0aGlzLmZvcm1FbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMuYWN0aW9ucy5zcGxpY2UoMClcbiAgICB0aGlzLnNraXBwZWQgPSAwXG4gICAgdGhpcy5kaXJ0eUFjdGlvbnMgPSB0cnVlXG4gICAgdGhpcy51bnNhdmVkQWN0aW9ucyA9IHRydWVcbiAgICBoYW5kbGVyLnJlY29yZGluZyA9IHRydWVcblxuICAgIHRoaXMucGFpbnRDb250cm9scygpXG4gICAgdGhpcy5wYWludFN0YXR1cygwKVxuXG4gICAgbGV0IHByZXY6IEFjdGlvbiB8IHZvaWRcblxuICAgIGhhbmRsZXIub25hY3Rpb24gPSAoYWN0aW9uOiBBY3Rpb24pID0+IHtcbiAgICAgIGlmIChhY3Rpb24uc2VsZWN0b3JzLmluY2x1ZGVzKG93blVJU2VsZWN0b3IpKSByZXR1cm4gZmFsc2VcblxuICAgICAgaWYgKCF0aGlzLmV2ZW50VHlwZXMuaW5jbHVkZXMoYWN0aW9uLmV2ZW50LnR5cGUpXG4gICAgICAgIHx8ICF0aGlzLmVuYWJsZWRHcm91cHMuaW5jbHVkZXMoXG4gICAgICAgICAgYWxsRXZlbnRzLmZpbmQoXG4gICAgICAgICAgICAoWywgZXZlbnRzXSkgPT5cbiAgICAgICAgICAgICAgZXZlbnRzLmluY2x1ZGVzKGFjdGlvbi5ldmVudC50eXBlIGFzIG5ldmVyKVxuICAgICAgICAgICkhWzBdXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aGlzLnNraXBwZWQrK1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFwcmV2XG4gICAgICAgICAgfHwgYWN0aW9uLmV2ZW50LnRpbWVTdGFtcCAhPT0gcHJldi5ldmVudC50aW1lU3RhbXBcbiAgICAgICAgICB8fCBhY3Rpb24uZXZlbnQudHlwZSAhPT0gcHJldi5ldmVudC50eXBlXG4gICAgICAgICAgfHwgYWN0aW9uLnNlbGVjdG9ycy5qb2luKCc6OjonKSAhPT0gcHJldi5zZWxlY3RvcnMuam9pbignOjo6JylcbiAgICAgICAgICB8fCBKU09OLnN0cmluZ2lmeShhY3Rpb24uZXZlbnQpICE9PSBKU09OLnN0cmluZ2lmeShwcmV2LmV2ZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmFjdGlvbnMucHVzaChwcmV2ID0gYWN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGFpbnRTdGF0dXMoMClcbiAgICB9XG4gIH1cblxuICBzdG9wUmVjb3JkaW5nKCkge1xuICAgIGlmICh0aGlzLnJlcGxheWluZykgcmV0dXJuXG5cbiAgICBoYW5kbGVyLnJlY29yZGluZyA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5kaXJ0eUFjdGlvbnMpIHtcbiAgICAgIHRoaXMuZm9ybUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB0aGlzLnRyaW1BY3Rpb25zKClcbiAgICAgIHRoaXMucGFpbnRBY3Rpb25zKClcbiAgICAgIHRoaXMucGFpbnRDb250cm9scygpXG4gICAgICB0aGlzLmRpcnR5QWN0aW9ucyA9IGZhbHNlXG4gICAgfVxuICB9XG5cblxuICB0cmltQWN0aW9ucygpIHtcbiAgICBsZXQgbGFzdCA9IHRoaXMuYWN0aW9ucy5hdCgtMSlcblxuICAgIGlmIChsYXN0Py5zZWxlY3RvcnNbMF0gPT09ICd3aW5kb3cnXG4gICAgICAmJiBsYXN0LmV2ZW50LnR5cGUgPT09ICdwb2ludGVyZG93bicpIHtcbiAgICAgIHRoaXMuYWN0aW9ucy5wb3AoKVxuICAgICAgd2hpbGUgKGxhc3QgPSB0aGlzLmFjdGlvbnMuYXQoLTEpKSB7XG4gICAgICAgIGlmIChsYXN0LnNlbGVjdG9yc1swXSAhPT0gJ3dpbmRvdydcbiAgICAgICAgICB8fCBsYXN0LmV2ZW50LnR5cGUgIT09ICdwb2ludGVybW92ZScpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9ucy5wb3AoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucGFpbnRTdGF0dXMoMClcbiAgfVxuXG4gIHN0b3BSZXBsYXlpbmcoKSB7XG4gICAgdGhpcy5yZXBsYXlpbmcgPSBmYWxzZVxuICAgIHRoaXMuc3RvcFJlY29yZGluZygpXG4gIH1cblxuICBhc3luYyBzdGFydFJlcGxheWluZyhuPzogbnVtYmVyIHwgbnVsbCwgYWN0aW9ucz86IEFjdGlvbltdKSB7XG4gICAgaWYgKHRoaXMucmVwbGF5aW5nKSByZXR1cm5cblxuICAgIHRoaXMuc3RvcFJlY29yZGluZygpXG4gICAgdGhpcy5yZXBsYXlpbmcgPSB0cnVlXG4gICAgdGhpcy5hY3Rpb25zRWwub3BlbiA9IGZhbHNlXG4gICAgdGhpcy5mb3JtRWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLnBvaW50ZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuXG4gICAgdGhpcy5wYWludENvbnRyb2xzKClcblxuICAgIGFjdGlvbnMgPz89IHRoaXMuYWN0aW9uc1xuXG4gICAgY29uc3QgcGxheSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBvZiByZXBsYXknKVxuICAgICAgY29uc29sZS50aW1lKCdyZXBsYXkgdGltZScpXG5cbiAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBgJHthY3Rpb25zIS5sZW5ndGh9IHJlbWFpbmluZ2BcblxuICAgICAgbGV0IHByZXZBY3Rpb246IEFjdGlvbiB8IHZvaWRcblxuICAgICAgY29uc3QgcmVwbGF5T25lID0gKGFjdGlvbjogQWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBFdmVudENvbnN0cnVjdG9yc01hcFthY3Rpb24uZXZlbnQuaXNdIGFzIGFueVxuXG4gICAgICAgIGlmICghY3Rvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTWlzc2luZyBFdmVudCBjb25zdHJ1Y3RvciBmb3I6ICcgKyBhY3Rpb24uZXZlbnQuaXMpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkaXNwYXRjaE9wdGlvbnMgPSBwaWNrKFxuICAgICAgICAgIGFjdGlvbi5ldmVudCxcbiAgICAgICAgICBtdXRhYmxlKGRpc3BhdGNoUHJvcHMpXG4gICAgICAgIClcblxuICAgICAgICBjb25zdCBldmVudDogUG9pbnRlckV2ZW50ID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXG4gICAgICAgICAgbmV3IGN0b3IoYWN0aW9uLmV2ZW50LnR5cGUsIHsgdmlldzogd2luZG93LCAuLi5kaXNwYXRjaE9wdGlvbnMgfSksXG4gICAgICAgICAgY29weUV2ZW50KGFjdGlvbi5ldmVudClcbiAgICAgICAgKVxuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wb2ludGVyRWwuc3R5bGUubGVmdCA9IGV2ZW50LnBhZ2VYICsgJ3B4J1xuICAgICAgICAgIHRoaXMucG9pbnRlckVsLnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4J1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChhY3Rpb24uc2VsZWN0b3JzKSB7XG4gICAgICAgICAgY29uc3QgZWwgPSBzZWxlY3RvcnNUb05vZGUoYWN0aW9uLnNlbGVjdG9ycylcbiAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzc2luZyBub2RlIGZvciBzZWxlY3RvcnM6JywgYWN0aW9uLnNlbGVjdG9ycylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG4gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNraXBwZWQgPSAwXG4gICAgICAgIHRoaXMucmVwbGF5ZWQgPSAwXG5cbiAgICAgICAgYWN0aW9uczogZm9yIChjb25zdCBbaSwgYWN0aW9uXSBvZiBhY3Rpb25zIS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoIXRoaXMucmVwbGF5aW5nKSBicmVha1xuXG4gICAgICAgICAgaWYgKHByZXZBY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGR0ID0gYWN0aW9uLmV2ZW50LnRpbWVTdGFtcCAtIHByZXZBY3Rpb24uZXZlbnQudGltZVN0YW1wXG5cbiAgICAgICAgICAgIC8vIGlmIG5leHQgZXZlbnQgaXMgYmlnZ2VyIHRoYW4gMi8zIG9mIGEgZnJhbWUgdGhlbiB3YWl0XG4gICAgICAgICAgICBpZiAoZHQgPiBGUkFNRV9USU1FICogKDIgLyAzKSkge1xuICAgICAgICAgICAgICAvLyBpZiBsZXNzIHRoYW4gMisoMS8yKSBmcmFtZXMsIHdhaXQgb25lIGZyYW1lXG4gICAgICAgICAgICAgIGlmIChkdCA8IEZSQU1FX1RJTUUgKiAoMiArICgxIC8gMikpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNvbHZlKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3YWl0IHVudGlsIGl0cyB0aW1lIG1pbnVzIDEuNW1zIGZvciBvdXIgaW5pdCB0aW1lXG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZHQgLSAxLjUpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdGhpcyBzZWxlY3RvciBpcyB3aW5kb3cgYW5kIHRhbmdlbnQgZXZlbnQgaXMgdGhlIHNhbWUgZXZlbnQsXG4gICAgICAgICAgLy8gdGhlbiBpdCdzIGEgLmNhcHR1cmUgc28gd2Ugc2tpcCBhbmQgbGV0IGl0IHByb3BhZ2F0ZSBub3JtYWxseS5cbiAgICAgICAgICBjb25zdCBuZXh0QWN0aW9uID0gYWN0aW9ucyEuYXQoaSArIDEpXG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHRhbmdlbnRBY3Rpb24gb2YgYWN0aW9uLmV2ZW50LmNhcHR1cmUgPyBbbmV4dEFjdGlvbl0gOiBbcHJldkFjdGlvbl0pIHtcbiAgICAgICAgICAgIGlmICh0YW5nZW50QWN0aW9uPy5ldmVudC50eXBlID09PSBhY3Rpb24uZXZlbnQudHlwZVxuICAgICAgICAgICAgICAmJiB0YW5nZW50QWN0aW9uLmV2ZW50LnRpbWVTdGFtcCA9PT0gYWN0aW9uLmV2ZW50LnRpbWVTdGFtcCkge1xuICAgICAgICAgICAgICB0aGlzLnNraXBwZWQrK1xuICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc0VsLnF1ZXJ5U2VsZWN0b3IoYCNhY3Rpb24ke2l9YCk/LmNsYXNzTGlzdC5hZGQoJ3JlY29yZGVyLXVpLWV2ZW50LXNraXBwZWQnKVxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRTdGF0dXMoMSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgY29udGludWUgYWN0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlcGxheU9uZShhY3Rpb24pXG4gICAgICAgICAgcHJldkFjdGlvbiA9IGFjdGlvblxuXG4gICAgICAgICAgdGhpcy5yZXBsYXllZCsrXG4gICAgICAgICAgdGhpcy5wYWludFN0YXR1cygxKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXBsYXlPbmUoYWN0aW9ucyFbbl0pXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdlbmQgb2YgcmVwbGF5JylcbiAgICAgIGNvbnNvbGUudGltZUVuZCgncmVwbGF5IHRpbWUnKVxuICAgIH1cblxuICAgIGRvIHtcbiAgICAgIGF3YWl0IHBsYXkoKVxuICAgIH0gd2hpbGUgKHRoaXMucmVwbGF5aW5nICYmIGxvY2FsU3RvcmFnZS5yZWNvcmRlckxvb3AgPT09ICd0cnVlJylcblxuICAgIHRoaXMucmVwbGF5aW5nID0gZmFsc2VcbiAgICB0aGlzLmZvcm1FbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMucG9pbnRlckVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5wYWludENvbnRyb2xzKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgRE9NUmVjb3JkZXIgfSBmcm9tICcuLi9zcmMnXG5cbmRlY2xhcmUgY29uc3Qgd2luZG93OiBhbnlcblxud2luZG93LnJlY29yZGVyID0gbmV3IERPTVJlY29yZGVyKClcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod2luZG93LnJlY29yZGVyLmVsKVxuXG5jb25zdCBidXR0b24gPSBPYmplY3QuYXNzaWduKFxuICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSxcbiAgeyB0ZXh0Q29udGVudDogJ2NsaWNrIG1lJyB9XG4pXG5jb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuY29uc3QgdGV4dGFyZWEgPSBPYmplY3QuYXNzaWduKFxuICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpLFxuICB7IHJvd3M6IDEwLCBzcGVsbGNoZWNrOiBmYWxzZSwgdmFsdWU6ICdjbGljayByZWNvcmQgJiB0eXBlIGluIGhlcmVcXG4nIH1cbilcblxubGV0IHZhbCA9IDBcbmZ1bmN0aW9uIG9uY2xpY2soKSB7XG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9IGBjbGlja3M6ICR7dmFsKyt9YFxufVxuXG5mdW5jdGlvbiBvbmtleWRvd24oZXY6IEtleWJvYXJkRXZlbnQpIHtcbiAgZXYucHJldmVudERlZmF1bHQoKVxuICB0ZXh0YXJlYS52YWx1ZSArPSBldi5rZXlcbn1cblxuZnVuY3Rpb24gb25wb2ludGVybW92ZShldjogUG9pbnRlckV2ZW50KSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgY2lyY2xlLnN0eWxlLmNzc1RleHQgPSAvKmNzcyovYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogJHtldi5wYWdlWCArIDV9cHg7XG4gICAgICB0b3A6ICR7ZXYucGFnZVkgKyAxNX1weDtcbiAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgYmFja2dyb3VuZDogcGluaztcbiAgICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gICAgYFxuICB9KVxufVxuXG5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbmNsaWNrKVxudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9ua2V5ZG93bilcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9ucG9pbnRlcm1vdmUpXG5cbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbilcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2lyY2xlKVxuIl0sIm5hbWVzIjpbImZpbHRlciIsIm9iaiIsImZuIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwib21pdCIsInByb3BzIiwiaW5jbHVkZXNLZXkiLCJpbnZlcnQiLCJrZXkiLCJpbmNsdWRlcyIsImJvb2wiLCJTeW1ib2wiLCJmb3IiLCJ0b0ZsdWVudCIsIlNjaGVtYSIsImNiIiwiYm9vbHMiLCJ4IiwiZmxhZ3MiLCJtYXAiLCJvbWl0dGVkIiwic2V0dGluZ3MiLCJub3QiLCJiaW5kIiwiUHJveHkiLCJnZXQiLCJfIiwicmVjZWl2ZXIiLCJ2YWx1ZSIsImNvbnN0cnVjdCIsImFyZ3MiLCJjdG9yIiwiY2FsbCIsInNlbGYiLCJhcHBseSIsInRoaXMiLCJwaWNrIiwicmVkdWNlIiwicCIsIm4iLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJkZXNjcmlwdG9yIiwib2JqZWN0IiwibmFtZSIsImRlZmluZVByb3BlcnR5IiwiTWFwTWFwIiwiTWFwIiwic2V0Iiwia2V5QSIsImtleUIiLCJoYXMiLCJzaXplIiwiZGVsZXRlIiwiY2xlYXIiLCJtdXRhYmxlIiwiYXJyYXkiXSwibWFwcGluZ3MiOiJBQUlBOzs7Ozs7SUFPTyxNQUFNQSxNQUFNLEdBQUcsQ0FBSUMsR0FBTSxFQUFFQyxFQUFrQixHQUNsREMsTUFBTSxDQUFDQyxXQUFXLENBQ2hCRCxNQUFNLENBQUNFLE9BQU8sQ0FBQ0osR0FBRyxDQUFDLENBQUNELE1BQU0sQ0FBQ0UsRUFBRSxDQUFDLENBQ2pCLENBQUE7QUF3QmpCOzs7Ozs7SUFPTyxNQUFNSSxJQUFJLEdBQUcsQ0FBMkJMLEdBQU0sRUFBRU0sS0FBUSxHQUM3RFAsTUFBTSxDQUFDQyxHQUFHLEVBQUVPLFdBQVcsQ0FBQ0QsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFxQyxDQUFBO0FBRTNFOztJQUdPLE1B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
</script>
  </body>
</html>
