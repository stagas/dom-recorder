<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='47.2' r='34'%0Afill='transparent' stroke='%23fff' stroke-width='7.5' /%3E%3C/svg%3E"
      type="image/svg+xml"
    />
    <title>web</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }

      body {
        --light: #eee;
        --dark: #222;
        --color: var(--dark);
        --background: var(--light);
        color: var(--color);
        background: var(--background)
      }

      @media (prefers-color-scheme: dark) {
        body:not(.light) {
          --color: var(--light);
          --background: var(--dark);
        }
      }

      
    </style>
  </head>
  <body>
    <main></main>
    <script type="module">/**
 * Filter object with filter function `fn`.
 *
 * @param obj Object to filter.
 * @param fn Filter function receiving [key, value].
 * @returns A new object filtered.
 */ const filter = (obj, fn)=>Object.fromEntries(Object.entries(obj).filter(fn));
/**
 * Create a new object with certain properties omitted.
 *
 * @param obj Object to omit from.
 * @param props Properties to omit.
 * @returns A new object with the properties omitted.
 */ const omit = (obj, props)=>filter(obj, includesKey(props, true));
/**
 * @private
 */ const includesKey = (props, invert = false)=>([key])=>invert ^ props.includes(key);

const bool = Symbol.for('to-fluent-bool');
/**
 * Convert a function with a settings object to fluent API.
 *
 * ```ts
 * import { toFluent, bool } from 'to-fluent'
 *
 * const cb = toFluent(
 *   class {
 *     foo = bool // indicate boolean but initially omitted
 *     bar?: string // optional
 *     zoo = 123 // a default
 *   },
 *   settings => () => settings
 * )
 *
 * expect(cb()).toEqual({ zoo: 123 })
 * expect(cb.foo()).toEqual({ foo: true, zoo: 123 })
 * expect(cb.not.foo()).toEqual({ foo: false, zoo: 123 })
 * expect(cb.bar('hello')()).toEqual({ bar: 'hello', zoo: 132 })
 * expect(cb.foo.bar('hello').zoo(456)())
 *   .toEqual({ foo: true, bar: 'hello', zoo: 456 })
 * ```
 */ const toFluent = (Schema, cb)=>{
    const bools = Object.entries(new Schema()).filter(([, x])=>x === bool || typeof x === 'boolean');
    const flags = bools.map(([key])=>key);
    const omitted = bools.filter(([, x])=>x === bool).map(([key])=>key);
    const settings = omit(new Schema(), omitted);
    let not = false;
    const bind = (settings)=>new Proxy(cb, {
            get (_, key, receiver) {
                if (key === 'not') {
                    not = true;
                    return receiver;
                } else if (flags.includes(key)) {
                    const value = not ? false : true;
                    not = false;
                    return bind({
                        ...settings,
                        [key]: value
                    });
                } else {
                    return (value)=>{
                        return bind({
                            ...settings,
                            [key]: value
                        });
                    };
                }
            },
            construct (_, args) {
                const ctor = cb.call(self, {
                    ...settings
                });
                return new ctor(...args);
            },
            apply: (_, self1, args)=>cb.call(self1, {
                    ...settings
                }).apply(self1, args)
        });
    return bind(settings);
};

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

var lib = {};

var __assign = (commonjsGlobal && commonjsGlobal.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (commonjsGlobal && commonjsGlobal.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spreadArray = (commonjsGlobal && commonjsGlobal.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(lib, "__esModule", { value: true });
lib.EventEmitter = void 0;
/**
 * A EventEmitter work like node/event
 */
var EventEmitter =  (function () {
    function EventEmitter() {
        this.listeners = {};
    }
    /**
     * Send Event to all listener
     * @param eventName Event Name
     * @param args arguments
     */
    EventEmitter.prototype.emit = function (eventName) {
        var _this = this;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        if (this.listeners[eventName]) {
            try {
                this.listeners[eventName].forEach(function (item) {
                    if (typeof item.callback === 'function') {
                        item.callback.apply(item, __spreadArray([], __read(args), false));
                    }
                    if (item.once === true) {
                        _this.off(eventName, item.callback);
                    }
                });
            }
            catch (e) { }
        }
        return this;
    };
    /**
     * Add event listener
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.on = function (eventName, callback, options) {
        if (!this.listeners[eventName]) {
            this.listeners[eventName] = [];
        }
        this.listeners[eventName].push(__assign(__assign({}, options), { callback: callback }));
        return this;
    };
    /**
     * Remove event listener
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.off = function (eventName, callback) {
        if (!this.listeners[eventName]) {
            return;
        }
        var index = this.listeners[eventName].findIndex(function (item) { return item.callback === callback; });
        if (index >= 0) {
            this.listeners[eventName].splice(index, 1);
        }
        if (this.listeners[eventName].length === 0) {
            delete this.listeners[eventName];
        }
        return this;
    };
    /**
     * Like on but just run once
     * @param eventName Event Name
     * @param callback Event Callback
     */
    EventEmitter.prototype.once = function (eventName, callback) {
        this.on(eventName, callback, { once: true });
        return this;
    };
    EventEmitter.onceSymbol = Symbol('once');
    return EventEmitter;
}());
lib.EventEmitter = EventEmitter;

/**
 * Pick properties from an object into a new object.
 *
 * @param obj Object to pick from.
 * @param props Properties to pick.
 * @returns A new object with the picked properties.
 */ const pick = (obj, props)=>props.reduce((p, n)=>{
        if (n in obj) p[n] = obj[n];
        return p;
    }, {});

toFluent(class {
    configurable = false;
    enumerable = false;
    writable = bool;
}, (descriptor)=>(object, name, value)=>Object.defineProperty(object, name, value == null ? descriptor : {
            ...descriptor,
            value
        }));
class MapMap {
    #map = new Map();
    set(keyA, keyB, value) {
        if (this.#map.has(keyA)) {
            const map = this.#map.get(keyA);
            map.set(keyB, value);
            return map.size;
        } else {
            this.#map.set(keyA, new Map([
                [
                    keyB,
                    value
                ]
            ]));
            return 1;
        }
    }
    get(keyA, keyB) {
        return this.#map.get(keyA)?.get(keyB);
    }
    delete(keyA, keyB) {
        return this.#map.get(keyA)?.delete(keyB) ?? false;
    }
    has(keyA, keyB) {
        return this.#map.has(keyA) && this.#map.get(keyA).has(keyB);
    }
    clear() {
        return this.#map.clear();
    }
}
const mutable = (array)=>array;

const MIN_IDLE_TIME = parseInt(localStorage.recorderMinIdleTime) || 50;
const FRAME_TIME = 1000 / 60;
const allEvents = [
    ['misc', [
            'blur',
            'focus',
            'click',
            'dblclick',
            'wheel',
            'input',
            'change',
            'contextmenu',
        ]],
    ['pointer', [
            'pointerdown',
            'pointerup',
            'pointermove',
            'pointerover',
            'pointerenter',
            'pointerleave',
            'pointercancel',
        ]],
    ['mouse', [
            'mousedown',
            'mouseup',
            'mousemove',
            'mouseover',
            'mouseenter',
            'mouseleave',
            'mousecancel',
        ]],
    ['keyboard', [
            'keydown',
            'keyup',
            'keypress',
        ]],
];
const copyEventProps = [
    'pointerId',
    'buttons',
    'altKey',
    'ctrlKey',
    'shiftKey',
    'metaKey',
    'pageX',
    'pageY',
    'deltaX',
    'deltaY',
    'key',
    'which',
];
const saveEventProps = [
    'type',
    'timeStamp',
];
const dispatchProps = [
    'bubbles',
    'composed',
    'cancelable',
];
const EventConstructorsMap = {
    InputEvent,
    KeyboardEvent,
    MouseEvent,
    PointerEvent,
    WheelEvent,
};
function copyEvent(event) {
    return Object.fromEntries(copyEventProps.map((key) => [key, { value: event[key] }]));
}
function saveEvent(event, capture) {
    return {
        is: event.constructor.name,
        capture,
        ...Object.fromEntries([...copyEventProps, ...saveEventProps, ...dispatchProps].map((key) => [key, event[key]])),
    };
}
function getElementSelector(el) {
    const parts = [];
    while (el) {
        parts.unshift(el.tagName.toLowerCase());
        const parent = el.parentNode;
        if (parent) {
            // nth-child indexes are 1-based
            const children = [...parent.children];
            if (children.length > 1) {
                const index = children.indexOf(el) + 1;
                if (index) {
                    parts[0] += `:nth-child(${index})`;
                }
            }
        }
        if (el.hasAttribute('part')) {
            const sel = `[part=${el.getAttribute('part')}]`;
            parts[0] += sel;
        }
        if (parent instanceof Element) {
            el = parent;
        }
        else {
            break;
        }
    }
    return parts.join(' > ');
}
function nodeToSelectors(el) {
    if (el instanceof Window)
        return ['window'];
    const selectors = [];
    let rootNode;
    while (rootNode = el.getRootNode()) {
        selectors.unshift(getElementSelector(el));
        if (rootNode === document || rootNode === el)
            break;
        el = rootNode.host;
    }
    return selectors;
}
function selectorsToNode(selectors) {
    let rootNode = document;
    let current, el;
    for (const sel of selectors) {
        if (sel === 'window') {
            return window;
        }
        el = rootNode?.querySelector(sel);
        if (!el)
            return current;
        current = el;
        rootNode = el?.shadowRoot;
        if (!rootNode)
            break;
    }
    return current;
}
const patchEventTarget = () => {
    const original = {
        addEventListener: EventTarget.prototype.addEventListener,
        removeEventListener: EventTarget.prototype.removeEventListener,
    };
    const handler = {
        lastEventTime: 0,
        recording: false,
        onaction: (_action) => { }
    };
    const callbacks = new MapMap();
    function callbackFor(callback, options) {
        if (callbacks.has(callback, options)) {
            return callbacks.get(callback, options);
        }
        function listener(event) {
            const isRecording = handler.recording && (event.constructor.name in EventConstructorsMap);
            let selectors;
            if (isRecording) {
                selectors = nodeToSelectors(this);
            }
            const result = callback.call(this, event);
            // used to detect idle for autoplay
            handler.lastEventTime = event.timeStamp;
            if (isRecording) {
                if (selectors.filter(Boolean).length) {
                    handler.onaction({
                        selectors,
                        event: saveEvent(event, typeof options === 'boolean' ? options : options?.capture)
                    });
                }
                else {
                    console.warn('no selectors', this);
                }
            }
            return result;
        }
        if (typeof options === 'boolean' || !options?.once) {
            callbacks.set(callback, options, listener);
        }
        return listener;
    }
    EventTarget.prototype.addEventListener = function (type, callback, options) {
        const listener = callbackFor(callback, options);
        return original.addEventListener.call(this, type, listener, options);
    };
    EventTarget.prototype.removeEventListener = function (type, callback, options) {
        const listener = callbacks.get(callback, options);
        if (listener) {
            callbacks.delete(callback, options);
            return original.removeEventListener.call(this, type, listener, options);
        }
        else
            return original.removeEventListener.call(this, type, callback, options);
    };
    return handler;
};
const handler = patchEventTarget();
class DOMRecorder {
    actions = [];
    eventTypes = (localStorage.recorderEventTypes
        ?? 'click,pointermove,keydown').split(',');
    enabledGroups = (localStorage.recorderEnabledGroups
        ?? 'misc,pointer,keyboard').split(',');
    el;
    controlsEl;
    statusEl;
    status = '';
    actionsEl;
    events = '';
    formEl;
    pointerEl;
    autoplay = false;
    skipped = 0;
    replayed = 0;
    replaying = false;
    dirtyActions = false;
    unsavedActions = false;
    onBeforeUnload = (event) => {
        if (this.unsavedActions) {
            event.preventDefault();
            return (event.returnValue = 'There are unsaved actions, are you sure you want to exit?');
        }
    };
    constructor() {
        this.render();
        this.getActions().then(() => {
            this.maybeAutoplay();
        });
        window.addEventListener('beforeunload', this.onBeforeUnload, { capture: true });
    }
    render() {
        this.el ??= document.createElement('div');
        this.el.id = 'recorder-ui';
        this.paintEl();
        this.pointerEl = this.el.querySelector('.recorder-ui-pointer');
        this.controlsEl = this.el.querySelector('.recorder-ui-controls');
        this.paintControls();
        this.formEl = this.el.querySelector('form');
        this.paintForm();
        this.actionsEl = this.el.querySelector('details');
        this.paintActions();
        this.paintStatus(0);
        allEvents
            .flatMap(([, events]) => events)
            .map((eventType) => {
            this.el.addEventListener(eventType, (e) => {
                this.autoplay = false;
                e.stopPropagation();
            }, { passive: false });
        });
    }
    paintEl() {
        this.el.innerHTML = /*html*/ `
      <style>
        #recorder-ui {
          --background: #222e;
          position: fixed;
          z-index: 99999999;
          top: 0;
          right: 0;
          user-select: none;
          max-width: 100%;
          display: flex;
          flex-flow: column;
        }
        #recorder-ui * {
          font-family: system-ui;
          font-size: 14px;
        }
        .recorder-ui-controls {
          background: var(--background);
        }
        .recorder-ui-controls,
        .recorder-ui-controls > * {
          display: flex;
          flex-flow: row wrap;
          place-items: center;
        }
        #recorder-ui input[type=checkbox] {
          vertical-align: middle;
        }
        #recorder-ui form {
          background: var(--background);
          overflow: scroll;
          display: flex;
          flex-flow: column;
        }
        #recorder-ui form.hidden {
          display: none;
        }
        #recorder-ui form > div {
          display: flex;
          flex-flow: row;
        }
        #recorder-ui label {
          white-space: nowrap;
        }
        #recorder-ui form fieldset {
          padding: 0;
          display: flex;
          flex-flow: column wrap;
          flex: 1;
        }
        #recorder-ui form fieldset legend {
          text-align: center;
        }
        #recorder-ui form fieldset.recorder-ui-groups {
          flex: 0;
          min-width: 100px;
          justify-content: center;
        }
        #recorder-ui details {
          position: relative;
          max-width: 100%;
          white-space: pre;
        }
        #recorder-ui details[open] {
          height: 200px;
          overflow: scroll;
          resize: vertical;
        }
        #recorder-ui details summary {
          background: #333;
          position: sticky;
          z-index: 1;
          top: 0;
        }
        #recorder-ui details div {
          opacity: 0.15;
        }
        #recorder-ui:hover details {
          background: var(--background);
        }
        #recorder-ui:hover details div {
          opacity: 0.5;
        }
        #recorder-ui details summary:hover,
        #recorder-ui details div:hover {
          color: #000;
          background: #888;
          opacity: 1;
        }
        .recorder-ui-event-skipped {
          color: #777;
        }
        .recorder-ui-pointer {
          position: fixed;
          z-index: 99999999;
          mix-blend-mode: difference;
        }
        .recorder-ui-pointer svg {
          position: relative;
          left: -6px;
          top: -3px;
        }
        .recorder-ui-pointer.hidden {
          display: none;
        }
      </style>
      <div class="recorder-ui-pointer">
        <!-- https://github.com/grommet/grommet-icons/blob/master/public/img/cursor.svg -->
        <svg width="30" height="30" viewBox="0 0 24 24">
        <polygon
          fill="#666a"
          stroke="#fff"
          stroke-width="1.15"
          points="6 3 18 14 13 15 16 20.5 13 22 10 16 6 19"
        />
      </div>
      <div class="recorder-ui-controls"></div>
      <form onchange="recorder.getFormData(this)"></form>
      <details open></details>
    `;
    }
    paintControls() {
        this.controlsEl.innerHTML = /*html*/ `
      <div>
        <button ${this.replaying ? 'disabled' : 'onclick="recorder.startRecording()"'}>record</button>
        <button ${!handler.recording ? 'disabled' : 'onclick="recorder.stopRecording()"'}>stop</button>
      </div>
      &nbsp;
      <div>
        <button ${this.replaying || (!this.actions.length && !handler.recording) ? 'disabled' : 'onclick="recorder.startReplaying()"'}>replay</button>
        <button ${!this.replaying ? 'disabled' : 'onclick="recorder.stopReplaying()"'}>stop</button>
      </div>
      &nbsp;
      <div>
        server:
        <button ${!this.unsavedActions || this.replaying || !this.actions.length || handler.recording ? 'disabled' : 'onclick="recorder.postActions()"'}>post</button>
        <button  ${this.replaying || !this.actions.length || handler.recording ? 'disabled' : 'onclick="recorder.replayServer()"'}>replay</button>
      </div>
      &nbsp;
      <label
        oncontextmenu="event.preventDefault();localStorage.recorderMinIdleTime=parseInt(prompt('Enter idle time(ms) needed for autoplay to begin:', parseInt(localStorage.recorderMinIdleTime) || 50))"
      >
        auto:<input
          type="checkbox"
          onchange="localStorage.recorderAutoplay=this.checked"
          ${localStorage.recorderAutoplay === 'true' ? 'checked' : ''}
        />
      </label>
      <label>
        loop:<input
          type="checkbox"
          onchange="localStorage.recorderLoop=!!this.checked"
          ${localStorage.recorderLoop === 'true' ? 'checked' : ''}
        />
      </label>
    `;
    }
    paintForm() {
        const disabledEvents = allEvents
            .filter(([group]) => !this.enabledGroups.includes(group));
        const enabledEvents = allEvents
            .filter(([group]) => this.enabledGroups.includes(group));
        this.formEl.innerHTML = /*html*/ `
      ${!disabledEvents.length ? '' : /*html*/ `
      <div class="recorder-ui-groups">
        ${disabledEvents.map(([group, events]) => /*html*/ `
        <label>
          <input
            type="checkbox"
            name="enabledGroups[]"
            value="${group}"
          />
          ${group}
        </label>
        ${mutable(events)
            .filter((type) => this.eventTypes.includes(type))
            .map((type) => /*html*/ `
          <input
            type="hidden"
            name="recorderEventTypes[]"
            value="${type}"
          />
        `).join('')}
      `).join('')}
      </div>`}
      <div>
        ${enabledEvents.map(([group, events]) => /*html*/ `
        <fieldset>
          <legend>
            <label>
              <input
                type="checkbox"
                name="enabledGroups[]"
                value="${group}"
                checked
              />
              ${group}
            </label>
          </legend>
          <label>
            <input
              type="checkbox"
              ${mutable(events).every((type) => this.eventTypes.length && this.eventTypes.includes(type)) ? `
                checked
                onclick="recorder.deselectAll('${group}')"
              ` : `
                onclick="recorder.selectAll('${group}')"
              `}
            />
            all ${group}
          </label>
          ${events.map((type) => /*html*/ `
          <label>
            <input
              type="checkbox"
              name="recorderEventTypes[]"
              value="${type}"
              ${this.eventTypes.includes(type) ? 'checked' : ''}
            />
            ${type}
          </label>
          `).join('')}
        </fieldset>`).join('')}
      </div>
    `;
    }
    paintActions() {
        if (this.actions.length) {
            const firstTimeStamp = this.actions[0].event.timeStamp | 0;
            this.actionsEl.innerHTML = this.actions.map((action, index) => `<div id="action${index}" onclick="recorder.showDetails(this)">${(action.event.timeStamp | 0) - firstTimeStamp} ${action.event.type} ${action.selectors.at(-1).split(' > ').pop()}</div>`).join('');
        }
        this.actionsEl.prepend(this.statusEl ??= document.createElement('summary'));
        this.actionsEl.open = true;
    }
    paintStatus(kind) {
        let status;
        if (kind === 1) {
            status = `${this.actions.length - this.replayed - this.skipped} remaining (${this.skipped} skipped, ${this.actions.length} total)`;
        }
        else {
            status = `${this.actions.length} actions, ${this.skipped} skipped`;
        }
        requestAnimationFrame(() => {
            this.statusEl.textContent = this.status = status;
        });
    }
    async waitUntilIdle() {
        while (performance.now() - handler.lastEventTime < MIN_IDLE_TIME) {
            await new Promise((resolve) => setTimeout(resolve, 50));
        }
    }
    async maybeAutoplay() {
        if (!this.actions.length)
            return;
        if (localStorage.recorderAutoplay === 'true') {
            this.autoplay = true;
            await this.waitUntilIdle();
            if (this.autoplay) {
                this.startReplaying();
            }
        }
    }
    getFormData(form) {
        const formData = new FormData(form);
        this.eventTypes = localStorage.recorderEventTypes = formData.getAll('recorderEventTypes[]');
        this.enabledGroups = localStorage.recorderEnabledGroups = formData.getAll('enabledGroups[]');
        this.paintForm();
    }
    selectAll(group) {
        this.eventTypes = localStorage.recorderEventTypes = [...new Set([
                ...this.eventTypes,
                ...allEvents
                    .find(([g]) => group === g)[1]
            ])];
        this.paintForm();
    }
    deselectAll(group) {
        const toDeselect = allEvents
            .find(([g]) => group === g)[1];
        this.eventTypes = localStorage.recorderEventTypes = this.eventTypes.filter((type) => !toDeselect.includes(type));
        this.paintForm();
    }
    showDetails(el) {
        if (el.dataset.expanded === 'true')
            return;
        el.dataset.expanded = 'true';
        const action = this.actions[+el.id.split('action').pop()];
        const eventDetails = `\n${action.selectors.join('\n > ')}\n${JSON.stringify(action.event, null, 2)}`;
        this.actionsEl.querySelector(`#${el.id}`).append(eventDetails);
    }
    async postActions() {
        this.stopRecording();
        const res = await fetch(new URL('/store?key=recorder-actions', location.origin), {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(this.actions)
        });
        if (!res.ok) {
            console.warn(res);
        }
        else {
            this.unsavedActions = false;
            this.paintControls();
            console.log('posted');
        }
    }
    async getActions() {
        const res = await fetch(new URL('/store?key=recorder-actions', location.origin), {
            method: 'GET',
            headers: {
                'Accept': 'application/json'
            }
        });
        if (!res.ok) {
            console.warn(res);
        }
        else {
            const json = await res.json();
            this.actions = json;
            this.paintActions();
            this.paintControls();
            this.paintStatus(0);
        }
    }
    async replayServer() {
        await this.getActions();
        this.startReplaying();
    }
    startRecording() {
        if (this.replaying)
            return;
        const ownUISelector = getElementSelector(this.el);
        this.actionsEl.open = false;
        this.formEl.classList.add('hidden');
        this.actions.splice(0);
        this.skipped = 0;
        this.dirtyActions = true;
        this.unsavedActions = true;
        handler.recording = true;
        this.paintControls();
        this.paintStatus(0);
        let prev;
        handler.onaction = (action) => {
            if (action.selectors.includes(ownUISelector))
                return false;
            if (!this.eventTypes.includes(action.event.type)
                || !this.enabledGroups.includes(allEvents.find(([, events]) => events.includes(action.event.type))[0])) {
                this.skipped++;
            }
            else {
                if (!prev
                    || action.event.timeStamp !== prev.event.timeStamp
                    || action.event.type !== prev.event.type
                    || action.selectors.join(':::') !== prev.selectors.join(':::')
                    || JSON.stringify(action.event) !== JSON.stringify(prev.event)) {
                    this.actions.push(prev = action);
                }
            }
            this.paintStatus(0);
        };
    }
    stopRecording() {
        if (this.replaying)
            return;
        handler.recording = false;
        if (this.dirtyActions) {
            this.formEl.classList.remove('hidden');
            this.trimActions();
            this.paintActions();
            this.paintControls();
            this.dirtyActions = false;
        }
    }
    trimActions() {
        let last = this.actions.at(-1);
        if (last?.selectors[0] === 'window'
            && last.event.type === 'pointerdown') {
            this.actions.pop();
            while (last = this.actions.at(-1)) {
                if (last.selectors[0] !== 'window'
                    || last.event.type !== 'pointermove') {
                    break;
                }
                this.actions.pop();
            }
        }
        this.paintStatus(0);
    }
    stopReplaying() {
        this.replaying = false;
        this.stopRecording();
    }
    async startReplaying(n, actions) {
        if (this.replaying)
            return;
        this.stopRecording();
        this.replaying = true;
        this.actionsEl.open = false;
        this.formEl.classList.add('hidden');
        this.pointerEl.classList.remove('hidden');
        this.paintControls();
        actions ??= this.actions;
        const play = async () => {
            console.log('start of replay');
            console.time('replay time');
            this.statusEl.textContent = `${actions.length} remaining`;
            let prevAction;
            const replayOne = (action) => {
                const ctor = EventConstructorsMap[action.event.is];
                if (!ctor) {
                    console.warn('Missing Event constructor for: ' + action.event.is);
                    return;
                }
                const dispatchOptions = pick(action.event, mutable(dispatchProps));
                const event = Object.defineProperties(new ctor(action.event.type, { view: window, ...dispatchOptions }), copyEvent(action.event));
                requestAnimationFrame(() => {
                    this.pointerEl.style.left = event.pageX + 'px';
                    this.pointerEl.style.top = event.pageY + 'px';
                });
                if (action.selectors) {
                    const el = selectorsToNode(action.selectors);
                    if (el) {
                        el.dispatchEvent(event);
                    }
                    else {
                        console.warn('Missing node for selectors:', action.selectors);
                    }
                }
            };
            if (n == null) {
                this.skipped = 0;
                this.replayed = 0;
                actions: for (const [i, action] of actions.entries()) {
                    if (!this.replaying)
                        break;
                    if (prevAction) {
                        const dt = action.event.timeStamp - prevAction.event.timeStamp;
                        // if next event is bigger than 2/3 of a frame then wait
                        if (dt > FRAME_TIME * (2 / 3)) {
                            // if less than 2+(1/2) frames, wait one frame
                            if (dt < FRAME_TIME * (2 + (1 / 2))) {
                                await new Promise((resolve) => requestAnimationFrame(resolve));
                            }
                            else {
                                // wait until its time minus 1.5ms for our init time
                                await new Promise((resolve) => setTimeout(resolve, dt - 1.5));
                            }
                        }
                    }
                    // this selector is window and tangent event is the same event,
                    // then it's a .capture so we skip and let it propagate normally.
                    const nextAction = actions.at(i + 1);
                    for (const tangentAction of action.event.capture ? [nextAction] : [prevAction]) {
                        if (tangentAction?.event.type === action.event.type
                            && tangentAction.event.timeStamp === action.event.timeStamp) {
                            this.skipped++;
                            requestAnimationFrame(() => {
                                this.actionsEl.querySelector(`#action${i}`)?.classList.add('recorder-ui-event-skipped');
                                this.paintStatus(1);
                            });
                            continue actions;
                        }
                    }
                    replayOne(action);
                    prevAction = action;
                    this.replayed++;
                    this.paintStatus(1);
                }
            }
            else {
                replayOne(actions[n]);
            }
            console.log('end of replay');
            console.timeEnd('replay time');
        };
        do {
            await play();
        } while (this.replaying && localStorage.recorderLoop === 'true');
        this.replaying = false;
        this.formEl.classList.remove('hidden');
        this.pointerEl.classList.add('hidden');
        this.paintControls();
    }
}

window.recorder = new DOMRecorder();
document.body.appendChild(window.recorder.el);
const button = Object.assign(document.createElement('button'), { textContent: 'click me' });
const circle = document.createElement('div');
const textarea = Object.assign(document.createElement('textarea'), { rows: 10, spellcheck: false, value: 'click record & type in here\n' });
let val = 0;
function onclick() {
    button.textContent = `clicks: ${val++}`;
}
function onkeydown(ev) {
    ev.preventDefault();
    textarea.value += ev.key;
}
function onpointermove(ev) {
    requestAnimationFrame(() => {
        circle.style.cssText = /*css*/ `
      position: absolute;
      left: ${ev.pageX + 5}px;
      top: ${ev.pageY + 15}px;
      width: 30px;
      height: 30px;
      background: pink;
      border-radius: 100%;
    `;
    });
}
button.addEventListener('click', onclick);
textarea.addEventListener('keydown', onkeydown);
window.addEventListener('pointermove', onpointermove);
document.body.appendChild(textarea);
document.body.appendChild(button);
document.body.appendChild(circle);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLmpzIiwic291cmNlcyI6WyIuLi9waWNrLW9taXQvc3JjL3BpY2stb21pdC50cyIsIi4uL3RvLWZsdWVudC9zcmMvdG8tZmx1ZW50LnRzIiwiLi4vLi4vLi4vLmZhc3RwbS8tL2V2ZW50ZW1pdHRlci1zdHJpY3RAMS4wLjEvbGliL2luZGV4LmpzIiwiLi4vLi4vLi4vLmZhc3RwbS8tL3BpY2stb21pdEAyLjAuMS9zcmMvcGljay1vbWl0LnRzIiwiLi4vZXZlcnlkYXktdXRpbHMvc3JjL2V2ZXJ5ZGF5LXV0aWxzLnRzIiwic3JjL2RvbS1yZWNvcmRlci50cyIsImV4YW1wbGUvd2ViLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vbk51bGwsIE9iamVjdEZyb21MaXN0IH0gZnJvbSAnZXZlcnlkYXktdHlwZXMnXG5cbmV4cG9ydCB0eXBlIE9iamVjdEZpbHRlckZuID0gKGVudHJ5OiBbc3RyaW5nLCB1bmtub3duXSkgPT4gYm9vbGVhblxuXG4vKipcbiAqIEZpbHRlciBvYmplY3Qgd2l0aCBmaWx0ZXIgZnVuY3Rpb24gYGZuYC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBmaWx0ZXIuXG4gKiBAcGFyYW0gZm4gRmlsdGVyIGZ1bmN0aW9uIHJlY2VpdmluZyBba2V5LCB2YWx1ZV0uXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3QgZmlsdGVyZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBmaWx0ZXIgPSA8VD4ob2JqOiBULCBmbjogT2JqZWN0RmlsdGVyRm4pOiBQYXJ0aWFsPFQ+ID0+XG4gIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcihmbilcbiAgKSBhcyBQYXJ0aWFsPFQ+XG5cbi8qKlxuICogRmlsdGVyIG91dCBudWxsaXNoIHZhbHVlcyBmcm9tIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBmaWx0ZXIuXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aG91dCB0aGUgbnVsbCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBub25OdWxsID0gPFQ+KG9iajogVCk6IFBpY2s8VCwga2V5b2YgTm9uTnVsbDxUPj4gPT5cbiAgZmlsdGVyKG9iaiwgKFssIHZhbHVlXSkgPT4gdmFsdWUgIT0gbnVsbCkgYXMgUGljazxULCBrZXlvZiBOb25OdWxsPFQ+PlxuXG4vKipcbiAqIFBpY2sgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdCBpbnRvIGEgbmV3IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqIE9iamVjdCB0byBwaWNrIGZyb20uXG4gKiBAcGFyYW0gcHJvcHMgUHJvcGVydGllcyB0byBwaWNrLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggdGhlIHBpY2tlZCBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgY29uc3QgcGljayA9IDxULCBLIGV4dGVuZHMgKGtleW9mIFQpW10+KG9iajogVCwgcHJvcHM6IEspOiBQaWNrPFQsIGtleW9mIE9iamVjdEZyb21MaXN0PEs+PiA9PlxuICBwcm9wcy5yZWR1Y2UoKHAsIG4pID0+IHtcbiAgICBpZiAobiBpbiBvYmopIHBbbl0gPSBvYmpbbl1cbiAgICByZXR1cm4gcFxuICB9LCB7fSBhcyBhbnkpIGFzIFBpY2s8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG9iamVjdCB3aXRoIGNlcnRhaW4gcHJvcGVydGllcyBvbWl0dGVkLlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIG9taXQgZnJvbS5cbiAqIEBwYXJhbSBwcm9wcyBQcm9wZXJ0aWVzIHRvIG9taXQuXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydGllcyBvbWl0dGVkLlxuICovXG5leHBvcnQgY29uc3Qgb21pdCA9IDxULCBLIGV4dGVuZHMgKGtleW9mIFQpW10+KG9iajogVCwgcHJvcHM6IEspOiBPbWl0PFQsIGtleW9mIE9iamVjdEZyb21MaXN0PEs+PiA9PlxuICBmaWx0ZXIob2JqLCBpbmNsdWRlc0tleShwcm9wcywgdHJ1ZSkpIGFzIE9taXQ8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IGluY2x1ZGVzS2V5ID0gPEsgZXh0ZW5kcyB1bmtub3duW10+KHByb3BzOiBLLCBpbnZlcnQgPSBmYWxzZSk6IE9iamVjdEZpbHRlckZuID0+XG4gIChba2V5XSkgPT4gKChpbnZlcnQgYXMgYW55KSBeIChwcm9wcy5pbmNsdWRlcyhrZXkpIGFzIGFueSkpIGFzIHVua25vd24gYXMgYm9vbGVhblxuIiwiaW1wb3J0IHsgb21pdCB9IGZyb20gJ3BpY2stb21pdCdcblxuaW1wb3J0IHR5cGUgeyBDbGFzcywgRm4gfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgRmx1ZW50PEMsIFQ+ID1cbiAgJiBDXG4gICYge1xuICAgIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBib29sZWFuID8gRmx1ZW50PEMsIFQ+XG4gICAgOiBGbjxbVFtLXV0sIEZsdWVudDxDLCBUPj5cbiAgfVxuICAmIHtcbiAgICBub3Q6IHtcbiAgICAgIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBib29sZWFuID8gRmx1ZW50PEMsIFQ+XG4gICAgICA6IG5ldmVyXG4gICAgfVxuICB9XG5cbmV4cG9ydCBjb25zdCBib29sID0gU3ltYm9sLmZvcigndG8tZmx1ZW50LWJvb2wnKSBhcyB1bmtub3duIGFzIGJvb2xlYW5cblxuLyoqXG4gKiBDb252ZXJ0IGEgZnVuY3Rpb24gd2l0aCBhIHNldHRpbmdzIG9iamVjdCB0byBmbHVlbnQgQVBJLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyB0b0ZsdWVudCwgYm9vbCB9IGZyb20gJ3RvLWZsdWVudCdcbiAqXG4gKiBjb25zdCBjYiA9IHRvRmx1ZW50KFxuICogICBjbGFzcyB7XG4gKiAgICAgZm9vID0gYm9vbCAvLyBpbmRpY2F0ZSBib29sZWFuIGJ1dCBpbml0aWFsbHkgb21pdHRlZFxuICogICAgIGJhcj86IHN0cmluZyAvLyBvcHRpb25hbFxuICogICAgIHpvbyA9IDEyMyAvLyBhIGRlZmF1bHRcbiAqICAgfSxcbiAqICAgc2V0dGluZ3MgPT4gKCkgPT4gc2V0dGluZ3NcbiAqIClcbiAqXG4gKiBleHBlY3QoY2IoKSkudG9FcXVhbCh7IHpvbzogMTIzIH0pXG4gKiBleHBlY3QoY2IuZm9vKCkpLnRvRXF1YWwoeyBmb286IHRydWUsIHpvbzogMTIzIH0pXG4gKiBleHBlY3QoY2Iubm90LmZvbygpKS50b0VxdWFsKHsgZm9vOiBmYWxzZSwgem9vOiAxMjMgfSlcbiAqIGV4cGVjdChjYi5iYXIoJ2hlbGxvJykoKSkudG9FcXVhbCh7IGJhcjogJ2hlbGxvJywgem9vOiAxMzIgfSlcbiAqIGV4cGVjdChjYi5mb28uYmFyKCdoZWxsbycpLnpvbyg0NTYpKCkpXG4gKiAgIC50b0VxdWFsKHsgZm9vOiB0cnVlLCBiYXI6ICdoZWxsbycsIHpvbzogNDU2IH0pXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHRvRmx1ZW50ID0gPFxuICBUIGV4dGVuZHMgQ2xhc3M8YW55PixcbiAgQyBleHRlbmRzIEZuPGFueSwgYW55PixcbiAgUyBleHRlbmRzIEluc3RhbmNlVHlwZTxUPixcbj4oXG4gIFNjaGVtYTogVCxcbiAgY2I6IChzZXR0aW5nczogUykgPT4gQyxcbikgPT4ge1xuICBjb25zdCBib29scyA9IE9iamVjdC5lbnRyaWVzKG5ldyBTY2hlbWEoKSkuZmlsdGVyKChbLCB4XSkgPT4geCA9PT0gYm9vbCB8fCB0eXBlb2YgeCA9PT0gJ2Jvb2xlYW4nKVxuICBjb25zdCBmbGFncyA9IGJvb2xzLm1hcCgoW2tleV0pID0+IGtleSlcbiAgY29uc3Qgb21pdHRlZCA9IGJvb2xzLmZpbHRlcigoWywgeF0pID0+IHggPT09IGJvb2wpLm1hcCgoW2tleV0pID0+IGtleSlcblxuICBjb25zdCBzZXR0aW5ncyA9IG9taXQobmV3IFNjaGVtYSgpLCBvbWl0dGVkKSBhcyBTXG5cbiAgbGV0IG5vdCA9IGZhbHNlXG5cbiAgY29uc3QgYmluZCA9IChzZXR0aW5nczogUyk6IEZsdWVudDxDLCBSZXF1aXJlZDxTPj4gPT5cbiAgICBuZXcgUHJveHkoY2IsIHtcbiAgICAgIGdldChfLCBrZXk6IHN0cmluZywgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ25vdCcpIHtcbiAgICAgICAgICBub3QgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIHJlY2VpdmVyXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZ3MuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gbm90ID8gZmFsc2UgOiB0cnVlXG4gICAgICAgICAgbm90ID0gZmFsc2VcbiAgICAgICAgICByZXR1cm4gYmluZCh7IC4uLnNldHRpbmdzLCBba2V5XTogdmFsdWUgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kKHsgLi4uc2V0dGluZ3MsIFtrZXldOiB2YWx1ZSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnN0cnVjdChfLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjYi5jYWxsKHNlbGYsIHsgLi4uc2V0dGluZ3MgfSkgYXMgYW55XG4gICAgICAgIHJldHVybiBuZXcgY3RvciguLi5hcmdzKVxuICAgICAgfSxcbiAgICAgIGFwcGx5OiAoXywgc2VsZiwgYXJncykgPT4gY2IuY2FsbChzZWxmLCB7IC4uLnNldHRpbmdzIH0pLmFwcGx5KHNlbGYsIGFyZ3MpLFxuICAgIH0pIGFzIEZsdWVudDxDLCBSZXF1aXJlZDxTPj5cblxuICByZXR1cm4gYmluZChzZXR0aW5ncylcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEEgRXZlbnRFbWl0dGVyIHdvcmsgbGlrZSBub2RlL2V2ZW50XHJcbiAqL1xyXG52YXIgRXZlbnRFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgRXZlbnQgdG8gYWxsIGxpc3RlbmVyXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBhcmdzIGFyZ3VtZW50c1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jYWxsYmFjay5hcHBseShpdGVtLCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm9uY2UgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgaXRlbS5jYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSBFdmVudCBOYW1lXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgRXZlbnQgQ2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBjYWxsYmFjazogY2FsbGJhY2sgfSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBFdmVudCBDYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uY2FsbGJhY2sgPT09IGNhbGxiYWNrOyB9KTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaWtlIG9uIGJ1dCBqdXN0IHJ1biBvbmNlXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIEV2ZW50IE5hbWVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBFdmVudCBDYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub24oZXZlbnROYW1lLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEV2ZW50RW1pdHRlci5vbmNlU3ltYm9sID0gU3ltYm9sKCdvbmNlJyk7XHJcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcclxuIiwiaW1wb3J0IHsgTm9uTnVsbCwgT2JqZWN0RnJvbUxpc3QgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgT2JqZWN0RmlsdGVyRm4gPSAoZW50cnk6IFtzdHJpbmcsIHVua25vd25dKSA9PiBib29sZWFuXG5cbi8qKlxuICogRmlsdGVyIG9iamVjdCB3aXRoIGZpbHRlciBmdW5jdGlvbiBgZm5gLlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIGZpbHRlci5cbiAqIEBwYXJhbSBmbiBGaWx0ZXIgZnVuY3Rpb24gcmVjZWl2aW5nIFtrZXksIHZhbHVlXS5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCBmaWx0ZXJlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGZpbHRlciA9IDxUPihvYmo6IFQsIGZuOiBPYmplY3RGaWx0ZXJGbik6IFBhcnRpYWw8VD4gPT5cbiAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKGZuKVxuICApIGFzIFBhcnRpYWw8VD5cblxuLyoqXG4gKiBGaWx0ZXIgb3V0IG51bGxpc2ggdmFsdWVzIGZyb20gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIGZpbHRlci5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRob3V0IHRoZSBudWxsIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vbk51bGwgPSA8VD4ob2JqOiBUKTogUGljazxULCBrZXlvZiBOb25OdWxsPFQ+PiA9PlxuICBmaWx0ZXIob2JqLCAoWywgdmFsdWVdKSA9PiB2YWx1ZSAhPSBudWxsKSBhcyBQaWNrPFQsIGtleW9mIE5vbk51bGw8VD4+XG5cbi8qKlxuICogUGljayBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0IGludG8gYSBuZXcgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIHBpY2sgZnJvbS5cbiAqIEBwYXJhbSBwcm9wcyBQcm9wZXJ0aWVzIHRvIHBpY2suXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aCB0aGUgcGlja2VkIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBwaWNrID0gPFQsIEsgZXh0ZW5kcyAoa2V5b2YgVClbXT4ob2JqOiBULCBwcm9wczogSyk6IFBpY2s8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+ID0+XG4gIHByb3BzLnJlZHVjZSgocCwgbikgPT4ge1xuICAgIGlmIChuIGluIG9iaikgcFtuXSA9IG9ialtuXVxuICAgIHJldHVybiBwXG4gIH0sIHt9IGFzIGFueSkgYXMgUGljazxULCBrZXlvZiBPYmplY3RGcm9tTGlzdDxLPj5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgb2JqZWN0IHdpdGggY2VydGFpbiBwcm9wZXJ0aWVzIG9taXR0ZWQuXG4gKlxuICogQHBhcmFtIG9iaiBPYmplY3QgdG8gb21pdCBmcm9tLlxuICogQHBhcmFtIHByb3BzIFByb3BlcnRpZXMgdG8gb21pdC5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIG9taXR0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBvbWl0ID0gPFQsIEsgZXh0ZW5kcyAoa2V5b2YgVClbXT4ob2JqOiBULCBwcm9wczogSyk6IE9taXQ8VCwga2V5b2YgT2JqZWN0RnJvbUxpc3Q8Sz4+ID0+XG4gIGZpbHRlcihvYmosIGluY2x1ZGVzS2V5KHByb3BzLCB0cnVlKSkgYXMgT21pdDxULCBrZXlvZiBPYmplY3RGcm9tTGlzdDxLPj5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgaW5jbHVkZXNLZXkgPSA8SyBleHRlbmRzIHVua25vd25bXT4ocHJvcHM6IEssIGludmVydCA9IGZhbHNlKTogT2JqZWN0RmlsdGVyRm4gPT5cbiAgKFtrZXldKSA9PiAoKGludmVydCBhcyBhbnkpIF4gKHByb3BzLmluY2x1ZGVzKGtleSkgYXMgYW55KSkgYXMgdW5rbm93biBhcyBib29sZWFuXG4iLCJpbXBvcnQgeyBib29sLCB0b0ZsdWVudCB9IGZyb20gJ3RvLWZsdWVudCdcblxuZXhwb3J0ICogZnJvbSAndG8tZmx1ZW50J1xuZXhwb3J0ICogZnJvbSAnZXZlbnRlbWl0dGVyLXN0cmljdCdcbmV4cG9ydCAqIGZyb20gJ2RlZXAtbXV0YXRlLW9iamVjdCdcbmV4cG9ydCAqIGZyb20gJ3BpY2stb21pdCdcbmV4cG9ydCB7IGRlZmF1bHQgYXMgaXNFcXVhbCB9IGZyb20gJy4vaXMtZXF1YWwnXG5cbmltcG9ydCB0eXBlIHsgQ2h1bmssIENsYXNzLCBGbiwgU3RyaW5nT2YgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IGNvbnN0IGNodW5rID0gPFQsIEwgZXh0ZW5kcyBudW1iZXI+KGFycjogVFtdLCBzaXplOiBMKTogQ2h1bms8VCwgTD5bXSA9PiB7XG4gIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLmNlaWwoYXJyLmxlbmd0aCAvIHNpemUpIHwgMCB9LCAoXywgaSkgPT4ge1xuICAgIGNvbnN0IHBvczogbnVtYmVyID0gaSAqIHNpemVcbiAgICByZXR1cm4gYXJyLnNsaWNlKHBvcywgcG9zICsgc2l6ZSlcbiAgfSkgYXMgQ2h1bms8VCwgTD5bXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW50cmllczxLIGV4dGVuZHMga2V5b2YgVCxcbiAgViBleHRlbmRzIFRbS10sXG4gIFQgZXh0ZW5kcyB7IFtzOiBzdHJpbmddOiBhbnkgfT4ob2JqOiBUKTogcmVhZG9ubHkgW0ssIFZdW11cbmV4cG9ydCBmdW5jdGlvbiBlbnRyaWVzPEsgZXh0ZW5kcyBrZXlvZiBULFxuICBWIGV4dGVuZHMgVFtLXSxcbiAgVCBleHRlbmRzIEFycmF5TGlrZTxhbnk+PihvYmo6IFQpOiByZWFkb25seSBbSywgVl1bXVxuZXhwb3J0IGZ1bmN0aW9uIGVudHJpZXM8SyBleHRlbmRzIGtleW9mIFQsXG4gIFYgZXh0ZW5kcyBUW0tdLFxuICBUIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0gfCBBcnJheUxpa2U8YW55Pj4ob2JqOiBUKTogcmVhZG9ubHkgW0ssIFZdW10ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKSBhcyB1bmtub3duIGFzIHJlYWRvbmx5IFtLLCBWXVtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBrZXlzPEsgZXh0ZW5kcyBrZXlvZiBULFxuICBUIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0+KG9iajogVCk6IHJlYWRvbmx5IEtbXVxuZXhwb3J0IGZ1bmN0aW9uIGtleXM8SyBleHRlbmRzIGtleW9mIFQsXG4gIFQgZXh0ZW5kcyBBcnJheUxpa2U8YW55Pj4ob2JqOiBUKTogcmVhZG9ubHkgS1tdXG5leHBvcnQgZnVuY3Rpb24ga2V5czxLIGV4dGVuZHMga2V5b2YgVCxcbiAgVCBleHRlbmRzIHsgW3M6IHN0cmluZ106IGFueSB9IHwgQXJyYXlMaWtlPGFueT4+KG9iajogVCk6IHJlYWRvbmx5IEtbXSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopIGFzIHVua25vd24gYXMgcmVhZG9ubHkgS1tdXG59XG5cbmV4cG9ydCBjb25zdCBmcm9tRW50cmllcyA9IDxLIGV4dGVuZHMgc3RyaW5nLCBWPihlbnRyaWVzOiByZWFkb25seSBbSywgVl1bXSkgPT5cbiAgT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMpIGFzIFJlY29yZDxLLCBWPlxuXG5leHBvcnQgY29uc3QgY2hlYXBSYW5kb21JZCA9ICgpID0+IGAke1N0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBNYXRoLnJhbmRvbSgpICogMjUpfSR7KE1hdGgucmFuZG9tKCkgKiAxMGU3IHwgMCkudG9TdHJpbmcoMzYpfWBcblxuZXhwb3J0IGNvbnN0IGFjY2Vzc29ycyA9IDxTIGV4dGVuZHMgeyBbczogc3RyaW5nXTogYW55IH0sIFQ+KFxuICB0YXJnZXQ6IFQsXG4gIHNvdXJjZTogUyxcbiAgZm46IChrZXk6IFN0cmluZ09mPGtleW9mIFM+LCB2YWx1ZTogU1tTdHJpbmdPZjxrZXlvZiBTPl0pID0+IFByb3BlcnR5RGVzY3JpcHRvcixcbiAgZmlsdGVyOiAoa2V5OiBTdHJpbmdPZjxrZXlvZiBTPiwgdmFsdWU6IFNbU3RyaW5nT2Y8a2V5b2YgUz5dKSA9PiBib29sZWFuID0gKCkgPT4gdHJ1ZSxcbikgPT4ge1xuICBjb25zdCBwcmV2RGVzYyA9IG5ldyBNYXAoKVxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhcbiAgICB0YXJnZXQsXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgKGVudHJpZXMoc291cmNlKVxuICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIGFzIFtcbiAgICAgICAgICBTdHJpbmdPZjxrZXlvZiBTPixcbiAgICAgICAgICBTW1N0cmluZ09mPGtleW9mIFM+XSxcbiAgICAgICAgXVtdKVxuICAgICAgICAuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+IGZpbHRlcihrZXksIHZhbHVlKSlcbiAgICAgICAgLm1hcChcbiAgICAgICAgICAoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gZm4oa2V5LCB2YWx1ZSkgYXMgYW55XG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSlcbiAgICAgICAgICAgIHByZXZEZXNjLnNldChrZXksIHByZXYpXG4gICAgICAgICAgICBpZiAocHJldiAmJiBwcmV2LmdldCAmJiBwcmV2LnNldCkge1xuICAgICAgICAgICAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBuZXh0XG4gICAgICAgICAgICAgIG5leHQuZ2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJ1biBib3RoIGdldHRlcnMgaWYgYW55LCBmb3Igc2lkZS1lZmZlY3RzIHRvIHJ1blxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIHJldmlzaXRlZCwgd2hhdCBzaG91bGQgYmVcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29ycmVjdCBiZWhhdmlvciBoZXJlPyBtYXliZSBwYXNzIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgIC8vIGdldHRlciBhcyBhIHBhcmFtIHRvIHRoZSBuZXh0IG9uZSBhbmQgbGV0IHRoZW0gZGVjaWRlP1xuICAgICAgICAgICAgICAgIC8vIHdoYXQgc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGJlaGF2aW9yPyB0aGlzIHNlZW1zIHdyb25nXG4gICAgICAgICAgICAgICAgLy8gYnV0IGl0IHdvcmtzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IGdldD8uKClcbiAgICAgICAgICAgICAgICBjb25zdCBiZWxvdyA9IHByZXYuZ2V0ISgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJlbG93ID8/IHRvcFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5leHQuc2V0ID0gKHY6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHByZXYuc2V0Py4odilcbiAgICAgICAgICAgICAgICBzZXQocHJldi5nZXQ/LigpID8/IHYpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIT8gJ2NyZWF0ZSBhY2Nlc3NvcicsIGtleSwgcHJldiwgbmV4dFxuICAgICAgICAgICAgcmV0dXJuIFtrZXksIHtcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAuLi5uZXh0LFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICApXG4gIClcbiAgcmV0dXJuICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGRlc2NdIG9mIHByZXZEZXNjKSB7XG4gICAgICAvLyE/ICdyZW1vdmluZyBhY2Nlc3NvcicsIGtleSwgZGVzY1xuICAgICAgaWYgKGRlc2MgPT0gbnVsbCkge1xuICAgICAgICBkZWxldGUgKHRhcmdldCBhcyBhbnkpW2tleV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnN0IG5ld1ZhbHVlID0gKHRhcmdldCBhcyBhbnkpW2tleV1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjKVxuICAgICAgICAvLyA7KHRhcmdldCBhcyBhbnkpW2tleV0gPSBuZXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qga2ViYWIgPSAoczogc3RyaW5nKSA9PiBzLnJlcGxhY2UoL1thLXpdKD89W0EtWl0pfFtBLVpdKyg/PVtBLVpdW2Etel0pL2csICckJi0nKS50b0xvd2VyQ2FzZSgpXG5cbmV4cG9ydCBjb25zdCBzdHlsZVRvQ3NzID0gKHN0eWxlOiBDU1NTdHlsZURlY2xhcmF0aW9uKSA9PiB7XG4gIGxldCBjc3MgPSAnJ1xuICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZSlcbiAgICBjc3MgKz0gc3R5bGVba2V5XVxuICAgICAgPyBrZWJhYihrZXkpICsgJzonICsgc3R5bGVba2V5XSArICc7J1xuICAgICAgOiAnJ1xuICByZXR1cm4gY3NzXG59XG5cbmV4cG9ydCBjb25zdCBzaHVmZmxlID0gPFQ+KGFycjogVFtdKTogVFtdID0+IGFyci5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpXG5cbmV4cG9ydCBjb25zdCBhc3luY1NlcmlhbE1hcCA9IGFzeW5jIDxULCBVPihcbiAgYXJyOiBUW10sXG4gIGZuOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiBUW10pID0+IFByb21pc2U8VT4sXG4pOiBQcm9taXNlPFVbXT4gPT4ge1xuICBjb25zdCByZXN1bHRzOiBVW10gPSBbXVxuICBmb3IgKGNvbnN0IFtpLCBpdGVtXSBvZiBhcnIuZW50cmllcygpKSB7XG4gICAgcmVzdWx0cy5wdXNoKGF3YWl0IGZuKGl0ZW0sIGksIGFycikpXG4gIH1cbiAgcmV0dXJuIHJlc3VsdHNcbn1cblxuZXhwb3J0IGNvbnN0IGFzeW5jU2VyaWFsUmVkdWNlID0gYXN5bmMgPFQsIFU+KFxuICBhcnI6IFRbXSxcbiAgZm46IChwcmV2OiBVLCBuZXh0OiBULCBpbmRleDogbnVtYmVyLCBhcnI6IFRbXSkgPT4gUHJvbWlzZTxVPixcbiAgcHJldjogVSxcbik6IFByb21pc2U8VT4gPT4ge1xuICBmb3IgKGNvbnN0IFtpLCBpdGVtXSBvZiBhcnIuZW50cmllcygpKSB7XG4gICAgcHJldiA9IGF3YWl0IGZuKHByZXYsIGl0ZW0sIGksIGFycilcbiAgfVxuICByZXR1cm4gcHJldlxufVxuXG5leHBvcnQgY29uc3Qgd2FpdCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxuXG5leHBvcnQgY29uc3QgdGljayA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5cbmV4cG9ydCBjb25zdCBjb2xvckhhc2ggPSAoc3RyaW5nOiBzdHJpbmcsIG1pbkNvbG9ySGV4ID0gJzg4OCcpID0+IHtcbiAgY29uc3QgbWluQ29sb3IgPSBwYXJzZUludChtaW5Db2xvckhleCwgMTYpXG5cbiAgY29uc3QgY29sb3IgPSAoXG4gICAgKFxuICAgICAgKHN0cmluZy5zcGxpdCgnJykucmVkdWNlKFxuICAgICAgICAocCwgbikgPT4gcCArIChuLmNoYXJDb2RlQXQoMCkgPDwgNSksXG4gICAgICAgIDBcbiAgICAgICkgfCAwKSAlICg0MDk2IC0gbWluQ29sb3IpXG4gICAgKSArIG1pbkNvbG9yXG4gICkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDMsICcwJylcblxuICByZXR1cm4gY29sb3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbG9yT2YoaWQ6IHN0cmluZywgc2F0ID0gMTAwLCBsdW0gPSA2NSkge1xuICByZXR1cm4gYGhzbCgkeyhNYXRoLnJvdW5kKHBhcnNlSW50KGlkLCAzNikgLyAyNSkgKiAyNSkgJSAzNjB9LCAke3NhdH0lLCAke2x1bX0lKWBcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZUZyb21BcnJheSA9IDxUPihhcnI6IFRbXSwgZWw6IFQsIHF1aWV0ID0gZmFsc2UpOiBUW10gfCB2b2lkID0+IHtcbiAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihlbClcbiAgaWYgKCF+aW5kZXgpIHtcbiAgICBpZiAocXVpZXQpIHJldHVyblxuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignSXRlbSB0byBiZSByZW1vdmVkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBhcnJheS4nKVxuICB9XG4gIHJldHVybiBhcnIuc3BsaWNlKGluZGV4LCAxKVxufVxuXG5leHBvcnQgY29uc3QgY2hhaW5TeW5jID0gKC4uLmFyZ3M6ICgoKSA9PiBhbnkpW10pID0+ICgoKSA9PiB7XG4gIGZvciAoY29uc3QgZm4gb2YgYXJncykgZm4oKVxufSlcblxuZXhwb3J0IGNvbnN0IHNoYWxsb3dFcXVhbCA9IChhOiBvYmplY3QsIGI6IG9iamVjdCkgPT5cbiAgW1thLCBiXSwgW2IsIGFdXS5ldmVyeSgoW2EsIGJdKSA9PiBlbnRyaWVzKGEpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IGtleSBpbiBiICYmIGJba2V5XSA9PSB2YWx1ZSkpXG5cbmV4cG9ydCBjb25zdCBnZXRPd25Qcm9wZXJ0eSA9IChvYmplY3Q6IG9iamVjdCwgbmFtZTogc3RyaW5nKSA9PiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgbmFtZSk/LnZhbHVlXG5cbmV4cG9ydCBjb25zdCBwYWRDZW50ZXIgPSAoc3RyOiBzdHJpbmcgfCBudW1iZXIsIGxlbmd0aDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHN0ckxlbmd0aCA9IGdldFN0cmluZ0xlbmd0aChzdHIpXG4gIGNvbnN0IHBhZExlbmd0aCA9IE1hdGguZmxvb3IoKGxlbmd0aCAtIHN0ckxlbmd0aCkgLyAyKVxuICByZXR1cm4gcmVwZWF0U3RyaW5nKCcgJywgbGVuZ3RoIC0gc3RyTGVuZ3RoIC0gcGFkTGVuZ3RoKSArIHN0clxuICAgICsgcmVwZWF0U3RyaW5nKCcgJywgcGFkTGVuZ3RoKVxufVxuXG5leHBvcnQgY29uc3QgZ2V0U3RyaW5nTGVuZ3RoID0gKHN0cjogc3RyaW5nIHwgbnVtYmVyKSA9PiBzdHJpcEFuc2koc3RyKS5sZW5ndGhcblxuZXhwb3J0IGNvbnN0IHBhZFN0YXJ0ID0gKHN0cjogc3RyaW5nIHwgbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgY2hhciA9ICcgJykgPT4ge1xuICBjb25zdCBzdHJMZW5ndGggPSBnZXRTdHJpbmdMZW5ndGgoc3RyKVxuICByZXR1cm4gcmVwZWF0U3RyaW5nKGNoYXIsIGxlbmd0aCAtIHN0ckxlbmd0aCkgKyBzdHJcbn1cblxuZXhwb3J0IGNvbnN0IHJlcGVhdFN0cmluZyA9IChzOiBzdHJpbmcsIHg6IG51bWJlcikgPT4gcy5yZXBlYXQoTWF0aC5tYXgoMCwgeCkpXG5cbi8vIGNvbnN0IHBhZEVuZCA9IChzdHI6IHN0cmluZywgbGVuZ3RoOiBudW1iZXIpID0+IHtcbi8vICAgY29uc3QgYW5zaUxlbmd0aCA9IHN0cmlwQW5zaShzdHIpLmxlbmd0aFxuLy8gICByZXR1cm4gc3RyICsgJyAnLnJlcGVhdChNYXRoLm1heCgwLCBsZW5ndGggLSBhbnNpTGVuZ3RoKSlcbi8vIH1cblxuZXhwb3J0IGNvbnN0IHN0cmlwQW5zaSA9IChzdHI6IHN0cmluZyB8IG51bWJlcikgPT5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgc3RyLnRvU3RyaW5nKCkucmVwbGFjZSgvXFx1MDAxYlxcW1xcZCttL2csICcnKVxuXG5leHBvcnQgY29uc3QgaW5jbHVkZXNBbnkgPSAoc3RyOiBzdHJpbmcsIHByZWRpY2F0ZXM6IHN0cmluZ1tdKSA9PiBwcmVkaWNhdGVzLnNvbWUocCA9PiBzdHIuaW5jbHVkZXMocCkpXG5cbmV4cG9ydCBjb25zdCBhc3luY0ZpbHRlciA9IGFzeW5jIDxUPihcbiAgYXJyYXk6IFRbXSxcbiAgZm46IChpdGVtOiBUKSA9PiBQcm9taXNlPGJvb2xlYW4+LFxuKSA9PlxuICAoYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgYXJyYXkubWFwKGFzeW5jIHggPT4gW3gsIGF3YWl0IGZuKHgpXSBhcyBjb25zdClcbiAgKSkuZmlsdGVyKChbLCB0cnV0aF0pID0+IHRydXRoKS5tYXAoKFt4XSkgPT4geClcblxuZXhwb3J0IGNvbnN0IGRlZmluZVByb3BlcnR5ID0gdG9GbHVlbnQoXG4gIGNsYXNzIHtcbiAgICBjb25maWd1cmFibGUgPSBmYWxzZVxuICAgIGVudW1lcmFibGUgPSBmYWxzZVxuICAgIHdyaXRhYmxlID0gYm9vbFxuICAgIGdldD8oKTogYW55XG4gICAgc2V0Pyh2OiBhbnkpOiB2b2lkXG4gIH0sXG4gIGRlc2NyaXB0b3IgPT5cbiAgICA8VD4ob2JqZWN0OiBvYmplY3QsIG5hbWU6IFByb3BlcnR5S2V5LCB2YWx1ZT86IFQpID0+XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgIG9iamVjdCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdmFsdWUgPT0gbnVsbCA/IGRlc2NyaXB0b3IgOiB7XG4gICAgICAgICAgLi4uZGVzY3JpcHRvcixcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfVxuICAgICAgKVxuKVxuXG5leHBvcnQgY29uc3QgZmlsdGVyTWFwID0gPFQsIFU+KFxuICBhcnJheTogVFtdIHwgcmVhZG9ubHkgVFtdLFxuICBmbjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycmF5OiBUW10gfCByZWFkb25seSBUW10pID0+IFUgfCBmYWxzZSB8IG51bGwgfCB1bmRlZmluZWQsXG4pID0+IGFycmF5Lm1hcChmbikuZmlsdGVyKHggPT4geCAhPSBudWxsICYmIHggIT09IGZhbHNlKSBhcyBVW11cblxuZXhwb3J0IGNvbnN0IHNvcnRDb21wYXJlID0gKGE6IG51bWJlciB8IHN0cmluZywgYjogbnVtYmVyIHwgc3RyaW5nKSA9PiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMFxuXG5leHBvcnQgY29uc3Qgc29ydENvbXBhcmVLZXlzID0gKFthXTogW3N0cmluZywgYW55XSwgW2JdOiBbc3RyaW5nLCBhbnldKSA9PiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMFxuXG5leHBvcnQgY29uc3Qgc29ydE9iamVjdEluUGxhY2UgPSA8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KGRhdGE6IFQpID0+IHtcbiAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKGRhdGEpLnNvcnQoc29ydENvbXBhcmVLZXlzKVxuICApXG4gIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIGRlbGV0ZSBkYXRhW2tleV1cbiAgT2JqZWN0LmFzc2lnbihkYXRhLCBzb3J0ZWQpXG4gIHJldHVybiBkYXRhXG59XG5cbmV4cG9ydCBjb25zdCBzcGxpdEF0ID0gKHN0cmluZzogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiBbc3RyaW5nLnNsaWNlKDAsIGluZGV4KSwgc3RyaW5nLnNsaWNlKGluZGV4ICsgMSldIGFzIGNvbnN0XG5cbmV4cG9ydCBjb25zdCBtZW1vaXplID0gPFAgZXh0ZW5kcyB1bmtub3duW10sIFI+KFxuICBmbjogRm48UCwgUj4sXG4gIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4pID0+XG4gIGZ1bmN0aW9uICh0aGlzOiB1bmtub3duLCAuLi5hcmdzOiBQKTogUiB7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IGFyZ3Muam9pbigpXG4gICAgcmV0dXJuIG1hcFtzZXJpYWxpemVkXSA/PyAobWFwW3NlcmlhbGl6ZWRdID0gZm4uYXBwbHkodGhpcywgYXJncykpXG4gIH0gYXMgRm48UCwgUj5cblxuZXhwb3J0IGludGVyZmFjZSBEZWZlcnJlZDxUPiB7XG4gIGhhc1NldHRsZWQ6IGJvb2xlYW5cbiAgcHJvbWlzZTogUHJvbWlzZTxUPlxuICB3aGVuOiAoZm46ICgpID0+IHZvaWQpID0+IHZvaWRcbiAgcmVzb2x2ZTogKHZhbHVlOiBUKSA9PiB2b2lkXG4gIHJlamVjdDogKGVycm9yPzogRXJyb3IpID0+IHZvaWRcbiAgdmFsdWU/OiBUXG4gIGVycm9yPzogRXJyb3Jcbn1cblxuZXhwb3J0IGNvbnN0IERlZmVycmVkID0gPFQ+KCkgPT4ge1xuICBjb25zdCBfb253aGVuID0gKCkgPT4ge1xuICAgIGRlZmVycmVkLmhhc1NldHRsZWQgPSB0cnVlXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IGRlZmVycmVkLnJlamVjdCA9IG5vb3BcbiAgfVxuXG4gIGNvbnN0IG5vb3AgPSAoKSA9PiB7IH1cblxuICBsZXQgb253aGVuID0gbm9vcFxuXG4gIGNvbnN0IGRlZmVycmVkID0ge1xuICAgIGhhc1NldHRsZWQ6IGZhbHNlLFxuICAgIHdoZW46IGZuID0+IHtcbiAgICAgIG9ud2hlbiA9ICgpID0+IHtcbiAgICAgICAgX29ud2hlbigpXG4gICAgICAgIGZuKClcbiAgICAgIH1cbiAgICB9LFxuICB9IGFzIERlZmVycmVkPFQ+XG5cbiAgZGVmZXJyZWQucHJvbWlzZSA9IG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gYXJnID0+IHtcbiAgICAgIG9ud2hlbigpXG4gICAgICBkZWZlcnJlZC52YWx1ZSA9IGFyZ1xuICAgICAgcmVzb2x2ZShhcmcpXG4gICAgfVxuICAgIGRlZmVycmVkLnJlamVjdCA9IGVycm9yID0+IHtcbiAgICAgIG9ud2hlbigpXG4gICAgICBkZWZlcnJlZC5lcnJvciA9IGVycm9yXG4gICAgICByZWplY3QoZXJyb3IpXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBkZWZlcnJlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gS2V5ZWRDYWNoZTxULCBVIGV4dGVuZHMgdW5rbm93bltdPihnZXR0ZXI6IChrZXk6IHN0cmluZywgLi4uYXJnczogVSkgPT4gUHJvbWlzZTxUPikge1xuICBjb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBEZWZlcnJlZDxUPj4oKVxuICBhc3luYyBmdW5jdGlvbiBnZXQoa2V5OiBzdHJpbmcsIC4uLmFyZ3M6IFUpOiBQcm9taXNlPFQ+IHtcbiAgICBsZXQgZGVmZXJyZWQgPSBjYWNoZS5nZXQoa2V5KVxuICAgIGlmIChkZWZlcnJlZCA9PSBudWxsKSB7XG4gICAgICBjYWNoZS5zZXQoa2V5LCBkZWZlcnJlZCA9IERlZmVycmVkKCkpXG4gICAgICBnZXR0ZXIoa2V5LCAuLi5hcmdzKS50aGVuKGRlZmVycmVkLnJlc29sdmUpLmNhdGNoKGRlZmVycmVkLnJlc29sdmUpXG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlXG4gIH1cbiAgZ2V0LmNhY2hlID0gY2FjaGVcbiAgcmV0dXJuIGdldFxufVxuXG5leHBvcnQgdHlwZSBQcm9taXNlZDxULCBVIGV4dGVuZHMgdW5rbm93bltdID0gdW5rbm93bltdPiA9ICguLi5hcmdzOiBVKSA9PiBQcm9taXNlPFQ+XG5cbmV4cG9ydCBjb25zdCBwcm9taXNpZnkgPSAoZm46IGFueSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MsIChlcnI6IGFueSwgLi4uZGF0YTogYW55W10pID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycilcbiAgICAgICAgZWxzZSByZXNvbHZlKGRhdGEpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1hcFNldDxLLCBWPiB7XG4gICNtYXAgPSBuZXcgTWFwPEssIFNldDxWPj4oKVxuXG4gIGFkZChrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXkpKSB7XG4gICAgICBjb25zdCBzZXQgPSB0aGlzLiNtYXAuZ2V0KGtleSkhXG4gICAgICBzZXQuYWRkKHZhbHVlKVxuICAgICAgcmV0dXJuIHNldC5zaXplXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI21hcC5zZXQoa2V5LCBuZXcgU2V0KFt2YWx1ZV0pKVxuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gIH1cblxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLiNtYXAudmFsdWVzKCldLmZsYXRNYXAoKHNldCkgPT4gWy4uLnNldF0pXG4gIH1cblxuICBnZXQoa2V5OiBLKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5KVxuICB9XG5cbiAgZGVsZXRlKGtleTogSywgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleSk/LmRlbGV0ZSh2YWx1ZSkgPz8gZmFsc2VcbiAgfVxuXG4gIGhhcyhrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXkpPy5oYXModmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXNLZXkoa2V5OiBLKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5KVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5jbGVhcigpXG4gIH1cblxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLnNpemVcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2Vha01hcFNldDxLIGV4dGVuZHMgb2JqZWN0LCBWPiB7XG4gICNtYXAgPSBuZXcgV2Vha01hcDxLLCBTZXQ8Vj4+KClcblxuICBzZXQoa2V5OiBLLCB2YWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuI21hcC5oYXMoa2V5KSkge1xuICAgICAgY29uc3Qgc2V0ID0gdGhpcy4jbWFwLmdldChrZXkpIVxuICAgICAgc2V0LmFkZCh2YWx1ZSlcbiAgICAgIHJldHVybiBzZXQuc2l6ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNtYXAuc2V0KGtleSwgbmV3IFNldChbdmFsdWVdKSlcbiAgICAgIHJldHVybiAxXG4gICAgfVxuICB9XG5cbiAgZ2V0KGtleTogSykge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleSlcbiAgfVxuXG4gIGRlbGV0ZShrZXk6IEssIHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXkpPy5kZWxldGUodmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5OiBLLCB2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5KT8uaGFzKHZhbHVlKSA/PyBmYWxzZVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNYXBNYXA8S0EsIEtCLCBWPiB7XG4gICNtYXAgPSBuZXcgTWFwPEtBLCBNYXA8S0IsIFY+PigpXG5cbiAgc2V0KGtleUE6IEtBLCBrZXlCOiBLQiwgdmFsdWU6IGFueSkge1xuICAgIGlmICh0aGlzLiNtYXAuaGFzKGtleUEpKSB7XG4gICAgICBjb25zdCBtYXAgPSB0aGlzLiNtYXAuZ2V0KGtleUEpIVxuICAgICAgbWFwLnNldChrZXlCLCB2YWx1ZSlcbiAgICAgIHJldHVybiBtYXAuc2l6ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNtYXAuc2V0KGtleUEsIG5ldyBNYXAoW1trZXlCLCB2YWx1ZV1dKSlcbiAgICAgIHJldHVybiAxXG4gICAgfVxuICB9XG5cbiAgZ2V0KGtleUE6IEtBLCBrZXlCOiBLQikge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleUEpPy5nZXQoa2V5QilcbiAgfVxuXG4gIGRlbGV0ZShrZXlBOiBLQSwga2V5QjogS0IpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXlBKT8uZGVsZXRlKGtleUIpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5QTogS0EsIGtleUI6IEtCKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5QSkgJiYgdGhpcy4jbWFwLmdldChrZXlBKSEuaGFzKGtleUIpXG4gIH1cblxuICBjbGVhcigpIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwLmNsZWFyKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWFwTWFwU2V0PEtBLCBLQiwgVj4ge1xuICAjbWFwID0gbmV3IE1hcDxLQSwgTWFwU2V0PEtCLCBWPj4oKVxuXG4gIGFkZChrZXlBOiBLQSwga2V5QjogS0IsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXlBKSkge1xuICAgICAgY29uc3QgbWFwID0gdGhpcy4jbWFwLmdldChrZXlBKSFcbiAgICAgIG1hcC5hZGQoa2V5QiwgdmFsdWUpXG4gICAgICByZXR1cm4gbWFwLnNpemVcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFwID0gbmV3IE1hcFNldDxLQiwgVj4oKVxuICAgICAgbWFwLmFkZChrZXlCLCB2YWx1ZSlcbiAgICAgIHRoaXMuI21hcC5zZXQoa2V5QSwgbWFwKVxuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gIH1cblxuICBnZXQoa2V5QTogS0EsIGtleUI6IEtCKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5nZXQoa2V5QSk/LmdldChrZXlCKVxuICB9XG5cbiAgZGVsZXRlKGtleUE6IEtBLCBrZXlCOiBLQiwgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiB0aGlzLiNtYXAuZ2V0KGtleUEpPy5kZWxldGUoa2V5QiwgdmFsdWUpID8/IGZhbHNlXG4gIH1cblxuICBoYXMoa2V5QTogS0EsIGtleUI6IEtCLCB2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5oYXMoa2V5QSkgJiYgdGhpcy4jbWFwLmdldChrZXlBKSEuaGFzKGtleUIsIHZhbHVlKVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21hcC5jbGVhcigpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG11dGFibGUgPSA8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSkgPT4gYXJyYXkgYXMgVFtdXG5cblxuZXhwb3J0IGNsYXNzIE1hcEZhY3Rvcnk8SywgViBleHRlbmRzIG9iamVjdD4gZXh0ZW5kcyBNYXA8SywgVj4ge1xuICBnZXQoa2V5OiBLLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSkhXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHRoaXMuY3RvcihrZXksIC4uLihhcmdzLmxlbmd0aCA/IGFyZ3MgOiB0aGlzLmRlZmF1bHRBcmdzKSlcbiAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWUpXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICBjdG9yOiBDbGFzczxWPlxuXG4gIGNvbnN0cnVjdG9yKGpzb246IHsgZW50cmllczogcmVhZG9ubHkgW0ssIFZdW10sIGN0b3I6IENsYXNzPFY+IH0pXG4gIGNvbnN0cnVjdG9yKGN0b3I6IENsYXNzPFY+LCBkZWZhdWx0RGF0YT86IFBhcnRpYWw8Vj4pXG4gIGNvbnN0cnVjdG9yKFxuICAgIGN0b3JPckpzb246IENsYXNzPFY+IHwgeyBlbnRyaWVzOiByZWFkb25seSBbSywgVl1bXSwgY3RvcjogQ2xhc3M8Vj4gfSxcbiAgICBwdWJsaWMgZGVmYXVsdEFyZ3MgPSBbXVxuICApIHtcbiAgICBpZiAodHlwZW9mIGN0b3JPckpzb24gPT09ICdvYmplY3QnKSB7XG4gICAgICBzdXBlcihjdG9yT3JKc29uLmVudHJpZXMpXG4gICAgICB0aGlzLmN0b3IgPSBjdG9yT3JKc29uLmN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIoKVxuICAgICAgdGhpcy5jdG9yID0gY3Rvck9ySnNvblxuICAgIH1cbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW50cmllczogWy4uLnRoaXNdLFxuICAgICAgY3RvcjogdGhpcy5jdG9yXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBXZWFrTWFwRmFjdG9yeTxLIGV4dGVuZHMgb2JqZWN0LCBWIGV4dGVuZHMgb2JqZWN0PiBleHRlbmRzIFdlYWtNYXA8SywgVj4ge1xuICBnZXQoa2V5OiBLLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSkhXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHRoaXMuY3RvcihrZXksIC4uLihhcmdzLmxlbmd0aCA/IGFyZ3MgOiB0aGlzLmRlZmF1bHRBcmdzKSlcbiAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWUpXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgY3RvcjogQ2xhc3M8Vj4sXG4gICAgcHVibGljIGRlZmF1bHRBcmdzID0gW11cbiAgKSB7XG4gICAgc3VwZXIoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kQWxsPFQgZXh0ZW5kcyBvYmplY3QsIFUgZXh0ZW5kcyBvYmplY3Q+KG9iajogVCwgdGFyZ2V0OiBUIHwgVSA9IG9iaik6IFQgJiBVIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGFyZ2V0LFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIGZpbHRlck1hcChcbiAgICAgICAgZW50cmllcyhcbiAgICAgICAgICBPYmplY3RcbiAgICAgICAgICAgIC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKFxuICAgICAgICAgICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKVxuICAgICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICAoW2tleSwgZGVzY10pID0+XG4gICAgICAgICAgdHlwZW9mIGRlc2MudmFsdWUgPT09ICdmdW5jdGlvbicgJiYgW2tleSwgZGVzYy52YWx1ZS5iaW5kKG9iaildXG4gICAgICApXG4gICAgKVxuICApIGFzIFQgJiBVXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbmNlPFQgZXh0ZW5kcyAoKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pID0+IGFueSkgfCB2b2lkPihmbjogVCk6IFQge1xuICBpZiAoIWZuKSByZXR1cm4gZm5cblxuICBsZXQgcmVzOiBhbnlcbiAgZnVuY3Rpb24gd3JhcCh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgY29uc3Qgc2F2ZWZuID0gZm5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm4gPSB2b2lkIDBcbiAgICByZXMgPz89IHNhdmVmbj8uYXBwbHkodGhpcywgYXJncylcbiAgICByZXR1cm4gcmVzXG4gIH1cbiAgcmV0dXJuIHdyYXAgYXMgVFxufVxuIiwiaW1wb3J0IHsgTWFwTWFwLCBtdXRhYmxlLCBwaWNrIH0gZnJvbSAnZXZlcnlkYXktdXRpbHMnXG5pbXBvcnQgdHlwZSB7IFN0cmluZ0tleXMgfSBmcm9tICdldmVyeWRheS10eXBlcydcblxuZXhwb3J0IHR5cGUgU2F2ZWRFdmVudCA9IEV2ZW50cyAmIHtcbiAgaXM6IFN0cmluZ0tleXM8dHlwZW9mIEV2ZW50Q29uc3RydWN0b3JzTWFwPlxuICBjYXB0dXJlOiBib29sZWFuIHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIHtcbiAgc2VsZWN0b3JzOiBzdHJpbmdbXVxuICBldmVudDogU2F2ZWRFdmVudFxufVxuXG5leHBvcnQgdHlwZSBFdmVudHMgPVxuICAmIElucHV0RXZlbnRcbiAgJiBLZXlib2FyZEV2ZW50XG4gICYgTW91c2VFdmVudFxuICAmIFBvaW50ZXJFdmVudFxuICAmIFdoZWVsRXZlbnRcblxuY29uc3QgTUlOX0lETEVfVElNRSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5yZWNvcmRlck1pbklkbGVUaW1lKSB8fCA1MFxuY29uc3QgRlJBTUVfVElNRSA9IDEwMDAgLyA2MFxuXG5jb25zdCBhbGxFdmVudHMgPSBbXG4gIFsnbWlzYycsIFtcbiAgICAnYmx1cicsXG4gICAgJ2ZvY3VzJyxcbiAgICAnY2xpY2snLFxuICAgICdkYmxjbGljaycsXG4gICAgJ3doZWVsJyxcbiAgICAnaW5wdXQnLFxuICAgICdjaGFuZ2UnLFxuICAgICdjb250ZXh0bWVudScsXG4gIF1dLFxuXG4gIFsncG9pbnRlcicsIFtcbiAgICAncG9pbnRlcmRvd24nLFxuICAgICdwb2ludGVydXAnLFxuICAgICdwb2ludGVybW92ZScsXG4gICAgJ3BvaW50ZXJvdmVyJyxcbiAgICAncG9pbnRlcmVudGVyJyxcbiAgICAncG9pbnRlcmxlYXZlJyxcbiAgICAncG9pbnRlcmNhbmNlbCcsXG4gIF1dLFxuXG4gIFsnbW91c2UnLCBbXG4gICAgJ21vdXNlZG93bicsXG4gICAgJ21vdXNldXAnLFxuICAgICdtb3VzZW1vdmUnLFxuICAgICdtb3VzZW92ZXInLFxuICAgICdtb3VzZWVudGVyJyxcbiAgICAnbW91c2VsZWF2ZScsXG4gICAgJ21vdXNlY2FuY2VsJyxcbiAgXV0sXG5cbiAgWydrZXlib2FyZCcsIFtcbiAgICAna2V5ZG93bicsXG4gICAgJ2tleXVwJyxcbiAgICAna2V5cHJlc3MnLFxuICBdXSxcbl0gYXMgY29uc3RcblxuY29uc3QgY29weUV2ZW50UHJvcHMgPSBbXG4gICdwb2ludGVySWQnLFxuICAnYnV0dG9ucycsXG4gICdhbHRLZXknLFxuICAnY3RybEtleScsXG4gICdzaGlmdEtleScsXG4gICdtZXRhS2V5JyxcbiAgJ3BhZ2VYJyxcbiAgJ3BhZ2VZJyxcbiAgJ2RlbHRhWCcsXG4gICdkZWx0YVknLFxuICAna2V5JyxcbiAgJ3doaWNoJyxcbl0gYXMgY29uc3RcblxuY29uc3Qgc2F2ZUV2ZW50UHJvcHMgPSBbXG4gICd0eXBlJyxcbiAgJ3RpbWVTdGFtcCcsXG5dIGFzIGNvbnN0XG5cbmNvbnN0IGRpc3BhdGNoUHJvcHMgPSBbXG4gICdidWJibGVzJyxcbiAgJ2NvbXBvc2VkJyxcbiAgJ2NhbmNlbGFibGUnLFxuXSBhcyBjb25zdFxuXG5jb25zdCBFdmVudENvbnN0cnVjdG9yc01hcCA9IHtcbiAgSW5wdXRFdmVudCxcbiAgS2V5Ym9hcmRFdmVudCxcbiAgTW91c2VFdmVudCxcbiAgUG9pbnRlckV2ZW50LFxuICBXaGVlbEV2ZW50LFxufSBhcyBjb25zdFxuXG5mdW5jdGlvbiBjb3B5RXZlbnQoZXZlbnQ6IEV2ZW50cyk6IFByb3BlcnR5RGVzY3JpcHRvck1hcCB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgY29weUV2ZW50UHJvcHMubWFwKFxuICAgICAgKGtleSk6IFtzdHJpbmcsIFByb3BlcnR5RGVzY3JpcHRvcl0gPT5cbiAgICAgICAgW2tleSwgeyB2YWx1ZTogZXZlbnRba2V5XSB9XVxuICAgIClcbiAgKVxufVxuXG5mdW5jdGlvbiBzYXZlRXZlbnQoZXZlbnQ6IEV2ZW50cywgY2FwdHVyZTogYm9vbGVhbiB8IHVuZGVmaW5lZCk6IFNhdmVkRXZlbnQge1xuICByZXR1cm4ge1xuICAgIGlzOiBldmVudC5jb25zdHJ1Y3Rvci5uYW1lIGFzIGtleW9mIHR5cGVvZiBFdmVudENvbnN0cnVjdG9yc01hcCxcbiAgICBjYXB0dXJlLFxuICAgIC4uLihPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBbLi4uY29weUV2ZW50UHJvcHMsIC4uLnNhdmVFdmVudFByb3BzLCAuLi5kaXNwYXRjaFByb3BzXS5tYXAoXG4gICAgICAgIChrZXkpOiBbc3RyaW5nLCBFdmVudHNba2V5b2YgRXZlbnRzXV0gPT5cbiAgICAgICAgICBba2V5LCBldmVudFtrZXldXVxuICAgICAgKVxuICAgICkgYXMgdW5rbm93biBhcyBFdmVudHMpLFxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRTZWxlY3RvcihlbDogRWxlbWVudCB8IG51bGwpIHtcbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cblxuICB3aGlsZSAoZWwpIHtcbiAgICBwYXJ0cy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlcblxuICAgIGNvbnN0IHBhcmVudCA9IGVsLnBhcmVudE5vZGVcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIC8vIG50aC1jaGlsZCBpbmRleGVzIGFyZSAxLWJhc2VkXG4gICAgICBjb25zdCBjaGlsZHJlbiA9IFsuLi5wYXJlbnQuY2hpbGRyZW5dXG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpICsgMVxuICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICBwYXJ0c1swXSArPSBgOm50aC1jaGlsZCgke2luZGV4fSlgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdwYXJ0JykpIHtcbiAgICAgIGNvbnN0IHNlbCA9IGBbcGFydD0ke2VsLmdldEF0dHJpYnV0ZSgncGFydCcpfV1gXG4gICAgICBwYXJ0c1swXSArPSBzZWxcbiAgICB9XG5cbiAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgZWwgPSBwYXJlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbignID4gJylcbn1cblxuZnVuY3Rpb24gbm9kZVRvU2VsZWN0b3JzKGVsOiBFbGVtZW50IHwgV2luZG93KSB7XG4gIGlmIChlbCBpbnN0YW5jZW9mIFdpbmRvdykgcmV0dXJuIFsnd2luZG93J11cblxuICBjb25zdCBzZWxlY3RvcnM6IHN0cmluZ1tdID0gW11cblxuICBsZXQgcm9vdE5vZGVcblxuICB3aGlsZSAocm9vdE5vZGUgPSBlbC5nZXRSb290Tm9kZSgpKSB7XG4gICAgc2VsZWN0b3JzLnVuc2hpZnQoZ2V0RWxlbWVudFNlbGVjdG9yKGVsKSlcblxuICAgIGlmIChyb290Tm9kZSA9PT0gZG9jdW1lbnQgfHwgcm9vdE5vZGUgPT09IGVsKSBicmVha1xuXG4gICAgZWwgPSAocm9vdE5vZGUgYXMgU2hhZG93Um9vdCkuaG9zdFxuICB9XG5cbiAgcmV0dXJuIHNlbGVjdG9yc1xufVxuXG5mdW5jdGlvbiBzZWxlY3RvcnNUb05vZGUoc2VsZWN0b3JzOiBzdHJpbmdbXSkge1xuICBsZXQgcm9vdE5vZGUgPSBkb2N1bWVudCBhcyBEb2N1bWVudCB8IFNoYWRvd1Jvb3QgfCBFbGVtZW50IHwgbnVsbFxuXG4gIGxldCBjdXJyZW50LCBlbFxuXG4gIGZvciAoY29uc3Qgc2VsIG9mIHNlbGVjdG9ycykge1xuICAgIGlmIChzZWwgPT09ICd3aW5kb3cnKSB7XG4gICAgICByZXR1cm4gd2luZG93XG4gICAgfVxuXG4gICAgZWwgPSByb290Tm9kZT8ucXVlcnlTZWxlY3RvcihzZWwpXG4gICAgaWYgKCFlbCkgcmV0dXJuIGN1cnJlbnRcblxuICAgIGN1cnJlbnQgPSBlbFxuXG4gICAgcm9vdE5vZGUgPSAoZWwgYXMgRWxlbWVudCk/LnNoYWRvd1Jvb3RcbiAgICBpZiAoIXJvb3ROb2RlKSBicmVha1xuICB9XG4gIHJldHVybiBjdXJyZW50XG59XG5cbmNvbnN0IHBhdGNoRXZlbnRUYXJnZXQgPSAoKSA9PiB7XG4gIGNvbnN0IG9yaWdpbmFsID0ge1xuICAgIGFkZEV2ZW50TGlzdGVuZXI6IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyLFxuICB9IGFzIGNvbnN0XG5cbiAgY29uc3QgaGFuZGxlciA9IHtcbiAgICBsYXN0RXZlbnRUaW1lOiAwLFxuICAgIHJlY29yZGluZzogZmFsc2UsXG4gICAgb25hY3Rpb246IChfYWN0aW9uOiBBY3Rpb24pID0+IHsgfVxuICB9XG5cbiAgY29uc3QgY2FsbGJhY2tzID0gbmV3IE1hcE1hcDxFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMgfCB1bmRlZmluZWQsIEV2ZW50TGlzdGVuZXI+KClcblxuICBmdW5jdGlvbiBjYWxsYmFja0ZvcihcbiAgICBjYWxsYmFjazogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zOiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgaWYgKGNhbGxiYWNrcy5oYXMoY2FsbGJhY2ssIG9wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2tzLmdldChjYWxsYmFjaywgb3B0aW9ucykhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdGVuZXIodGhpczogRWxlbWVudCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICBjb25zdCBpc1JlY29yZGluZyA9IGhhbmRsZXIucmVjb3JkaW5nICYmIChldmVudC5jb25zdHJ1Y3Rvci5uYW1lIGluIEV2ZW50Q29uc3RydWN0b3JzTWFwKVxuXG4gICAgICBsZXQgc2VsZWN0b3JzITogc3RyaW5nW11cblxuICAgICAgaWYgKGlzUmVjb3JkaW5nKSB7XG4gICAgICAgIHNlbGVjdG9ycyA9IG5vZGVUb1NlbGVjdG9ycyh0aGlzKVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjay5jYWxsKHRoaXMsIGV2ZW50KVxuXG4gICAgICAvLyB1c2VkIHRvIGRldGVjdCBpZGxlIGZvciBhdXRvcGxheVxuICAgICAgaGFuZGxlci5sYXN0RXZlbnRUaW1lID0gZXZlbnQudGltZVN0YW1wXG5cbiAgICAgIGlmIChpc1JlY29yZGluZykge1xuICAgICAgICBpZiAoc2VsZWN0b3JzLmZpbHRlcihCb29sZWFuKS5sZW5ndGgpIHtcbiAgICAgICAgICBoYW5kbGVyLm9uYWN0aW9uKHtcbiAgICAgICAgICAgIHNlbGVjdG9ycyxcbiAgICAgICAgICAgIGV2ZW50OiBzYXZlRXZlbnQoXG4gICAgICAgICAgICAgIGV2ZW50IGFzIEV2ZW50cyxcbiAgICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMgPT09ICdib29sZWFuJyA/IG9wdGlvbnMgOiBvcHRpb25zPy5jYXB0dXJlXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ25vIHNlbGVjdG9ycycsIHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nIHx8ICFvcHRpb25zPy5vbmNlKSB7XG4gICAgICBjYWxsYmFja3Muc2V0KGNhbGxiYWNrLCBvcHRpb25zLCBsaXN0ZW5lcilcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdGVuZXJcbiAgfVxuXG4gIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKFxuICAgIHR5cGUsXG4gICAgY2FsbGJhY2s6IEV2ZW50TGlzdGVuZXIsXG4gICAgb3B0aW9uc1xuICApIHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IGNhbGxiYWNrRm9yKGNhbGxiYWNrLCBvcHRpb25zKVxuICAgIHJldHVybiBvcmlnaW5hbC5hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpXG4gIH1cblxuICBFdmVudFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChcbiAgICB0eXBlLFxuICAgIGNhbGxiYWNrOiBFdmVudExpc3RlbmVyLFxuICAgIG9wdGlvbnNcbiAgKSB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBjYWxsYmFja3MuZ2V0KGNhbGxiYWNrLCBvcHRpb25zKVxuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgY2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjaywgb3B0aW9ucylcbiAgICAgIHJldHVybiBvcmlnaW5hbC5yZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpXG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIG9yaWdpbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCB0eXBlLCBjYWxsYmFjaywgb3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBoYW5kbGVyXG59XG5cbmNvbnN0IGhhbmRsZXIgPSBwYXRjaEV2ZW50VGFyZ2V0KClcblxuZXhwb3J0IGNsYXNzIERPTVJlY29yZGVyIHtcbiAgYWN0aW9ucyA9IFtdIGFzIEFjdGlvbltdXG5cbiAgZXZlbnRUeXBlczogc3RyaW5nW10gPSAoXG4gICAgbG9jYWxTdG9yYWdlLnJlY29yZGVyRXZlbnRUeXBlc1xuICAgID8/ICdjbGljayxwb2ludGVybW92ZSxrZXlkb3duJ1xuICApLnNwbGl0KCcsJylcblxuICBlbmFibGVkR3JvdXBzOiBzdHJpbmdbXSA9IChcbiAgICBsb2NhbFN0b3JhZ2UucmVjb3JkZXJFbmFibGVkR3JvdXBzXG4gICAgPz8gJ21pc2MscG9pbnRlcixrZXlib2FyZCdcbiAgKS5zcGxpdCgnLCcpXG5cbiAgZWwhOiBIVE1MRGl2RWxlbWVudFxuICBjb250cm9sc0VsITogSFRNTERpdkVsZW1lbnRcbiAgc3RhdHVzRWwhOiBIVE1MRWxlbWVudFxuICBzdGF0dXMgPSAnJ1xuICBhY3Rpb25zRWwhOiBIVE1MRGV0YWlsc0VsZW1lbnRcbiAgZXZlbnRzID0gJydcbiAgZm9ybUVsITogSFRNTEZvcm1FbGVtZW50XG4gIHBvaW50ZXJFbCE6IEhUTUxEaXZFbGVtZW50XG5cbiAgYXV0b3BsYXkgPSBmYWxzZVxuICBza2lwcGVkID0gMFxuICByZXBsYXllZCA9IDBcbiAgcmVwbGF5aW5nID0gZmFsc2VcbiAgZGlydHlBY3Rpb25zID0gZmFsc2VcbiAgdW5zYXZlZEFjdGlvbnMgPSBmYWxzZVxuXG4gIG9uQmVmb3JlVW5sb2FkID0gKGV2ZW50OiBCZWZvcmVVbmxvYWRFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLnVuc2F2ZWRBY3Rpb25zKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICByZXR1cm4gKGV2ZW50LnJldHVyblZhbHVlID0gJ1RoZXJlIGFyZSB1bnNhdmVkIGFjdGlvbnMsIGFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBleGl0PycpXG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZW5kZXIoKVxuXG4gICAgdGhpcy5nZXRBY3Rpb25zKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLm1heWJlQXV0b3BsYXkoKVxuICAgIH0pXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdiZWZvcmV1bmxvYWQnLFxuICAgICAgdGhpcy5vbkJlZm9yZVVubG9hZCxcbiAgICAgIHsgY2FwdHVyZTogdHJ1ZSB9XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuZWwgPz89IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5lbC5pZCA9ICdyZWNvcmRlci11aSdcbiAgICB0aGlzLnBhaW50RWwoKVxuXG4gICAgdGhpcy5wb2ludGVyRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5yZWNvcmRlci11aS1wb2ludGVyJykhXG5cbiAgICB0aGlzLmNvbnRyb2xzRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5yZWNvcmRlci11aS1jb250cm9scycpIVxuICAgIHRoaXMucGFpbnRDb250cm9scygpXG5cbiAgICB0aGlzLmZvcm1FbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignZm9ybScpIVxuICAgIHRoaXMucGFpbnRGb3JtKClcblxuICAgIHRoaXMuYWN0aW9uc0VsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdkZXRhaWxzJykhXG4gICAgdGhpcy5wYWludEFjdGlvbnMoKVxuXG4gICAgdGhpcy5wYWludFN0YXR1cygwKVxuXG4gICAgYWxsRXZlbnRzXG4gICAgICAuZmxhdE1hcCgoWywgZXZlbnRzXSkgPT4gZXZlbnRzKVxuICAgICAgLm1hcCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIChlKSA9PiB7XG4gICAgICAgICAgdGhpcy5hdXRvcGxheSA9IGZhbHNlXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pXG4gICAgICB9KVxuICB9XG5cbiAgcGFpbnRFbCgpIHtcbiAgICB0aGlzLmVsLmlubmVySFRNTCA9IC8qaHRtbCovYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAjcmVjb3JkZXItdWkge1xuICAgICAgICAgIC0tYmFja2dyb3VuZDogIzIyMmU7XG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgIHotaW5kZXg6IDk5OTk5OTk5O1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgKiB7XG4gICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aTtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLWNvbnRyb2xzIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kKTtcbiAgICAgICAgfVxuICAgICAgICAucmVjb3JkZXItdWktY29udHJvbHMsXG4gICAgICAgIC5yZWNvcmRlci11aS1jb250cm9scyA+ICoge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgICAgICAgICBwbGFjZS1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBpbnB1dFt0eXBlPWNoZWNrYm94XSB7XG4gICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZm9ybSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICAgICAgb3ZlcmZsb3c6IHNjcm9sbDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBmb3JtLmhpZGRlbiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZm9ybSA+IGRpdiB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IHJvdztcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgbGFiZWwge1xuICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQge1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbiB3cmFwO1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQgbGVnZW5kIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGZvcm0gZmllbGRzZXQucmVjb3JkZXItdWktZ3JvdXBzIHtcbiAgICAgICAgICBmbGV4OiAwO1xuICAgICAgICAgIG1pbi13aWR0aDogMTAwcHg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgd2hpdGUtc3BhY2U6IHByZTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWkgZGV0YWlsc1tvcGVuXSB7XG4gICAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgICBvdmVyZmxvdzogc2Nyb2xsO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgc3VtbWFyeSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzMzMztcbiAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyZWNvcmRlci11aSBkZXRhaWxzIGRpdiB7XG4gICAgICAgICAgb3BhY2l0eTogMC4xNTtcbiAgICAgICAgfVxuICAgICAgICAjcmVjb3JkZXItdWk6aG92ZXIgZGV0YWlscyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpOmhvdmVyIGRldGFpbHMgZGl2IHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgIH1cbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgc3VtbWFyeTpob3ZlcixcbiAgICAgICAgI3JlY29yZGVyLXVpIGRldGFpbHMgZGl2OmhvdmVyIHtcbiAgICAgICAgICBjb2xvcjogIzAwMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjODg4O1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLWV2ZW50LXNraXBwZWQge1xuICAgICAgICAgIGNvbG9yOiAjNzc3O1xuICAgICAgICB9XG4gICAgICAgIC5yZWNvcmRlci11aS1wb2ludGVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgei1pbmRleDogOTk5OTk5OTk7XG4gICAgICAgICAgbWl4LWJsZW5kLW1vZGU6IGRpZmZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLXBvaW50ZXIgc3ZnIHtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgbGVmdDogLTZweDtcbiAgICAgICAgICB0b3A6IC0zcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnJlY29yZGVyLXVpLXBvaW50ZXIuaGlkZGVuIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgICAgPGRpdiBjbGFzcz1cInJlY29yZGVyLXVpLXBvaW50ZXJcIj5cbiAgICAgICAgPCEtLSBodHRwczovL2dpdGh1Yi5jb20vZ3JvbW1ldC9ncm9tbWV0LWljb25zL2Jsb2IvbWFzdGVyL3B1YmxpYy9pbWcvY3Vyc29yLnN2ZyAtLT5cbiAgICAgICAgPHN2ZyB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiMzBcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwb2x5Z29uXG4gICAgICAgICAgZmlsbD1cIiM2NjZhXCJcbiAgICAgICAgICBzdHJva2U9XCIjZmZmXCJcbiAgICAgICAgICBzdHJva2Utd2lkdGg9XCIxLjE1XCJcbiAgICAgICAgICBwb2ludHM9XCI2IDMgMTggMTQgMTMgMTUgMTYgMjAuNSAxMyAyMiAxMCAxNiA2IDE5XCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInJlY29yZGVyLXVpLWNvbnRyb2xzXCI+PC9kaXY+XG4gICAgICA8Zm9ybSBvbmNoYW5nZT1cInJlY29yZGVyLmdldEZvcm1EYXRhKHRoaXMpXCI+PC9mb3JtPlxuICAgICAgPGRldGFpbHMgb3Blbj48L2RldGFpbHM+XG4gICAgYFxuICB9XG5cbiAgcGFpbnRDb250cm9scygpIHtcbiAgICB0aGlzLmNvbnRyb2xzRWwuaW5uZXJIVE1MID0gLypodG1sKi9gXG4gICAgICA8ZGl2PlxuICAgICAgICA8YnV0dG9uICR7dGhpcy5yZXBsYXlpbmcgPyAnZGlzYWJsZWQnIDogJ29uY2xpY2s9XCJyZWNvcmRlci5zdGFydFJlY29yZGluZygpXCInfT5yZWNvcmQ8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiAkeyFoYW5kbGVyLnJlY29yZGluZyA/ICdkaXNhYmxlZCcgOiAnb25jbGljaz1cInJlY29yZGVyLnN0b3BSZWNvcmRpbmcoKVwiJ30+c3RvcDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICAmbmJzcDtcbiAgICAgIDxkaXY+XG4gICAgICAgIDxidXR0b24gJHt0aGlzLnJlcGxheWluZyB8fCAoIXRoaXMuYWN0aW9ucy5sZW5ndGggJiYgIWhhbmRsZXIucmVjb3JkaW5nKSA/ICdkaXNhYmxlZCcgOiAnb25jbGljaz1cInJlY29yZGVyLnN0YXJ0UmVwbGF5aW5nKClcIid9PnJlcGxheTwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uICR7IXRoaXMucmVwbGF5aW5nID8gJ2Rpc2FibGVkJyA6ICdvbmNsaWNrPVwicmVjb3JkZXIuc3RvcFJlcGxheWluZygpXCInfT5zdG9wPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgICZuYnNwO1xuICAgICAgPGRpdj5cbiAgICAgICAgc2VydmVyOlxuICAgICAgICA8YnV0dG9uICR7IXRoaXMudW5zYXZlZEFjdGlvbnMgfHwgdGhpcy5yZXBsYXlpbmcgfHwgIXRoaXMuYWN0aW9ucy5sZW5ndGggfHwgaGFuZGxlci5yZWNvcmRpbmcgPyAnZGlzYWJsZWQnIDogJ29uY2xpY2s9XCJyZWNvcmRlci5wb3N0QWN0aW9ucygpXCInfT5wb3N0PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gICR7dGhpcy5yZXBsYXlpbmcgfHwgIXRoaXMuYWN0aW9ucy5sZW5ndGggfHwgaGFuZGxlci5yZWNvcmRpbmcgPyAnZGlzYWJsZWQnIDogJ29uY2xpY2s9XCJyZWNvcmRlci5yZXBsYXlTZXJ2ZXIoKVwiJ30+cmVwbGF5PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgICZuYnNwO1xuICAgICAgPGxhYmVsXG4gICAgICAgIG9uY29udGV4dG1lbnU9XCJldmVudC5wcmV2ZW50RGVmYXVsdCgpO2xvY2FsU3RvcmFnZS5yZWNvcmRlck1pbklkbGVUaW1lPXBhcnNlSW50KHByb21wdCgnRW50ZXIgaWRsZSB0aW1lKG1zKSBuZWVkZWQgZm9yIGF1dG9wbGF5IHRvIGJlZ2luOicsIHBhcnNlSW50KGxvY2FsU3RvcmFnZS5yZWNvcmRlck1pbklkbGVUaW1lKSB8fCA1MCkpXCJcbiAgICAgID5cbiAgICAgICAgYXV0bzo8aW5wdXRcbiAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgIG9uY2hhbmdlPVwibG9jYWxTdG9yYWdlLnJlY29yZGVyQXV0b3BsYXk9dGhpcy5jaGVja2VkXCJcbiAgICAgICAgICAke2xvY2FsU3RvcmFnZS5yZWNvcmRlckF1dG9wbGF5ID09PSAndHJ1ZScgPyAnY2hlY2tlZCcgOiAnJ31cbiAgICAgICAgLz5cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8bGFiZWw+XG4gICAgICAgIGxvb3A6PGlucHV0XG4gICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICBvbmNoYW5nZT1cImxvY2FsU3RvcmFnZS5yZWNvcmRlckxvb3A9ISF0aGlzLmNoZWNrZWRcIlxuICAgICAgICAgICR7bG9jYWxTdG9yYWdlLnJlY29yZGVyTG9vcCA9PT0gJ3RydWUnID8gJ2NoZWNrZWQnIDogJyd9XG4gICAgICAgIC8+XG4gICAgICA8L2xhYmVsPlxuICAgIGBcbiAgfVxuXG4gIHBhaW50Rm9ybSgpIHtcbiAgICBjb25zdCBkaXNhYmxlZEV2ZW50cyA9IGFsbEV2ZW50c1xuICAgICAgLmZpbHRlcigoW2dyb3VwXSkgPT4gIXRoaXMuZW5hYmxlZEdyb3Vwcy5pbmNsdWRlcyhncm91cCkpXG5cbiAgICBjb25zdCBlbmFibGVkRXZlbnRzID0gYWxsRXZlbnRzXG4gICAgICAuZmlsdGVyKChbZ3JvdXBdKSA9PiB0aGlzLmVuYWJsZWRHcm91cHMuaW5jbHVkZXMoZ3JvdXApKVxuXG4gICAgdGhpcy5mb3JtRWwuaW5uZXJIVE1MID0gLypodG1sKi9gXG4gICAgICAkeyFkaXNhYmxlZEV2ZW50cy5sZW5ndGggPyAnJyA6IC8qaHRtbCovYFxuICAgICAgPGRpdiBjbGFzcz1cInJlY29yZGVyLXVpLWdyb3Vwc1wiPlxuICAgICAgICAke2Rpc2FibGVkRXZlbnRzLm1hcCgoW2dyb3VwLCBldmVudHNdKSA9PiAvKmh0bWwqL2BcbiAgICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgIG5hbWU9XCJlbmFibGVkR3JvdXBzW11cIlxuICAgICAgICAgICAgdmFsdWU9XCIke2dyb3VwfVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgICAke2dyb3VwfVxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICAke211dGFibGUoZXZlbnRzKVxuICAgICAgICAuZmlsdGVyKCh0eXBlKSA9PlxuICAgICAgICAgIHRoaXMuZXZlbnRUeXBlcy5pbmNsdWRlcyh0eXBlKVxuICAgICAgICApXG4gICAgICAgIC5tYXAoKHR5cGUpID0+IC8qaHRtbCovYFxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImhpZGRlblwiXG4gICAgICAgICAgICBuYW1lPVwicmVjb3JkZXJFdmVudFR5cGVzW11cIlxuICAgICAgICAgICAgdmFsdWU9XCIke3R5cGV9XCJcbiAgICAgICAgICAvPlxuICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgIGApLmpvaW4oJycpfVxuICAgICAgPC9kaXY+YH1cbiAgICAgIDxkaXY+XG4gICAgICAgICR7ZW5hYmxlZEV2ZW50cy5tYXAoKFtncm91cCwgZXZlbnRzXSkgPT4gLypodG1sKi9gXG4gICAgICAgIDxmaWVsZHNldD5cbiAgICAgICAgICA8bGVnZW5kPlxuICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJlbmFibGVkR3JvdXBzW11cIlxuICAgICAgICAgICAgICAgIHZhbHVlPVwiJHtncm91cH1cIlxuICAgICAgICAgICAgICAgIGNoZWNrZWRcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgJHtncm91cH1cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPC9sZWdlbmQ+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICR7bXV0YWJsZShldmVudHMpLmV2ZXJ5KCh0eXBlKSA9PiB0aGlzLmV2ZW50VHlwZXMubGVuZ3RoICYmIHRoaXMuZXZlbnRUeXBlcy5pbmNsdWRlcyh0eXBlKSkgPyBgXG4gICAgICAgICAgICAgICAgY2hlY2tlZFxuICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJyZWNvcmRlci5kZXNlbGVjdEFsbCgnJHtncm91cH0nKVwiXG4gICAgICAgICAgICAgIGAgOiBgXG4gICAgICAgICAgICAgICAgb25jbGljaz1cInJlY29yZGVyLnNlbGVjdEFsbCgnJHtncm91cH0nKVwiXG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgYWxsICR7Z3JvdXB9XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAke2V2ZW50cy5tYXAoKHR5cGUpID0+IC8qaHRtbCovYFxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICBuYW1lPVwicmVjb3JkZXJFdmVudFR5cGVzW11cIlxuICAgICAgICAgICAgICB2YWx1ZT1cIiR7dHlwZX1cIlxuICAgICAgICAgICAgICAke3RoaXMuZXZlbnRUeXBlcy5pbmNsdWRlcyh0eXBlKSA/ICdjaGVja2VkJyA6ICcnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICR7dHlwZX1cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICA8L2ZpZWxkc2V0PmApLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgYFxuICB9XG5cbiAgcGFpbnRBY3Rpb25zKCkge1xuICAgIGlmICh0aGlzLmFjdGlvbnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBmaXJzdFRpbWVTdGFtcCA9IHRoaXMuYWN0aW9uc1swXS5ldmVudC50aW1lU3RhbXAgfCAwXG5cbiAgICAgIHRoaXMuYWN0aW9uc0VsLmlubmVySFRNTCA9IHRoaXMuYWN0aW9ucy5tYXAoXG4gICAgICAgIChhY3Rpb24sIGluZGV4KSA9PlxuICAgICAgICAgIGA8ZGl2IGlkPVwiYWN0aW9uJHtpbmRleH1cIiBvbmNsaWNrPVwicmVjb3JkZXIuc2hvd0RldGFpbHModGhpcylcIj4keyhhY3Rpb24uZXZlbnQudGltZVN0YW1wIHwgMCkgLSBmaXJzdFRpbWVTdGFtcH0gJHthY3Rpb24uZXZlbnQudHlwZX0gJHthY3Rpb24uc2VsZWN0b3JzLmF0KC0xKSEuc3BsaXQoJyA+ICcpLnBvcCgpfTwvZGl2PmBcbiAgICAgICkuam9pbignJylcbiAgICB9XG5cbiAgICB0aGlzLmFjdGlvbnNFbC5wcmVwZW5kKFxuICAgICAgdGhpcy5zdGF0dXNFbCA/Pz0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScpXG4gICAgKVxuXG4gICAgdGhpcy5hY3Rpb25zRWwub3BlbiA9IHRydWVcbiAgfVxuXG4gIHBhaW50U3RhdHVzKGtpbmQ6IG51bWJlcikge1xuICAgIGxldCBzdGF0dXM6IHN0cmluZ1xuICAgIGlmIChraW5kID09PSAxKSB7XG4gICAgICBzdGF0dXMgPSBgJHt0aGlzLmFjdGlvbnMubGVuZ3RoIC0gdGhpcy5yZXBsYXllZCAtIHRoaXMuc2tpcHBlZH0gcmVtYWluaW5nICgke3RoaXMuc2tpcHBlZH0gc2tpcHBlZCwgJHt0aGlzLmFjdGlvbnMubGVuZ3RofSB0b3RhbClgXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXR1cyA9IGAke3RoaXMuYWN0aW9ucy5sZW5ndGh9IGFjdGlvbnMsICR7dGhpcy5za2lwcGVkfSBza2lwcGVkYFxuICAgIH1cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IHRoaXMuc3RhdHVzID0gc3RhdHVzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHdhaXRVbnRpbElkbGUoKSB7XG4gICAgd2hpbGUgKHBlcmZvcm1hbmNlLm5vdygpIC0gaGFuZGxlci5sYXN0RXZlbnRUaW1lIDwgTUlOX0lETEVfVElNRSkge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgNTApXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWF5YmVBdXRvcGxheSgpIHtcbiAgICBpZiAoIXRoaXMuYWN0aW9ucy5sZW5ndGgpIHJldHVyblxuXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5yZWNvcmRlckF1dG9wbGF5ID09PSAndHJ1ZScpIHtcbiAgICAgIHRoaXMuYXV0b3BsYXkgPSB0cnVlXG4gICAgICBhd2FpdCB0aGlzLndhaXRVbnRpbElkbGUoKVxuICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgdGhpcy5zdGFydFJlcGxheWluZygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Rm9ybURhdGEoZm9ybTogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcblxuICAgIHRoaXMuZXZlbnRUeXBlcyA9IGxvY2FsU3RvcmFnZS5yZWNvcmRlckV2ZW50VHlwZXMgPSBmb3JtRGF0YS5nZXRBbGwoJ3JlY29yZGVyRXZlbnRUeXBlc1tdJykgYXMgc3RyaW5nW11cblxuICAgIHRoaXMuZW5hYmxlZEdyb3VwcyA9IGxvY2FsU3RvcmFnZS5yZWNvcmRlckVuYWJsZWRHcm91cHMgPSBmb3JtRGF0YS5nZXRBbGwoJ2VuYWJsZWRHcm91cHNbXScpIGFzIHN0cmluZ1tdXG5cbiAgICB0aGlzLnBhaW50Rm9ybSgpXG4gIH1cblxuICBzZWxlY3RBbGwoZ3JvdXA6IHN0cmluZykge1xuICAgIHRoaXMuZXZlbnRUeXBlcyA9IGxvY2FsU3RvcmFnZS5yZWNvcmRlckV2ZW50VHlwZXMgPSBbLi4ubmV3IFNldChbXG4gICAgICAuLi50aGlzLmV2ZW50VHlwZXMsXG4gICAgICAuLi5hbGxFdmVudHNcbiAgICAgICAgLmZpbmQoKFtnXSkgPT4gZ3JvdXAgPT09IGcpIVsxXVxuICAgIF0pXVxuXG4gICAgdGhpcy5wYWludEZvcm0oKVxuICB9XG5cbiAgZGVzZWxlY3RBbGwoZ3JvdXA6IHN0cmluZykge1xuICAgIGNvbnN0IHRvRGVzZWxlY3QgPSBhbGxFdmVudHNcbiAgICAgIC5maW5kKChbZ10pID0+IGdyb3VwID09PSBnKSFbMV1cblxuICAgIHRoaXMuZXZlbnRUeXBlcyA9IGxvY2FsU3RvcmFnZS5yZWNvcmRlckV2ZW50VHlwZXMgPSB0aGlzLmV2ZW50VHlwZXMuZmlsdGVyKCh0eXBlKSA9PiAhdG9EZXNlbGVjdC5pbmNsdWRlcyh0eXBlIGFzIG5ldmVyKSlcblxuICAgIHRoaXMucGFpbnRGb3JtKClcbiAgfVxuXG4gIHNob3dEZXRhaWxzKGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAgIGlmIChlbC5kYXRhc2V0LmV4cGFuZGVkID09PSAndHJ1ZScpIHJldHVyblxuICAgIGVsLmRhdGFzZXQuZXhwYW5kZWQgPSAndHJ1ZSdcbiAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmFjdGlvbnNbK2VsLmlkLnNwbGl0KCdhY3Rpb24nKSEucG9wKCkhXVxuICAgIGNvbnN0IGV2ZW50RGV0YWlscyA9IGBcXG4ke2FjdGlvbi5zZWxlY3RvcnMuam9pbignXFxuID4gJyl9XFxuJHtKU09OLnN0cmluZ2lmeShhY3Rpb24uZXZlbnQsIG51bGwsIDIpfWBcbiAgICB0aGlzLmFjdGlvbnNFbC5xdWVyeVNlbGVjdG9yKGAjJHtlbC5pZH1gKSEuYXBwZW5kKGV2ZW50RGV0YWlscylcbiAgfVxuXG4gIGFzeW5jIHBvc3RBY3Rpb25zKCkge1xuICAgIHRoaXMuc3RvcFJlY29yZGluZygpXG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgIG5ldyBVUkwoJy9zdG9yZT9rZXk9cmVjb3JkZXItYWN0aW9ucycsIGxvY2F0aW9uLm9yaWdpbiksIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5hY3Rpb25zKVxuICAgIH0pXG5cbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgY29uc29sZS53YXJuKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51bnNhdmVkQWN0aW9ucyA9IGZhbHNlXG4gICAgICB0aGlzLnBhaW50Q29udHJvbHMoKVxuICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QWN0aW9ucygpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgIG5ldyBVUkwoJy9zdG9yZT9rZXk9cmVjb3JkZXItYWN0aW9ucycsIGxvY2F0aW9uLm9yaWdpbiksIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnNvbGUud2FybihyZXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpXG4gICAgICB0aGlzLmFjdGlvbnMgPSBqc29uXG4gICAgICB0aGlzLnBhaW50QWN0aW9ucygpXG4gICAgICB0aGlzLnBhaW50Q29udHJvbHMoKVxuICAgICAgdGhpcy5wYWludFN0YXR1cygwKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlcGxheVNlcnZlcigpIHtcbiAgICBhd2FpdCB0aGlzLmdldEFjdGlvbnMoKVxuICAgIHRoaXMuc3RhcnRSZXBsYXlpbmcoKVxuICB9XG5cbiAgc3RhcnRSZWNvcmRpbmcoKSB7XG4gICAgaWYgKHRoaXMucmVwbGF5aW5nKSByZXR1cm5cblxuICAgIGNvbnN0IG93blVJU2VsZWN0b3IgPSBnZXRFbGVtZW50U2VsZWN0b3IodGhpcy5lbClcblxuICAgIHRoaXMuYWN0aW9uc0VsLm9wZW4gPSBmYWxzZVxuICAgIHRoaXMuZm9ybUVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5hY3Rpb25zLnNwbGljZSgwKVxuICAgIHRoaXMuc2tpcHBlZCA9IDBcbiAgICB0aGlzLmRpcnR5QWN0aW9ucyA9IHRydWVcbiAgICB0aGlzLnVuc2F2ZWRBY3Rpb25zID0gdHJ1ZVxuICAgIGhhbmRsZXIucmVjb3JkaW5nID0gdHJ1ZVxuXG4gICAgdGhpcy5wYWludENvbnRyb2xzKClcbiAgICB0aGlzLnBhaW50U3RhdHVzKDApXG5cbiAgICBsZXQgcHJldjogQWN0aW9uIHwgdm9pZFxuXG4gICAgaGFuZGxlci5vbmFjdGlvbiA9IChhY3Rpb246IEFjdGlvbikgPT4ge1xuICAgICAgaWYgKGFjdGlvbi5zZWxlY3RvcnMuaW5jbHVkZXMob3duVUlTZWxlY3RvcikpIHJldHVybiBmYWxzZVxuXG4gICAgICBpZiAoIXRoaXMuZXZlbnRUeXBlcy5pbmNsdWRlcyhhY3Rpb24uZXZlbnQudHlwZSlcbiAgICAgICAgfHwgIXRoaXMuZW5hYmxlZEdyb3Vwcy5pbmNsdWRlcyhcbiAgICAgICAgICBhbGxFdmVudHMuZmluZChcbiAgICAgICAgICAgIChbLCBldmVudHNdKSA9PlxuICAgICAgICAgICAgICBldmVudHMuaW5jbHVkZXMoYWN0aW9uLmV2ZW50LnR5cGUgYXMgbmV2ZXIpXG4gICAgICAgICAgKSFbMF1cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc2tpcHBlZCsrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIXByZXZcbiAgICAgICAgICB8fCBhY3Rpb24uZXZlbnQudGltZVN0YW1wICE9PSBwcmV2LmV2ZW50LnRpbWVTdGFtcFxuICAgICAgICAgIHx8IGFjdGlvbi5ldmVudC50eXBlICE9PSBwcmV2LmV2ZW50LnR5cGVcbiAgICAgICAgICB8fCBhY3Rpb24uc2VsZWN0b3JzLmpvaW4oJzo6OicpICE9PSBwcmV2LnNlbGVjdG9ycy5qb2luKCc6OjonKVxuICAgICAgICAgIHx8IEpTT04uc3RyaW5naWZ5KGFjdGlvbi5ldmVudCkgIT09IEpTT04uc3RyaW5naWZ5KHByZXYuZXZlbnQpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuYWN0aW9ucy5wdXNoKHByZXYgPSBhY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5wYWludFN0YXR1cygwKVxuICAgIH1cbiAgfVxuXG4gIHN0b3BSZWNvcmRpbmcoKSB7XG4gICAgaWYgKHRoaXMucmVwbGF5aW5nKSByZXR1cm5cblxuICAgIGhhbmRsZXIucmVjb3JkaW5nID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmRpcnR5QWN0aW9ucykge1xuICAgICAgdGhpcy5mb3JtRWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHRoaXMudHJpbUFjdGlvbnMoKVxuICAgICAgdGhpcy5wYWludEFjdGlvbnMoKVxuICAgICAgdGhpcy5wYWludENvbnRyb2xzKClcbiAgICAgIHRoaXMuZGlydHlBY3Rpb25zID0gZmFsc2VcbiAgICB9XG4gIH1cblxuXG4gIHRyaW1BY3Rpb25zKCkge1xuICAgIGxldCBsYXN0ID0gdGhpcy5hY3Rpb25zLmF0KC0xKVxuXG4gICAgaWYgKGxhc3Q/LnNlbGVjdG9yc1swXSA9PT0gJ3dpbmRvdydcbiAgICAgICYmIGxhc3QuZXZlbnQudHlwZSA9PT0gJ3BvaW50ZXJkb3duJykge1xuICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpXG4gICAgICB3aGlsZSAobGFzdCA9IHRoaXMuYWN0aW9ucy5hdCgtMSkpIHtcbiAgICAgICAgaWYgKGxhc3Quc2VsZWN0b3JzWzBdICE9PSAnd2luZG93J1xuICAgICAgICAgIHx8IGxhc3QuZXZlbnQudHlwZSAhPT0gJ3BvaW50ZXJtb3ZlJykge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wYWludFN0YXR1cygwKVxuICB9XG5cbiAgc3RvcFJlcGxheWluZygpIHtcbiAgICB0aGlzLnJlcGxheWluZyA9IGZhbHNlXG4gICAgdGhpcy5zdG9wUmVjb3JkaW5nKClcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0UmVwbGF5aW5nKG4/OiBudW1iZXIgfCBudWxsLCBhY3Rpb25zPzogQWN0aW9uW10pIHtcbiAgICBpZiAodGhpcy5yZXBsYXlpbmcpIHJldHVyblxuXG4gICAgdGhpcy5zdG9wUmVjb3JkaW5nKClcbiAgICB0aGlzLnJlcGxheWluZyA9IHRydWVcbiAgICB0aGlzLmFjdGlvbnNFbC5vcGVuID0gZmFsc2VcbiAgICB0aGlzLmZvcm1FbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMucG9pbnRlckVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICB0aGlzLnBhaW50Q29udHJvbHMoKVxuXG4gICAgYWN0aW9ucyA/Pz0gdGhpcy5hY3Rpb25zXG5cbiAgICBjb25zdCBwbGF5ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IG9mIHJlcGxheScpXG4gICAgICBjb25zb2xlLnRpbWUoJ3JlcGxheSB0aW1lJylcblxuICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IGAke2FjdGlvbnMhLmxlbmd0aH0gcmVtYWluaW5nYFxuXG4gICAgICBsZXQgcHJldkFjdGlvbjogQWN0aW9uIHwgdm9pZFxuXG4gICAgICBjb25zdCByZXBsYXlPbmUgPSAoYWN0aW9uOiBBY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgY3RvciA9IEV2ZW50Q29uc3RydWN0b3JzTWFwW2FjdGlvbi5ldmVudC5pc10gYXMgYW55XG5cbiAgICAgICAgaWYgKCFjdG9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdNaXNzaW5nIEV2ZW50IGNvbnN0cnVjdG9yIGZvcjogJyArIGFjdGlvbi5ldmVudC5pcylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRpc3BhdGNoT3B0aW9ucyA9IHBpY2soXG4gICAgICAgICAgYWN0aW9uLmV2ZW50LFxuICAgICAgICAgIG11dGFibGUoZGlzcGF0Y2hQcm9wcylcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IGV2ZW50OiBQb2ludGVyRXZlbnQgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhcbiAgICAgICAgICBuZXcgY3RvcihhY3Rpb24uZXZlbnQudHlwZSwgeyB2aWV3OiB3aW5kb3csIC4uLmRpc3BhdGNoT3B0aW9ucyB9KSxcbiAgICAgICAgICBjb3B5RXZlbnQoYWN0aW9uLmV2ZW50KVxuICAgICAgICApXG5cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBvaW50ZXJFbC5zdHlsZS5sZWZ0ID0gZXZlbnQucGFnZVggKyAncHgnXG4gICAgICAgICAgdGhpcy5wb2ludGVyRWwuc3R5bGUudG9wID0gZXZlbnQucGFnZVkgKyAncHgnXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGFjdGlvbi5zZWxlY3RvcnMpIHtcbiAgICAgICAgICBjb25zdCBlbCA9IHNlbGVjdG9yc1RvTm9kZShhY3Rpb24uc2VsZWN0b3JzKVxuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdNaXNzaW5nIG5vZGUgZm9yIHNlbGVjdG9yczonLCBhY3Rpb24uc2VsZWN0b3JzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobiA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2tpcHBlZCA9IDBcbiAgICAgICAgdGhpcy5yZXBsYXllZCA9IDBcblxuICAgICAgICBhY3Rpb25zOiBmb3IgKGNvbnN0IFtpLCBhY3Rpb25dIG9mIGFjdGlvbnMhLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmICghdGhpcy5yZXBsYXlpbmcpIGJyZWFrXG5cbiAgICAgICAgICBpZiAocHJldkFjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgZHQgPSBhY3Rpb24uZXZlbnQudGltZVN0YW1wIC0gcHJldkFjdGlvbi5ldmVudC50aW1lU3RhbXBcblxuICAgICAgICAgICAgLy8gaWYgbmV4dCBldmVudCBpcyBiaWdnZXIgdGhhbiAyLzMgb2YgYSBmcmFtZSB0aGVuIHdhaXRcbiAgICAgICAgICAgIGlmIChkdCA+IEZSQU1FX1RJTUUgKiAoMiAvIDMpKSB7XG4gICAgICAgICAgICAgIC8vIGlmIGxlc3MgdGhhbiAyKygxLzIpIGZyYW1lcywgd2FpdCBvbmUgZnJhbWVcbiAgICAgICAgICAgICAgaWYgKGR0IDwgRlJBTUVfVElNRSAqICgyICsgKDEgLyAyKSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc29sdmUpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHdhaXQgdW50aWwgaXRzIHRpbWUgbWludXMgMS41bXMgZm9yIG91ciBpbml0IHRpbWVcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkdCAtIDEuNSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB0aGlzIHNlbGVjdG9yIGlzIHdpbmRvdyBhbmQgdGFuZ2VudCBldmVudCBpcyB0aGUgc2FtZSBldmVudCxcbiAgICAgICAgICAvLyB0aGVuIGl0J3MgYSAuY2FwdHVyZSBzbyB3ZSBza2lwIGFuZCBsZXQgaXQgcHJvcGFnYXRlIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnN0IG5leHRBY3Rpb24gPSBhY3Rpb25zIS5hdChpICsgMSlcblxuICAgICAgICAgIGZvciAoY29uc3QgdGFuZ2VudEFjdGlvbiBvZiBhY3Rpb24uZXZlbnQuY2FwdHVyZSA/IFtuZXh0QWN0aW9uXSA6IFtwcmV2QWN0aW9uXSkge1xuICAgICAgICAgICAgaWYgKHRhbmdlbnRBY3Rpb24/LmV2ZW50LnR5cGUgPT09IGFjdGlvbi5ldmVudC50eXBlXG4gICAgICAgICAgICAgICYmIHRhbmdlbnRBY3Rpb24uZXZlbnQudGltZVN0YW1wID09PSBhY3Rpb24uZXZlbnQudGltZVN0YW1wKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2tpcHBlZCsrXG4gICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zRWwucXVlcnlTZWxlY3RvcihgI2FjdGlvbiR7aX1gKT8uY2xhc3NMaXN0LmFkZCgncmVjb3JkZXItdWktZXZlbnQtc2tpcHBlZCcpXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludFN0YXR1cygxKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBjb250aW51ZSBhY3Rpb25zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVwbGF5T25lKGFjdGlvbilcbiAgICAgICAgICBwcmV2QWN0aW9uID0gYWN0aW9uXG5cbiAgICAgICAgICB0aGlzLnJlcGxheWVkKytcbiAgICAgICAgICB0aGlzLnBhaW50U3RhdHVzKDEpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcGxheU9uZShhY3Rpb25zIVtuXSlcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ2VuZCBvZiByZXBsYXknKVxuICAgICAgY29uc29sZS50aW1lRW5kKCdyZXBsYXkgdGltZScpXG4gICAgfVxuXG4gICAgZG8ge1xuICAgICAgYXdhaXQgcGxheSgpXG4gICAgfSB3aGlsZSAodGhpcy5yZXBsYXlpbmcgJiYgbG9jYWxTdG9yYWdlLnJlY29yZGVyTG9vcCA9PT0gJ3RydWUnKVxuXG4gICAgdGhpcy5yZXBsYXlpbmcgPSBmYWxzZVxuICAgIHRoaXMuZm9ybUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5wb2ludGVyRWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLnBhaW50Q29udHJvbHMoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBET01SZWNvcmRlciB9IGZyb20gJy4uL3NyYydcblxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IGFueVxuXG53aW5kb3cucmVjb3JkZXIgPSBuZXcgRE9NUmVjb3JkZXIoKVxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh3aW5kb3cucmVjb3JkZXIuZWwpXG5cbmNvbnN0IGJ1dHRvbiA9IE9iamVjdC5hc3NpZ24oXG4gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpLFxuICB7IHRleHRDb250ZW50OiAnY2xpY2sgbWUnIH1cbilcbmNvbnN0IGNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5jb25zdCB0ZXh0YXJlYSA9IE9iamVjdC5hc3NpZ24oXG4gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyksXG4gIHsgcm93czogMTAsIHNwZWxsY2hlY2s6IGZhbHNlLCB2YWx1ZTogJ2NsaWNrIHJlY29yZCAmIHR5cGUgaW4gaGVyZVxcbicgfVxuKVxuXG5sZXQgdmFsID0gMFxuZnVuY3Rpb24gb25jbGljaygpIHtcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gYGNsaWNrczogJHt2YWwrK31gXG59XG5cbmZ1bmN0aW9uIG9ua2V5ZG93bihldjogS2V5Ym9hcmRFdmVudCkge1xuICBldi5wcmV2ZW50RGVmYXVsdCgpXG4gIHRleHRhcmVhLnZhbHVlICs9IGV2LmtleVxufVxuXG5mdW5jdGlvbiBvbnBvaW50ZXJtb3ZlKGV2OiBQb2ludGVyRXZlbnQpIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBjaXJjbGUuc3R5bGUuY3NzVGV4dCA9IC8qY3NzKi9gXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBsZWZ0OiAke2V2LnBhZ2VYICsgNX1weDtcbiAgICAgIHRvcDogJHtldi5wYWdlWSArIDE1fXB4O1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiBwaW5rO1xuICAgICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgICBgXG4gIH0pXG59XG5cbmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uY2xpY2spXG50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25rZXlkb3duKVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25wb2ludGVybW92ZSlcblxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSlcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uKVxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjaXJjbGUpXG4iXSwibmFtZXMiOlsiZmlsdGVyIiwib2JqIiwiZm4iLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJvbWl0IiwicHJvcHMiLCJpbmNsdWRlc0tleSIsImludmVydCIsImtleSIsImluY2x1ZGVzIiwiYm9vbCIsIlN5bWJvbCIsImZvciIsInRvRmx1ZW50IiwiU2NoZW1hIiwiY2IiLCJib29scyIsIngiLCJmbGFncyIsIm1hcCIsIm9taXR0ZWQiLCJzZXR0aW5ncyIsIm5vdCIsImJpbmQiLCJQcm94eSIsImdldCIsIl8iLCJyZWNlaXZlciIsInZhbHVlIiwiY29uc3RydWN0IiwiYXJncyIsImN0b3IiLCJjYWxsIiwic2VsZiIsImFwcGx5IiwidGhpcyIsInBpY2siLCJyZWR1Y2UiLCJwIiwibiIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImRlc2NyaXB0b3IiLCJvYmplY3QiLCJuYW1lIiwiZGVmaW5lUHJvcGVydHkiLCJNYXBNYXAiLCJNYXAiLCJzZXQiLCJrZXlBIiwia2V5QiIsImhhcyIsInNpemUiLCJkZWxldGUiLCJjbGVhciIsIm11dGFibGUiLCJhcnJheSJdLCJtYXBwaW5ncyI6IkFBSUE7Ozs7OztJQU9PLE1BQU1BLE1BQU0sR0FBRyxDQUFJQyxHQUFNLEVBQUVDLEVBQWtCLEdBQ2xEQyxNQUFNLENBQUNDLFdBQVcsQ0FDaEJELE1BQU0sQ0FBQ0UsT0FBTyxDQUFDSixHQUFHLENBQUMsQ0FBQ0QsTUFBTSxDQUFDRSxFQUFFLENBQUMsQ0FDakIsQ0FBQTtBQXdCakI7Ozs7OztJQU9PLE1BQU1JLElBQUksR0FBRyxDQUEyQkwsR0FBTSxFQUFFTSxLQUFRLEdBQzdEUCxNQUFNLENBQUNDLEdBQUcsRUFBRU8sV0FBVyxDQUFDRCxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQXFDLENBQUE7QUFFM0U7O0lBR08sTUFBTUMsV0FB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
</script>
  </body>
</html>
